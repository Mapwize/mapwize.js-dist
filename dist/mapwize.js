(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (process,global){
!function(){function n(){}function t(n){return n}function e(n){return!!n}function r(n){return!n}function u(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function i(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function o(n){return M(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function c(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function a(n,t){for(var e=-1,r=n.length,u=Array(r);++e<r;)u[e]=t(n[e],e,n);return u}function f(n){return a(Array(n),function(n,t){return t})}function l(n,t,e){return c(n,function(n,r,u){e=t(e,n,r,u)}),e}function s(n,t){c(W(n),function(e){t(n[e],e)})}function p(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function h(n){var t,e,r=-1;return o(n)?(t=n.length,function(){return r++,t>r?r:null}):(e=W(n),t=e.length,function(){return r++,t>r?e[r]:null})}function m(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),u=0;e>u;u++)r[u]=arguments[u+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function y(n){return function(t,e,r){return n(t,r)}}function v(t){return function(e,r,o){o=i(o||n),e=e||[];var c=h(e);if(0>=t)return o(null);var a=!1,f=0,l=!1;!function s(){if(a&&0>=f)return o(null);for(;t>f&&!l;){var n=c();if(null===n)return a=!0,void(0>=f&&o(null));f+=1,r(e[n],n,u(function(n){f-=1,n?(o(n),l=!0):s()}))}}()}}function d(n){return function(t,e,r){return n(P.eachOf,t,e,r)}}function g(n){return function(t,e,r,u){return n(v(e),t,r,u)}}function k(n){return function(t,e,r){return n(P.eachOfSeries,t,e,r)}}function b(t,e,r,u){u=i(u||n),e=e||[];var c=o(e)?[]:{};t(e,function(n,t,e){r(n,function(n,r){c[t]=r,e(n)})},function(n){u(n,c)})}function w(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(e){e&&u.push({index:t,value:n}),r()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function O(n,t,e,r){w(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function S(n,t,e){return function(r,u,i,o){function c(){o&&o(e(!1,void 0))}function a(n,r,u){return o?void i(n,function(r){o&&t(r)&&(o(e(!0,n)),o=i=!1),u()}):u()}arguments.length>3?n(r,u,a,c):(o=i,i=u,n(r,a,c))}}function E(n,t){return t}function L(t,e,r){r=r||n;var u=o(e)?[]:{};t(e,function(n,t,e){n(m(function(n,r){r.length<=1&&(r=r[0]),u[t]=r,e(n)}))},function(n){r(n,u)})}function j(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(n,t){u=u.concat(t||[]),r(n)})},function(n){r(n,u)})}function I(t,e,r){function i(t,e,r,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length&&t.idle()?P.setImmediate(function(){t.drain()}):(c(e,function(e){var i={data:e,callback:u||n};r?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void P.setImmediate(t.process))}function o(n,t){return function(){f-=1;var e=!1,r=arguments;c(t,function(n){c(l,function(t,r){t!==n||e||(l.splice(r,1),e=!0)}),n.callback.apply(n,r)}),n.tasks.length+f===0&&n.drain(),n.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var f=0,l=[],s={tasks:[],concurrency:e,payload:r,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(n,t){i(s,n,!1,t)},kill:function(){s.drain=n,s.tasks=[]},unshift:function(n,t){i(s,n,!0,t)},process:function(){for(;!s.paused&&f<s.concurrency&&s.tasks.length;){var n=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),e=a(n,function(n){return n.data});0===s.tasks.length&&s.empty(),f+=1,l.push(n[0]);var r=u(o(s,n));t(e,r)}},length:function(){return s.tasks.length},running:function(){return f},workersList:function(){return l},idle:function(){return s.tasks.length+f===0},pause:function(){s.paused=!0},resume:function(){if(s.paused!==!1){s.paused=!1;for(var n=Math.min(s.concurrency,s.tasks.length),t=1;n>=t;t++)P.setImmediate(s.process)}}};return s}function x(n){return m(function(t,e){t.apply(null,e.concat([m(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))})]))})}function A(n){return function(t,e,r){n(f(t),e,r)}}function T(n){return m(function(t,e){var r=m(function(e){var r=this,u=e.pop();return n(t,function(n,t,u){n.apply(r,e.concat([u]))},u)});return e.length?r.apply(this,e):r})}function z(n){return m(function(t){var e=t.pop();t.push(function(){var n=arguments;r?P.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var q,P={},C="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=C&&(q=C.async),P.noConflict=function(){return C.async=q,P};var H=Object.prototype.toString,M=Array.isArray||function(n){return"[object Array]"===H.call(n)},U=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},W=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},B="function"==typeof setImmediate&&setImmediate,D=B?function(n){B(n)}:function(n){setTimeout(n,0)};"object"==typeof process&&"function"==typeof process.nextTick?P.nextTick=process.nextTick:P.nextTick=D,P.setImmediate=B?D:P.nextTick,P.forEach=P.each=function(n,t,e){return P.eachOf(n,y(t),e)},P.forEachSeries=P.eachSeries=function(n,t,e){return P.eachOfSeries(n,y(t),e)},P.forEachLimit=P.eachLimit=function(n,t,e,r){return v(t)(n,y(e),r)},P.forEachOf=P.eachOf=function(t,e,r){function o(n){f--,n?r(n):null===c&&0>=f&&r(null)}r=i(r||n),t=t||[];for(var c,a=h(t),f=0;null!=(c=a());)f+=1,e(t[c],c,u(o));0===f&&r(null)},P.forEachOfSeries=P.eachOfSeries=function(t,e,r){function o(){var n=!0;return null===a?r(null):(e(t[a],a,u(function(t){if(t)r(t);else{if(a=c(),null===a)return r(null);n?P.setImmediate(o):o()}})),void(n=!1))}r=i(r||n),t=t||[];var c=h(t),a=c();o()},P.forEachOfLimit=P.eachOfLimit=function(n,t,e,r){v(t)(n,e,r)},P.map=d(b),P.mapSeries=k(b),P.mapLimit=g(b),P.inject=P.foldl=P.reduce=function(n,t,e,r){P.eachOfSeries(n,function(n,r,u){e(t,n,function(n,e){t=e,u(n)})},function(n){r(n,t)})},P.foldr=P.reduceRight=function(n,e,r,u){var i=a(n,t).reverse();P.reduce(i,e,r,u)},P.transform=function(n,t,e,r){3===arguments.length&&(r=e,e=t,t=M(n)?[]:{}),P.eachOf(n,function(n,r,u){e(t,n,r,u)},function(n){r(n,t)})},P.select=P.filter=d(w),P.selectLimit=P.filterLimit=g(w),P.selectSeries=P.filterSeries=k(w),P.reject=d(O),P.rejectLimit=g(O),P.rejectSeries=k(O),P.any=P.some=S(P.eachOf,e,t),P.someLimit=S(P.eachOfLimit,e,t),P.all=P.every=S(P.eachOf,r,r),P.everyLimit=S(P.eachOfLimit,r,r),P.detect=S(P.eachOf,t,E),P.detectSeries=S(P.eachOfSeries,t,E),P.detectLimit=S(P.eachOfLimit,t,E),P.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0}P.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,a(t.sort(r),function(n){return n.value}))})},P.auto=function(t,e,r){function u(n){g.unshift(n)}function o(n){var t=p(g,n);t>=0&&g.splice(t,1)}function a(){h--,c(g.slice(0),function(n){n()})}"function"==typeof arguments[1]&&(r=e,e=null),r=i(r||n);var f=W(t),h=f.length;if(!h)return r(null);e||(e=h);var y={},v=0,d=!1,g=[];u(function(){h||r(null,y)}),c(f,function(n){function i(){return e>v&&l(k,function(n,t){return n&&y.hasOwnProperty(t)},!0)&&!y.hasOwnProperty(n)}function c(){i()&&(v++,o(c),h[h.length-1](g,y))}if(!d){for(var f,h=M(t[n])?t[n]:[t[n]],g=m(function(t,e){if(v--,e.length<=1&&(e=e[0]),t){var u={};s(y,function(n,t){u[t]=n}),u[n]=e,d=!0,r(t,u)}else y[n]=e,P.setImmediate(a)}),k=h.slice(0,h.length-1),b=k.length;b--;){if(!(f=t[k[b]]))throw new Error("Has nonexistent dependency in "+k.join(", "));if(M(f)&&p(f,n)>=0)throw new Error("Has cyclic dependencies")}i()?(v++,h[h.length-1](g,y)):u(c)}})},P.retry=function(n,t,e){function r(n,t){if("number"==typeof t)n.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||o}}function u(n,t){function e(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}function r(n){return function(t){setTimeout(function(){t(null)},n)}}for(;a.times;){var u=!(a.times-=1);c.push(e(a.task,u)),!u&&a.interval>0&&c.push(r(a.interval))}P.series(c,function(t,e){e=e[e.length-1],(n||a.callback)(e.err,e.result)})}var i=5,o=0,c=[],a={times:i,interval:o},f=arguments.length;if(1>f||f>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=f&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&r(a,n),a.callback=e,a.task=t,a.callback?u():u},P.waterfall=function(t,e){function r(n){return m(function(t,u){if(t)e.apply(null,[t].concat(u));else{var i=n.next();i?u.push(r(i)):u.push(e),z(n).apply(null,u)}})}if(e=i(e||n),!M(t)){var u=new Error("First argument to waterfall must be an array of functions");return e(u)}return t.length?void r(P.iterator(t))():e()},P.parallel=function(n,t){L(P.eachOf,n,t)},P.parallelLimit=function(n,t,e){L(v(t),n,e)},P.series=function(n,t){L(P.eachOfSeries,n,t)},P.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},P.apply=m(function(n,t){return m(function(e){return n.apply(null,t.concat(e))})}),P.concat=d(j),P.concatSeries=k(j),P.whilst=function(t,e,r){if(r=r||n,t()){var u=m(function(n,i){n?r(n):t.apply(this,i)?e(u):r.apply(null,[null].concat(i))});e(u)}else r(null)},P.doWhilst=function(n,t,e){var r=0;return P.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},P.until=function(n,t,e){return P.whilst(function(){return!n.apply(this,arguments)},t,e)},P.doUntil=function(n,t,e){return P.doWhilst(n,function(){return!t.apply(this,arguments)},e)},P.during=function(t,e,r){r=r||n;var u=m(function(n,e){n?r(n):(e.push(i),t.apply(this,e))}),i=function(n,t){n?r(n):t?e(u):r(null)};t(i)},P.doDuring=function(n,t,e){var r=0;P.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},P.queue=function(n,t){var e=I(function(t,e){n(t[0],e)},t,1);return e},P.priorityQueue=function(t,e){function r(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length?P.setImmediate(function(){t.drain()}):void c(e,function(e){var c={data:e,priority:i,callback:"function"==typeof o?o:n};t.tasks.splice(u(t.tasks,c,r)+1,0,c),t.tasks.length===t.concurrency&&t.saturated(),P.setImmediate(t.process)})}var o=P.queue(t,e);return o.push=function(n,t,e){i(o,n,t,e)},delete o.unshift,o},P.cargo=function(n,t){return I(n,1,t)},P.log=x("log"),P.dir=x("dir"),P.memoize=function(n,e){var r={},u={},i=Object.prototype.hasOwnProperty;e=e||t;var o=m(function(t){var o=t.pop(),c=e.apply(null,t);i.call(r,c)?P.setImmediate(function(){o.apply(null,r[c])}):i.call(u,c)?u[c].push(o):(u[c]=[o],n.apply(null,t.concat([m(function(n){r[c]=n;var t=u[c];delete u[c];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,n)})])))});return o.memo=r,o.unmemoized=n,o},P.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},P.times=A(P.map),P.timesSeries=A(P.mapSeries),P.timesLimit=function(n,t,e,r){return P.mapLimit(f(n),t,e,r)},P.seq=function(){var t=arguments;return m(function(e){var r=this,u=e[e.length-1];"function"==typeof u?e.pop():u=n,P.reduce(t,e,function(n,t,e){t.apply(r,n.concat([m(function(n,t){e(n,t)})]))},function(n,t){u.apply(r,[n].concat(t))})})},P.compose=function(){return P.seq.apply(null,Array.prototype.reverse.call(arguments))},P.applyEach=T(P.eachOf),P.applyEachSeries=T(P.eachOfSeries),P.forever=function(t,e){function r(n){return n?i(n):void o(r)}var i=u(e||n),o=z(t);r()},P.ensureAsync=z,P.constant=m(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),P.wrapSync=P.asyncify=function(n){return m(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(u){return r(u)}U(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)})["catch"](function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"==typeof module&&module.exports?module.exports=P:"function"==typeof define&&define.amd?define([],function(){return P}):C.async=P}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":6}],2:[function(require,module,exports){
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"===n||oe.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ge.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function s(){G.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),oe.ready()}function a(){this.expando=oe.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(De,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Se.test(n)?oe.parseJSON(n):n}catch(i){}Ne.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return oe.css(e,t,"")},u=a(),l=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==l&&+u)&&Ae.exec(oe.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,oe.style(e,t,c+l);while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function f(e,t){for(var n=0,r=e.length;r>n;n++)Ee.set(e[n],"globalEval",!t||Ee.get(t[n],"globalEval"))}function p(e,t,n,r,i){for(var o,s,a,u,l,p,d=t.createDocumentFragment(),h=[],g=0,m=e.length;m>g;g++)if(o=e[g],o||0===o)if("object"===oe.type(o))oe.merge(h,o.nodeType?[o]:o);else if(Re.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(Oe.exec(o)||["",""])[1].toLowerCase(),u=Pe[a]||Pe._default,s.innerHTML=u[1]+oe.htmlPrefilter(o)+u[2],p=u[0];p--;)s=s.lastChild;oe.merge(h,s.childNodes),s=d.firstChild,s.textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",g=0;o=h[g++];)if(r&&oe.inArray(o,r)>-1)i&&i.push(o);else if(l=oe.contains(o.ownerDocument,o),s=c(d.appendChild(o),"script"),l&&f(s),n)for(p=0;o=s[p++];)Fe.test(o.type||"")&&n.push(o);return d}function d(){return!0}function h(){return!1}function g(){try{return G.activeElement}catch(e){}}function m(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)m(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=h;else if(!i)return e;return 1===o&&(s=i,i=function(e){return oe().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,i,r,n)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=Xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(Ee.hasData(e)&&(o=Ee.access(e),s=Ee.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)oe.event.add(t,i,l[i][n])}Ne.hasData(e)&&(a=Ne.access(e),u=oe.extend({},a),Ne.set(t,u))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&He.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function T(e,t,n,r){t=J.apply([],t);var i,o,s,a,u,l,f=0,d=e.length,h=d-1,g=t[0],m=oe.isFunction(g);if(m||d>1&&"string"==typeof g&&!re.checkClone&&_e.test(g))return e.each(function(i){var o=e.eq(i);m&&(t[0]=g.call(this,i,o.html())),T(o,t,n,r)});if(d&&(i=p(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=oe.map(c(i,"script"),y),a=s.length;d>f;f++)u=i,f!==h&&(u=oe.clone(u,!0,!0),a&&oe.merge(s,c(u,"script"))),n.call(e[f],u,f);if(a)for(l=s[s.length-1].ownerDocument,oe.map(s,x),f=0;a>f;f++)u=s[f],Fe.test(u.type||"")&&!Ee.access(u,"globalEval")&&oe.contains(l,u)&&(u.src?oe._evalUrl&&oe._evalUrl(u.src):oe.globalEval(u.textContent.replace(ze,"")))}return e}function C(e,t,n){for(var r,i=t?oe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||oe.cleanData(c(r)),r.parentNode&&(n&&oe.contains(r.ownerDocument,r)&&f(c(r,"script")),r.parentNode.removeChild(r));return e}function k(e,t){var n=oe(t.createElement(e)).appendTo(t.body),r=oe.css(n[0],"display");return n.detach(),r}function E(e){var t=G,n=Ve[e];return n||(n=k(e,t),"none"!==n&&n||(Ue=(Ue||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ue[0].contentDocument,t.write(),t.close(),n=k(e,t),Ue.detach()),Ve[e]=n),n}function N(e,t,n){var r,i,o,s,a=e.style;return n=n||Qe(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||oe.contains(e.ownerDocument,e)||(s=oe.style(e,t)),n&&!re.pixelMarginRight()&&Ge.test(s)&&Ye.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in rt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in rt)return e}function j(e,t,n){var r=Ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(e,n+qe[o],!0,i)),r?("content"===n&&(s-=oe.css(e,"padding"+qe[o],!0,i)),"margin"!==n&&(s-=oe.css(e,"border"+qe[o]+"Width",!0,i))):(s+=oe.css(e,"padding"+qe[o],!0,i),"padding"!==n&&(s+=oe.css(e,"border"+qe[o]+"Width",!0,i)));return s}function q(t,n,r){var i=!0,o="width"===n?t.offsetWidth:t.offsetHeight,s=Qe(t),a="border-box"===oe.css(t,"boxSizing",!1,s);if(G.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[n])),0>=o||null==o){if(o=N(t,n,s),(0>o||null==o)&&(o=t.style[n]),Ge.test(o))return o;i=a&&(re.boxSizingReliable()||o===t.style[n]),o=parseFloat(o)||0}return o+A(t,n,r||(a?"border":"content"),i,s)+"px"}function L(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=Ee.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Le(r)&&(o[s]=Ee.access(r,"olddisplay",E(r.nodeName)))):(i=Le(r),"none"===n&&i||Ee.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function O(){return e.setTimeout(function(){it=void 0}),it=oe.now()}function F(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=qe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function P(e,t,n){for(var r,i=(I.tweeners[t]||[]).concat(I.tweeners["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function R(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Le(e),g=Ee.get(e,"fxshow");n.queue||(a=oe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=oe.css(e,"display"),c="none"===l?Ee.get(e,"olddisplay")||E(e.nodeName):l,"inline"===c&&"none"===oe.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],st.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||oe.style(e,r)}else l=void 0;if(oe.isEmptyObject(p))"inline"===("none"===l?E(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=Ee.access(e,"fxshow",{}),o&&(g.hidden=!h),h?oe(e).show():f.done(function(){oe(e).hide()}),f.done(function(){var t;Ee.remove(e,"fxshow");for(t in p)oe.style(e,t,p[t])});for(r in p)s=P(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function M(e,t){var n,r,i,o,s;for(n in e)if(r=oe.camelCase(n),i=t[r],o=e[n],oe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=oe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function I(e,t,n){var r,i,o=0,s=I.prefilters.length,a=oe.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=it||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=oe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(M(c,l.opts.specialEasing);s>o;o++)if(r=I.prefilters[o].call(l,e,c,l.opts))return oe.isFunction(r.stop)&&(oe._queueHooks(l.elem,l.opts.queue).stop=oe.proxy(r.stop,r)),r;return oe.map(c,P,l),oe.isFunction(l.opts.start)&&l.opts.start.call(e,l),oe.fx.timer(oe.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function B(e,t,n,r){function i(a){var u;return o[a]=!0,oe.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===Nt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function _(e,t){var n,r,i=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&oe.extend(!0,e,r),e}function X(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function z(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,r){var i;if(oe.isArray(t))oe.each(t,function(t,i){n||At.test(e)?r(e,i):U(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==oe.type(t))r(e,t);else for(i in t)U(e+"["+i+"]",t[i],n,r)}function V(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],G=e.document,Q=Y.slice,J=Y.concat,K=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie="2.2.3",oe=function(e,t){return new oe.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,ue=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:Y.sort,splice:Y.splice},oe.extend=oe.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(oe.isPlainObject(r)||(i=oe.isArray(r)))?(i?(i=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},s[t]=oe.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=G.createElement("script"),t.text=e,G.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(ue,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;r>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?oe.merge(r,"string"==typeof e?[e]:e):K.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o,s=0,a=[];if(n(e))for(i=e.length;i>s;s++)o=t(e[s],s,r),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,r),null!=o&&a.push(o);return J.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(r=Q.call(arguments,2),i=function(){return e.apply(t||this,r.concat(Q.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i):void 0},now:Date.now,support:re}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=Y[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&((t?t.ownerDocument||t:W)!==L&&q(t),t=t||L,O)){if(11!==g&&(l=ve.exec(e)))if(i=l[1]){if(9===g){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(h&&(s=h.getElementById(i))&&M(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(i)),n}if(w.qsa&&!z[e+" "]&&(!F||!F.test(e))){if(1!==g)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(xe,"\\$&"):t.setAttribute("id",a=I),f=E(e),o=f.length,u=pe.test(a)?"#"+a:"[id='"+a+"']";o--;)f[o]=u+" "+p(f[o]);d=f.join(","),h=ye.test(e)&&c(t.parentNode)||t}if(d)try{return K.apply(n,h.querySelectorAll(d)),n}catch(m){}finally{a===I&&t.removeAttribute("id")}}}return S(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[I]=!0,e}function i(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l,c=[$,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[I]||(t[I]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(a=u[r])&&a[0]===$&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[I]&&(i=v(i)),o&&!o[I]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?ee(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):K.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==D)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[I]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=D,x=r||o&&T.find.TAG("*",l),b=$+=null==y?1:Math.random()||.1,w=x.length;for(l&&(D=s===L||s||l);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0,s||c.ownerDocument===L||(q(c),a=!O);p=e[f++];)if(p(c,s||L,a)){u.push(c);break}l&&($=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&($=b,D=y),g};return i?r(s):s}var b,w,T,C,k,E,N,S,D,j,A,q,L,H,O,F,P,R,M,I="sizzle"+1*new Date,W=e.document,$=0,B=0,_=n(),X=n(),z=n(),U=function(e,t){return e===t&&(A=!0),0},V=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,K=G.push,Z=G.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),pe=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,xe=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Te=function(){q()};try{K.apply(G=Z.call(W.childNodes),W.childNodes),G[W.childNodes.length].nodeType}catch(Ce){K={apply:G.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},q=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:W;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,H=L.documentElement,O=!k(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(L.getElementsByClassName),w.getById=i(function(e){return H.appendChild(e).id=I,!L.getElementsByName||!L.getElementsByName(I).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},T.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=me.test(L.querySelectorAll))&&(i(function(e){H.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+I+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||F.push(".#.+[+~]")}),i(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=me.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test(H.compareDocumentPosition),M=t||me.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===W&&M(W,e)?-1:t===L||t.ownerDocument===W&&M(W,t)?1:j?ee(j,e)-ee(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!i||!o)return e===L?-1:t===L?1:i?-1:o?1:j?ee(j,e)-ee(j,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?s(a[r],u[r]):a[r]===W?-1:u[r]===W?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&q(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&O&&!z[n+" "]&&(!P||!P.test(n))&&(!F||!F.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&q(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&q(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,j=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a,x=!1;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(p=m,f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===$&&l[1],x=d&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[$,d,x];break}}else if(y&&(p=t,f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===$&&l[1],x=d),x===!1)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++x||(y&&(f=p[I]||(p[I]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),c[e]=[$,x]),p!==t)););return x-=i,x===r||x%r===0&&x/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[I]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=N(e.replace(ae,"$1"));return i[I]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),
eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,E=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=X[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=ue.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=le.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),a=a.slice(r.length));for(s in T.filter)!(i=de[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):X(e,u).slice(0)},N=t.compile=function(e,t){var n,r=[],i=[],o=z[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[I]?r.push(o):i.push(o);o=z(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&E(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(be,we),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return K.apply(n,r),n;break}}return(l||N(e,f))(r,t,!O,n,!t||ye.test(e)&&c(t.parentNode)||t),n},w.sortStable=I.split("").sort(U).join("")===I,w.detectDuplicates=!!A,q(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var fe=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&oe(e).is(n))break;r.push(e)}return r},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},de=oe.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;n>t;t++)if(oe.contains(i[t],this))return!0}));for(t=0;n>t;t++)oe.find(e,i[t],r);return r=this.pushStack(n>1?oe.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&de.test(e)?oe(e):e||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=oe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||me,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:G,!0)),he.test(r[1])&&oe.isPlainObject(t))for(r in t)oe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=G.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ye.prototype=oe.fn,me=oe(G);var xe=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=de.test(e)||"string"!=typeof e?oe(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return fe(e,"parentNode")},parentsUntil:function(e,t,n){return fe(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return fe(e,"nextSibling")},prevAll:function(e){return fe(e,"previousSibling")},nextUntil:function(e,t,n){return fe(e,"nextSibling",n)},prevUntil:function(e,t,n){return fe(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,r){var i=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(be[e]||oe.uniqueSort(i),xe.test(e)&&i.reverse()),this.pushStack(i)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,r,i,s=[],a=[],u=-1,l=function(){for(i=e.once,r=t=!0;a.length;u=-1)for(n=a.shift();++u<s.length;)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(u=s.length-1,a.push(n)),function r(t){oe.each(t,function(t,n){oe.isFunction(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==oe.type(n)&&r(n)})}(arguments),n&&!t&&l()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,s,n))>-1;)s.splice(n,1),u>=n&&u--}),this},has:function(e){return e?oe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=a=[],n||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var s=oe.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,r):r}},i={};return r.pipe=r.then,oe.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=Q.call(arguments),s=o.length,a=1!==s||e&&oe.isFunction(e.promise)?s:0,u=1===a?e:oe.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?Q.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(u.reject):--a;return a||u.resolveWith(r,o),u.promise()}});var Te;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(Te.resolveWith(G,[oe]),oe.fn.triggerHandler&&(oe(G).triggerHandler("ready"),oe(G).off("ready"))))}}),oe.ready.promise=function(t){return Te||(Te=oe.Deferred(),"complete"===G.readyState||"loading"!==G.readyState&&!G.documentElement.doScroll?e.setTimeout(oe.ready):(G.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),Te.promise(t)},oe.ready.promise();var Ce=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===oe.type(n)){i=!0;for(a in n)Ce(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,oe.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(oe(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},ke=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!ke(e))return{};var t=e[this.expando];return t||(t={},ke(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?r=t.concat(t.map(oe.camelCase)):(i=oe.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(we)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Ee=new a,Ne=new a,Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;oe.extend({hasData:function(e){return Ne.hasData(e)||Ee.hasData(e)},data:function(e,t,n){return Ne.access(e,t,n)},removeData:function(e,t){Ne.remove(e,t)},_data:function(e,t,n){return Ee.access(e,t,n)},_removeData:function(e,t){Ee.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Ne.get(o),1===o.nodeType&&!Ee.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.slice(5)),u(o,r,i[r])));Ee.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Ne.set(this,e)}):Ce(this,function(t){var n,r;if(o&&void 0===t){if(n=Ne.get(o,e)||Ne.get(o,e.replace(De,"-$&").toLowerCase()),void 0!==n)return n;if(r=oe.camelCase(e),n=Ne.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else r=oe.camelCase(e),this.each(function(){var n=Ne.get(this,r);Ne.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&Ne.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ne.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=Ee.get(e,t),n&&(!r||oe.isArray(n)?r=Ee.access(e,t,oe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),r=n.length,i=n.shift(),o=oe._queueHooks(e,t),s=function(){oe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ee.get(e,n)||Ee.access(e,n,{empty:oe.Callbacks("once memory").add(function(){Ee.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=oe.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Ee.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var je=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+je+")([a-z%]*)$","i"),qe=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},He=/^(?:checkbox|radio)$/i,Oe=/<([\w:-]+)/,Fe=/^$|\/(?:java|ecma)script/i,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td;var Re=/<|&#?\w+;/;!function(){var e=G.createDocumentFragment(),t=e.appendChild(G.createElement("div")),n=G.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Me=/^key/,Ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,We=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=Ee.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=oe.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],l=t.length;l--;)a=We.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=oe.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=oe.event.special[d]||{},c=oe.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&oe.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),oe.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=Ee.hasData(e)&&Ee.get(e);if(m&&(u=m.events)){for(t=(t||"").match(we)||[""],l=t.length;l--;)if(a=We.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=oe.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||oe.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)oe.event.remove(e,d+t[l],n,r,!0);oe.isEmptyObject(u)&&Ee.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,r,i,o,s=[],a=Q.call(arguments),u=(Ee.get(this,"events")||{})[e.type]||[],l=oe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=oe.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((oe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?oe(i,this).index(u)>-1:oe.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||G,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Ie.test(i)?this.mouseHooks:Me.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new oe.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=G),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:h):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!oe.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,r){return m(this,e,t,n,r)},one:function(e,t,n,r){return m(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,e,n,t)})}});var $e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Be=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^true\/(.*)/,ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace($e,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=oe.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(s=c(a),o=c(e),r=0,i=o.length;i>r;r++)w(o[r],s[r]);if(t)if(n)for(o=o||c(e),s=s||c(a),r=0,i=o.length;i>r;r++)b(o[r],s[r]);else b(e,a);return s=c(a,"script"),s.length>0&&f(s,!u&&c(e,"script")),a},cleanData:function(e){for(var t,n,r,i=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(ke(n)){if(t=n[Ee.expando]){if(t.events)for(r in t.events)i[r]?oe.event.remove(n,r):oe.removeEvent(n,r,t.handle);n[Ee.expando]=void 0}n[Ne.expando]&&(n[Ne.expando]=void 0)}}}),oe.fn.extend({domManip:T,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return Ce(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ce(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Pe[(Oe.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return T(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,r=[],i=oe(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(i[s])[t](n),K.apply(r,n.get());return this.pushStack(r)}});var Ue,Ve={HTML:"block",BODY:"block"},Ye=/^margin/,Ge=new RegExp("^("+je+")(?!px)[a-z%]+$","i"),Qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Je=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},Ke=G.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ke.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Ke.removeChild(s)}var n,r,i,o,s=G.createElement("div"),a=G.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),oe.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=a.appendChild(G.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Ke.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ke.removeChild(s),a.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],rt=G.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=N(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=oe.camelCase(t),u=e.style;return t=oe.cssProps[a]||(oe.cssProps[a]=D(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ae.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(oe.cssNumber[a]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=oe.camelCase(t);return t=oe.cssProps[a]||(oe.cssProps[a]=D(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=N(e,t,r)),"normal"===i&&t in tt&&(i=tt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,r){return n?Ze.test(oe.css(e,"display"))&&0===e.offsetWidth?Je(e,et,function(){return q(e,t,r)}):q(e,t,r):void 0},set:function(e,n,r){var i,o=r&&Qe(e),s=r&&A(e,t,r,"border-box"===oe.css(e,"boxSizing",!1,o),o);return s&&(i=Ae.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),j(e,n,s)}}}),oe.cssHooks.marginLeft=S(re.reliableMarginLeft,function(e,t){return t?(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.cssHooks.marginRight=S(re.reliableMarginRight,function(e,t){return t?Je(e,{display:"inline-block"},N,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+qe[r]+t]=o[r]||o[r-2]||o[0];return i}},Ye.test(e)||(oe.cssHooks[e+t].set=j)}),oe.fn.extend({css:function(e,t){return Ce(this,function(e,t,n){var r,i,o={},s=0;if(oe.isArray(t)){for(r=Qe(e),i=t.length;i>s;s++)o[t[s]]=oe.css(e,t[s],!1,r);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=H.prototype.init,oe.fx.step={};var it,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(I,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Ae.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,i=e.length;i>r;r++)n=e[r],I.tweeners[n]=I.tweeners[n]||[],I.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),oe.speed=function(e,t,n){var r=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=oe.isEmptyObject(e),o=oe.speed(t,n,r),s=function(){var t=I(this,oe.extend({},e),o);(i||Ee.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=oe.timers,s=Ee.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&at.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ee.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=oe.timers,s=r?r.length:0;for(n.finish=!0,oe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,i)}}),oe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;
for(it=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),it=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=G.createElement("input"),t=G.createElement("select"),n=t.appendChild(G.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=G.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var ut,lt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Ce(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),i=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=oe.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),ut={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||oe.find.attr;lt[t]=function(e,t,r){var i,o;return r||(o=lt[t],lt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,lt[t]=o),i}});var ct=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ce(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,i=oe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),re.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var pt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(pt," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=oe.trim(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(pt," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=oe.trim(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=oe(this),o=e.match(we)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(void 0===e||"boolean"===n)&&(t=W(this),t&&Ee.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ee.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(pt," ").indexOf(t)>-1)return!0;return!1}});var dt=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=oe.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,oe(this).val()):e,null==i?i="":"number"==typeof i?i+="":oe.isArray(i)&&(i=oe.map(i,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=oe.valHooks[i.type]||oe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(dt,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],(n.selected||u===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=oe.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=oe.inArray(oe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>-1:void 0}},re.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||G],d=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!gt.test(d+oe.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[oe.expando]?t:new oe.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:oe.makeArray(n,[t]),f=oe.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!oe.isWindow(r)){for(u=f.delegateType||d,gt.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||G)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(Ee.get(s,"events")||{})[t.type]&&Ee.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&ke(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!ke(r)||l&&oe.isFunction(r[d])&&!oe.isWindow(r)&&(a=r[l],a&&(r[l]=null),oe.event.triggered=d,r[d](),oe.event.triggered=void 0,a&&(r[l]=a)),t.result}},simulate:function(e,t,n){var r=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Ee.access(r,t);i||r.addEventListener(e,n,!0),Ee.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ee.access(r,t)-1;i?Ee.access(r,t,i):(r.removeEventListener(e,n,!0),Ee.remove(r,t))}}});var mt=e.location,vt=oe.now(),yt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n};var xt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Tt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ct=/^(?:GET|HEAD)$/,kt=/^\/\//,Et={},Nt={},St="*/".concat("*"),Dt=G.createElement("a");Dt.href=mt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:Tt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_(_(e,oe.ajaxSettings),t):_(oe.ajaxSettings,e)},ajaxPrefilter:$(Et),ajaxTransport:$(Nt),ajax:function(t,n){function r(t,n,r,a){var l,f,y,x,w,C=n;2!==b&&(b=2,u&&e.clearTimeout(u),i=void 0,s=a||"",T.readyState=t>0?4:0,l=t>=200&&300>t||304===t,r&&(x=X(p,T,r)),x=z(p,x,T,l),l?(p.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=T.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=x.state,f=x.data,y=x.error,l=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),T.status=t,T.statusText=(n||C)+"",l?g.resolveWith(d,[f,C,T]):g.rejectWith(d,[T,C,y]),T.statusCode(v),v=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[T,p,l?f:y]),m.fireWith(d,[T,C]),c&&(h.trigger("ajaxComplete",[T,p]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,u,l,c,f,p=oe.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?oe(d):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),v=p.statusCode||{},y={},x={},b=0,w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=wt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=x[n]=x[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),r(0,t),this}};if(g.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,p.url=((t||p.url||mt.href)+"").replace(xt,"").replace(kt,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=oe.trim(p.dataType||"*").toLowerCase().match(we)||[""],null==p.crossDomain){l=G.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Dt.protocol+"//"+Dt.host!=l.protocol+"//"+l.host}catch(C){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=oe.param(p.data,p.traditional)),B(Et,p,n,T),2===b)return T;c=oe.event&&p.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ct.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(yt.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=bt.test(o)?o.replace(bt,"$1_="+vt++):o+(yt.test(o)?"&":"?")+"_="+vt++)),p.ifModified&&(oe.lastModified[o]&&T.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&T.setRequestHeader("If-None-Match",oe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+St+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(d,T,p)===!1||2===b))return T.abort();w="abort";for(f in{success:1,error:1,complete:1})T[f](p[f]);if(i=B(Nt,p,n,T)){if(T.readyState=1,c&&h.trigger("ajaxSend",[T,p]),2===b)return T;p.async&&p.timeout>0&&(u=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{b=1,i.send(y,r)}catch(C){if(!(2>b))throw C;r(-1,C)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,r,i){return oe.isFunction(n)&&(i=i||r,r=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:i,data:n,success:r},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var jt=/%20/g,At=/\[\]$/,qt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,r=[],i=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){i(this.name,this.value)});else for(n in e)U(n,e[n],t,i);return r.join("&").replace(jt,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Ht.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!He.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(qt,"\r\n")}}):{name:t.name,value:n.replace(qt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Ot={0:200,1223:204},Ft=oe.ajaxSettings.xhr();re.cors=!!Ft&&"withCredentials"in Ft,re.ajax=Ft=!!Ft,oe.ajaxTransport(function(t){var n,r;return re.cors||Ft&&!t.crossDomain?{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ot[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}:void 0}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),G.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Pt=[],Rt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||oe.expando+"_"+vt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Rt,"$1"+i):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||oe.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?oe(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Pt.push(i)),s&&oe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var r=he.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p([e],t,i),i&&i.length&&oe(i).remove(),oe.merge([],r.childNodes))};var Mt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=oe.trim(e.slice(a)),e=e.slice(0,a)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&oe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=oe.css(e,"position"),f=oe(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=oe.css(e,"top"),u=oe.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},a))),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,r)?(i=r.getBoundingClientRect(),n=V(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(r=e.offset()),r.top+=oe.css(e[0],"borderTopWidth",!0),r.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-oe.css(n,"marginTop",!0),left:t.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ke})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(r){return Ce(this,function(e,r,i){var o=V(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=S(re.pixelPosition,function(e,n){return n?(n=N(e,t),Ge.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){oe.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return Ce(this,function(t,n,r){var i;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?oe.css(t,n,s):oe.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var It=e.jQuery,Wt=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Wt),t&&e.jQuery===oe&&(e.jQuery=It),oe},t||(e.jQuery=e.$=oe),oe});
},{}],3:[function(require,module,exports){
L.LineUtil.PolylineDecorator={computeAngle:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90},getPointPathPixelLength:function(t){var e=t.length;if(2>e)return 0;for(var n,i=0,o=t[0],s=1;e>s;s++)i+=o.distanceTo(n=t[s]),o=n;return i},getPixelLength:function(t,e){var n=t instanceof L.Polyline?t.getLatLngs():t,i=n.length;if(2>i)return 0;for(var o,s=0,r=e.project(n[0]),a=1;i>a;a++)s+=r.distanceTo(o=e.project(n[a])),r=o;return s},projectPatternOnPath:function(t,e,n,i,o){var s,r=[];for(s=0,l=t.length;s<l;s++)r[s]=o.project(t[s]);var a=this.projectPatternOnPointPath(r,e,n,i);for(s=0,l=a.length;s<l;s++)a[s].latLng=o.unproject(a[s].pt);return a},projectPatternOnPointPath:function(t,e,n,i){var o=[],s=this.getPointPathPixelLength(t)*i,r=this.interpolateOnPointPath(t,e),a=n>0?this.getPointPathPixelLength(t)*n:0;if(o.push(r),i>0){var l=t;l=l.slice(r.predecessor),l[0]=r.pt;for(var h=this.getPointPathPixelLength(l);h-a>=s;)r=this.interpolateOnPointPath(l,s/h),o.push(r),l=l.slice(r.predecessor),l[0]=r.pt,h=this.getPointPathPixelLength(l)}return o},interpolateOnPointPath:function(t,e){var n=t.length;if(2>n)return null;if(0>=e)return{pt:t[0],predecessor:0,heading:this.computeAngle(t[0],t[1])};if(e>=1)return{pt:t[n-1],predecessor:n-1,heading:this.computeAngle(t[n-2],t[n-1])};if(2==n)return{pt:this.interpolateBetweenPoints(t[0],t[1],e),predecessor:0,heading:this.computeAngle(t[0],t[1])};for(var i=this.getPointPathPixelLength(t),o=t[0],s=o,r=0,a=0,l=0,h=1;n>h&&e>a;h++)o=s,r=a,s=t[h],l+=o.distanceTo(s),a=l/i;var p=(e-r)/(a-r);return{pt:this.interpolateBetweenPoints(o,s,p),predecessor:h-2,heading:this.computeAngle(o,s)}},interpolateBetweenPoints:function(t,e,n){return e.x!=t.x?new L.Point(t.x*(1-n)+n*e.x,t.y*(1-n)+n*e.y):new L.Point(t.x,t.y+(e.y-t.y)*n)}},L.PolylineDecorator=L.LayerGroup.extend({options:{patterns:[]},initialize:function(t,e){L.LayerGroup.prototype.initialize.call(this),L.Util.setOptions(this,e),this._map=null,this._initPaths(t),this._initPatterns()},_initPaths:function(t){this._paths=[];if(t instanceof L.Polyline)this._initPath(t.getLatLngs(),t instanceof L.Polygon);else if(L.Util.isArray(t)&&t.length>0)if(t[0]instanceof L.Polyline)for(var e=0;e<t.length;e++)this._initPath(t[e].getLatLngs(),t[e]instanceof L.Polygon);else this._initPath(t)},_isCoordArray:function(t){return L.Util.isArray(t)&&t.length>0&&(t[0]instanceof L.LatLng||L.Util.isArray(t[0])&&2==t[0].length&&"number"==typeof t[0][0])},_initPath:function(t,e){var n;n=this._isCoordArray(t)?[t]:t;for(var i=0;i<n.length;i++)e&&n[i].push(n[i][0]),this._paths.push(n[i])},_initPatterns:function(){this._isZoomDependant=!1,this._patterns=[];for(var t,e=0;e<this.options.patterns.length;e++)t=this._parsePatternDef(this.options.patterns[e]),this._patterns.push(t),this._isZoomDependant=this._isZoomDependant||t.isOffsetInPixels||t.isEndOffsetInPixels||t.isRepeatInPixels||t.symbolFactory.isZoomDependant},setPatterns:function(t){this.options.patterns=t,this._initPatterns(),this._softRedraw()},setPaths:function(t){this._initPaths(t),this.redraw()},_parsePatternDef:function(t,e){var n={cache:[],symbolFactory:t.symbol,isOffsetInPixels:!1,isEndOffsetInPixels:!1,isRepeatInPixels:!1};return"string"==typeof t.offset&&-1!=t.offset.indexOf("%")?n.offset=parseFloat(t.offset)/100:(n.offset=t.offset?parseFloat(t.offset):0,n.isOffsetInPixels=n.offset>0),"string"==typeof t.endOffset&&-1!=t.endOffset.indexOf("%")?n.endOffset=parseFloat(t.endOffset)/100:(n.endOffset=t.endOffset?parseFloat(t.endOffset):0,n.isEndOffsetInPixels=n.endOffset>0),"string"==typeof t.repeat&&-1!=t.repeat.indexOf("%")?n.repeat=parseFloat(t.repeat)/100:(n.repeat=parseFloat(t.repeat),n.isRepeatInPixels=n.repeat>0),n},onAdd:function(t){this._map=t,this._draw(),this._isZoomDependant&&this._map.on("zoomend",this._softRedraw,this)},onRemove:function(t){this._map.off("zoomend",this._softRedraw,this),this._map=null,L.LayerGroup.prototype.onRemove.call(this,t)},_buildSymbols:function(t,e,n){for(var i=[],o=0,s=n.length;s>o;o++)i.push(e.buildSymbol(n[o],t,this._map,o,s));return i},_getCache:function(t,e,n){var i=t.cache[e];return"undefined"==typeof i?(t.cache[e]=[],null):i[n]},_getDirectionPoints:function(t,e){var n=this._map.getZoom(),i=this._getCache(e,n,t);if(i)return i;var o,s,r,a=null,l=this._paths[t];return e.isOffsetInPixels?(a=L.LineUtil.PolylineDecorator.getPixelLength(l,this._map),o=e.offset/a):o=e.offset,e.isEndOffsetInPixels?(a=null!==a?a:L.LineUtil.PolylineDecorator.getPixelLength(l,this._map),s=e.endOffset/a):s=e.endOffset,e.isRepeatInPixels?(a=null!==a?a:L.LineUtil.PolylineDecorator.getPixelLength(l,this._map),r=e.repeat/a):r=e.repeat,i=L.LineUtil.PolylineDecorator.projectPatternOnPath(l,o,s,r,this._map),e.cache[n][t]=i,i},redraw:function(){this._redraw(!0)},_softRedraw:function(){this._redraw(!1)},_redraw:function(t){if(null!==this._map){if(this.clearLayers(),t)for(var e=0;e<this._patterns.length;e++)this._patterns[e].cache=[];this._draw()}},_drawPattern:function(t){for(var e,n,i=0;i<this._paths.length;i++){e=this._getDirectionPoints(i,t),n=this._buildSymbols(this._paths[i],t.symbolFactory,e);for(var o=0;o<n.length;o++)this.addLayer(n[o])}},_draw:function(){for(var t=0;t<this._patterns.length;t++)this._drawPattern(this._patterns[t])}}),L.polylineDecorator=function(t,e){return new L.PolylineDecorator(t,e)},L.RotatedMarker=L.Marker.extend({options:{angle:0},statics:{TRANSFORM_ORIGIN:L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"])},_initIcon:function(){L.Marker.prototype._initIcon.call(this),this._icon.style[L.RotatedMarker.TRANSFORM_ORIGIN]="50% 50%"},_setPos:function(t){if(L.Marker.prototype._setPos.call(this,t),L.DomUtil.TRANSFORM)this._icon.style[L.DomUtil.TRANSFORM]+=" rotate("+this.options.angle+"deg)";else if(L.Browser.ie){var e=this.options.angle*(Math.PI/180),n=Math.cos(e),i=Math.sin(e);this._icon.style.filter+=" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+n+", M12="+-i+", M21="+i+", M22="+n+")"}},setAngle:function(t){this.options.angle=t}}),L.rotatedMarker=function(t,e){return new L.RotatedMarker(t,e)},L.Symbol=L.Symbol||{},L.Symbol.Dash=L.Class.extend({isZoomDependant:!0,options:{pixelSize:10,pathOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,e,n,i,o){var s=this.options,r=Math.PI/180;if(s.pixelSize<=1)return new L.Polyline([t.latLng,t.latLng],s.pathOptions);var a=n.project(t.latLng),l=-(t.heading-90)*r,h=new L.Point(a.x+s.pixelSize*Math.cos(l+Math.PI)/2,a.y+s.pixelSize*Math.sin(l)/2),p=a.add(a.subtract(h));return new L.Polyline([n.unproject(h),n.unproject(p)],s.pathOptions)}}),L.Symbol.dash=function(t){return new L.Symbol.Dash(t)},L.Symbol.ArrowHead=L.Class.extend({isZoomDependant:!0,options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(t){L.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,e,n,i,o){var s,r=this.options;return s=r.polygon?new L.Polygon(this._buildArrowPath(t,n),r.pathOptions):new L.Polyline(this._buildArrowPath(t,n),r.pathOptions)},_buildArrowPath:function(t,e){var n=Math.PI/180,i=e.project(t.latLng),o=-(t.heading-90)*n,s=this.options.headAngle/2*n,r=o+s,a=o-s,l=new L.Point(i.x-this.options.pixelSize*Math.cos(r),i.y+this.options.pixelSize*Math.sin(r)),h=new L.Point(i.x-this.options.pixelSize*Math.cos(a),i.y+this.options.pixelSize*Math.sin(a));return[e.unproject(l),t.latLng,e.unproject(h)]}}),L.Symbol.arrowHead=function(t){return new L.Symbol.ArrowHead(t)},L.Symbol.Marker=L.Class.extend({isZoomDependant:!1,options:{markerOptions:{},rotate:!1},initialize:function(t){L.Util.setOptions(this,t),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1,this.isZoomDependant=L.Browser.ie&&this.options.rotate},buildSymbol:function(t,e,n,i,o){return this.options.rotate?(this.options.markerOptions.angle=t.heading+(this.options.angleCorrection||0),new L.RotatedMarker(t.latLng,this.options.markerOptions)):new L.Marker(t.latLng,this.options.markerOptions)}}),L.Symbol.marker=function(t){return new L.Symbol.Marker(t)};
},{}],4:[function(require,module,exports){
!function(t,e,i){var n=t.L,o={};o.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=n,this},t.L=o,o.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;n>i;i++){o=s[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,e,i){var n,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function s(){var a=arguments;return n?void(o=!0):(n=!0,setTimeout(function(){n=!1,o&&(s.apply(i,a),o=!1)},e),void t.apply(i,a))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,a=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,a,r){return e=o.bind(e,n),a&&s===i?void e():s.call(t,e,r)},o.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var a=this;return e.__super__=a.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var s="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d=this[s]=this[s]||{},p=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;a>n;n++)r={action:e,context:i||this},h=t[n],p?(l=h+"_idx",u=l+"_len",c=d[l]=d[l]||{},c[p]||(c[p]=[],d[u]=(d[u]||0)+1),c[p].push(r)):(d[h]=d[h]||[],d[h].push(r));return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d,p,_=this[s],m=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;a>n;n++)if(r=t[n],u=r+"_idx",c=u+"_len",d=_[u],e){if(h=m&&d?d[m]:_[r]){for(l=h.length-1;l>=0;l--)h[l].action!==e||i&&h[l].context!==i||(p=h.splice(l,1),p[0].action=o.Util.falseFn);i&&d&&0===h.length&&(delete d[m],_[c]--)}}else delete _[r],delete _[u],delete _[c];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,a,r,h,l=o.Util.extend({},e,{type:t,target:this}),u=this[s];if(u[t])for(i=u[t].slice(),n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,l);r=u[t+"_idx"];for(h in r)if(i=r[h].slice())for(n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,l);return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n="ActiveXObject"in t,s=n&&!e.addEventListener,a=navigator.userAgent.toLowerCase(),r=-1!==a.indexOf("webkit"),h=-1!==a.indexOf("chrome"),l=-1!==a.indexOf("phantom"),u=-1!==a.indexOf("android"),c=-1!==a.search("android [23]"),d=-1!==a.indexOf("gecko"),p=typeof orientation!=i+"",_=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled||_,f="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,g=e.documentElement,v=n&&"transition"in g.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!c,P="MozPerspective"in g.style,L="OTransition"in g.style,x=!t.L_DISABLE_3D&&(v||y||P||L)&&!l,w=!t.L_NO_TOUCH&&!l&&(m||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch);o.Browser={ie:n,ielt9:s,webkit:r,gecko:d&&!r&&!t.opera&&!n,android:u,android23:c,chrome:h,ie3d:v,webkit3d:y,gecko3d:P,opera3d:L,any3d:x,mobile:p,mobileWebkit:p&&r,mobileWebkit3d:p&&y,mobileOpera:p&&t.opera,touch:w,msPointer:_,pointer:m,retina:f}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,a=s.x>=e.x&&n.x<=i.x,r=s.y>=e.y&&n.y<=i.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,n=0,s=0,a=t,r=e.body,h=e.documentElement;do{if(n+=a.offsetTop||0,s+=a.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(a,"borderTopWidth"),10)||0,s+=parseInt(o.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=o.DomUtil.getStyle(a,"position"),a.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||h.scrollTop||0,s+=r.scrollLeft||h.scrollLeft||0;break}if("relative"===i&&!a.offsetLeft){var l=o.DomUtil.getStyle(a,"width"),u=o.DomUtil.getStyle(a,"max-width"),c=a.getBoundingClientRect();("none"!==l||"none"!==u)&&(s+=c.left+a.clientLeft),n+=c.top+(r.scrollTop||h.scrollTop||0);break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;n-=a.scrollTop||0,s-=a.scrollLeft||0,a=a.parentNode}while(a);return new o.Point(s,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),s=0,a=n.length;a>s;s++)t.classList.add(n[s]);else if(!o.DomUtil.hasClass(t,e)){var r=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var i=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(i){var t=e.documentElement.style;this._userSelect=t[i],t[i]="none"}},enableTextSelection:function(){i&&(e.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,a=this.lat*i,r=t.lat*i,h=Math.sin(n/2),l=Math.sin(s/2),u=h*h+l*l*Math.cos(a)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),a=s.lat>=e.lat&&n.lat<=i.lat,r=s.lng>=e.lng&&n.lng<=i.lng;return a&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,a=n*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new o.Point(s,a)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),a=t instanceof o.Point?t:this.latLngToContainerPoint(t),r=a.subtract(s).multiplyBy(1-1/n),h=this.containerPointToLatLng(s.add(r));return this.setView(h,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n));s=e.maxZoom?Math.min(e.maxZoom,s):s;var a=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(r.add(h).divideBy(2).add(a),s);return this.setView(l,s,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);return i.equals(n)?this:this.panTo(n,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),s=i.divideBy(2).round(),a=n.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n,s=this.getMinZoom()-(e?1:0),a=this.getMaxZoom(),r=this.getSize(),h=t.getNorthWest(),l=t.getSouthEast(),u=!0;i=o.point(i||[0,0]);do s++,n=this.project(l,s).subtract(this.project(h,s)).add(i),u=e?n.x<r.x||n.y<r.y:r.contains(n);while(u&&a>=s);return u&&e?null:e?s:s-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t,e){var i=this.project(o.latLng(t));return e||(i=i._round()),i._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var s=this._zoom!==e;n||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),a&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(s||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),o=this._getZoomSpan();for(t in this._zoomBoundLayers){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)||(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)||(n=Math.max(n,s.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,s=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=s.length;n>i;i++)o.DomEvent[e](this._container,s[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(n);this.fire(e,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),a=new o.Bounds(n.subtract(s),n.add(s)),r=this._getBoundsOffset(a,i,e);return this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),s=this.project(e.getSouthEast(),i).subtract(t.max),a=this._rebound(n.x,-s.x),r=this._rebound(n.y,-s.y);return new o.Point(a,r)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,h=n*e,l=a/s,u=Math.sqrt(1-l*l),c=u*Math.sin(h);c=Math.pow((1-c)/(1+c),.5*u);var d=Math.tan(.5*(.5*Math.PI-h))/c;return h=-s*Math.log(d),new o.Point(r,h)},unproject:function(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,s=this.R_MINOR,a=t.x*i/n,r=s/n,h=Math.sqrt(1-r*r),l=Math.exp(-t.y/n),u=Math.PI/2-2*Math.atan(l),c=15,d=1e-7,p=c,_=.1;Math.abs(_)>d&&--p>0;)e=h*Math.sin(u),_=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-u,u+=_;return new o.LatLng(u*i,a)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,
transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=.5/(Math.PI*e);return new o.Transformation(i,.5,-i,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,a=-e(1/0,-(1/0));for(n=0,o=s.length;o>n;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&e>i&&(n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)),n},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var s=o.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(s),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(s)}}},_addTilesFromCenterOut:function(t){var i,n,s,a=[],r=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(n=t.min.x;n<=t.max.x;n++)s=new o.Point(n,i),this._tileShouldBeLoaded(s)&&a.push(s);var h=a.length;if(0!==h){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var l=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,n=0;h>n;n++)this._addTile(a[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y)return!1}if(e.bounds){var n=this._getTileSize(),o=t.multiplyBy(n),s=o.add([n,n]),a=this._map.unproject(o),r=this._map.unproject(s);if(e.continuousWorld||e.noWrap||(a=a.wrap(),r=r.wrap()),!e.bounds.intersects([a,r]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;e.detectRetina&&o.Browser.retina?i.width=i.height=2*n:i.width=i.height=n;for(var s in e)this.options.hasOwnProperty(s)||"crs"===s||(i[s]=e[s]);this.wmsParams=i,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),s=n.add([i,i]),a=this._crs.project(e.unproject(n,t.z)),r=this._crs.project(e.unproject(s,t.z)),h=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[r.y,a.x,a.y,r.x].join(","):[a.x,r.y,r.x,a.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(t)});return l+o.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+h},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),h=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),l=r._add(h._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,s=o.point(n[e+"Size"]);i="shadow"===e?o.point(n.shadowAnchor||n.iconAnchor):o.point(n.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,i,n,o,s,a=e.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=a.length;i>t;t++)if(n=a[t].src,o=n.match(r))return s=n.split(r)[0],(s?s+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=t.icon.createIcon(this._icon),a=!1;s!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(s.title=t.title),t.alt&&(s.alt=t.alt)),o.DomUtil.addClass(s,n),t.keyboard&&(s.tabIndex="0"),this._icon=s,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(s,"mouseover",this._bringToFront,this).on(s,"mouseout",this._resetZIndex,this);var r=t.icon.createShadow(this._shadow),h=!1;r!==this._shadow&&(this._removeShadow(),h=!0),r&&o.DomUtil.addClass(r,n),this._shadow=r,t.opacity<1&&this._updateOpacity();var l=this._map._panes;a&&l.markerPane.appendChild(this._icon),r&&h&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;return n.html!==!1?i.innerHTML=n.html:i.innerHTML="",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",n);o.DomEvent.disableClickPropagation(s),this._contentNode=o.DomUtil.create("div",e+"-content",s),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(s,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",n),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,a="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,a)):o.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),a=o.point(this.options.autoPanPadding),r=o.point(this.options.autoPanPaddingTopLeft||a),h=o.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),u=0,c=0;s.x+i+h.x>l.x&&(u=s.x+i-l.x+h.x),s.x-u-r.x<0&&(u=s.x-r.x),s.y+e+h.y>l.y&&(c=s.y+e-l.y+h.y),s.y-c-r.y<0&&(c=s.y-r.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offset:i},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t,t._source=this):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,i=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(n,s)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(n);this.fire(t.type,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),
this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;o.Browser.mobileWebkit&&r.removeChild(a),o.DomUtil.setPosition(a,e),a.setAttribute("width",n),a.setAttribute("height",s),a.setAttribute("viewBox",[e.x,e.y,n,s].join(" ")),o.Browser.mobileWebkit&&r.appendChild(a)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=o.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",i.lineCap&&(t.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(t.joinstyle=i.lineJoin)):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,i,n,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,n=this._parts[t].length;n>e;e++)s=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](s.x,s.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var a,r=[];for(a=0;n>a;a++)s[a]&&r.push(t[a]);return r},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>h&&(s=a,h=r);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,a,r=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(r|h))return[t,e];if(r&h)return!1;o=r||h,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r?(t=s,r=a):(e=s,h=a)}},_getEdgeIntersection:function(t,e,i,n){var s=e.x-t.x,a=e.y-t.y,r=n.min,h=n.max;return 8&i?new o.Point(t.x+s*(h.y-t.y)/a,h.y):4&i?new o.Point(t.x+s*(r.y-t.y)/a,r.y):2&i?new o.Point(h.x,t.y+a*(h.x-t.x)/s):1&i?new o.Point(r.x,t.y+a*(r.x-t.x)/s):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,a=e.x,r=e.y,h=i.x-a,l=i.y-r,u=h*h+l*l;return u>0&&(s=((t.x-a)*h+(t.y-r)*l)/u,s>1?(a=i.x,r=i.y):s>0&&(a+=h*s,r+=l*s)),h=t.x-a,l=t.y-r,n?h*h+l*l:new o.Point(a,r)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1,subpixelAccuracy:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t],this.options.subpixelAccuracy)},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,s=this._parts,a=null,r=0,h=s.length;h>r;r++)for(var l=s[r],u=1,c=l.length;c>u;u++){e=l[u-1],i=l[u];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);n>d&&(n=d,a=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(n)),a},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,s=e?t:[];for(i=0,n=t.length;n>i;i++){if(o.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;s[i]=o.latLng(t[i])}return s},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=o.Path.VML,n=0,s=t.length,a="";s>n;n++)e=t[n],i&&e._round(),a+=(n?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,i,n=this._originalPoints,s=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var a=this._parts,r=this._map._pathViewport,h=o.LineUtil;for(t=0,e=0;s-1>t;t++)i=h.clipSegment(n[t],n[t+1],r,t),i&&(a[e]=a[e]||[],a[e].push(i[0]),(i[1]!==n[t+1]||t===s-2)&&(a[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;n>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,s,a,r,h,l,u,c,d=[1,4,2,8],p=o.LineUtil;for(n=0,l=t.length;l>n;n++)t[n]._code=p._getBitCode(t[n],e);for(a=0;4>a;a++){for(u=d[a],i=[],n=0,l=t.length,s=l-1;l>n;s=n++)r=t[n],h=t[s],r._code&u?h._code&u||(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c)):(h._code&u&&(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,i=this._holes.length;i>e;e++)n=this._holes[e]=this._convertLatLngs(this._holes[e]),n[0].equals(n[n.length-1])&&n.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var s=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var i,n,s,a,r,h,l,u=this.options.weight/2;for(o.Browser.touch&&(u+=10),i=0,a=this._parts.length;a>i;i++)for(l=this._parts[i],n=0,r=l.length,s=r-1;r>n;s=n++)if((e||0!==n)&&(h=o.LineUtil.pointToSegmentDistance(t,l[s],l[n]),u>=h))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,i,n,s,a,r,h,l,u=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,h=this._parts.length;h>s;s++)for(e=this._parts[s],a=0,l=e.length,r=l-1;l>a;r=a++)i=e[a],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=o.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;i>e;e++)n=s[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(s[e]);return this}var a=this.options;if(!a.filter||a.filter(t)){var r=o.GeoJSON.geometryToLayer(t,a.pointToLayer,a.coordsToLatLng,a);return r.feature=o.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),a.onEachFeature&&a.onEachFeature(t,r),this.addLayer(r)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i,n){var s,a,r,h,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(i=i||this.coordsToLatLng,l.type){case"Point":return s=i(u),e?e(t,s):new o.Marker(s);case"MultiPoint":for(r=0,h=u.length;h>r;r++)s=i(u[r]),c.push(e?e(t,s):new o.Marker(s));return new o.FeatureGroup(c);case"LineString":return a=this.coordsToLatLngs(u,0,i),new o.Polyline(a,n);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return a=this.coordsToLatLngs(u,1,i),new o.Polygon(a,n);case"MultiLineString":return a=this.coordsToLatLngs(u,1,i),new o.MultiPolyline(a,n);case"MultiPolygon":return a=this.coordsToLatLngs(u,2,i),new o.MultiPolygon(a,n);case"GeometryCollection":for(r=0,h=l.geometries.length;h>r;r++)c.push(this.geometryToLayer({geometry:l.geometries[r],type:"Feature",properties:t.properties},e,i,n));return new o.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;s>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),a.push(n);return a},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return t("MultiPoint").call(this);var s=i&&"GeometryCollection"===i.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(s?e.geometry:o.GeoJSON.asFeature(e)))}),s?o.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,i,n){var s,a,r,h=o.stamp(i),l="_leaflet_"+e+h;return t[l]?this:(s=function(e){return i.call(n||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,s,h):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,s,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",s,!1),t.addEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?(a=s,r="mouseenter"===e?"mouseover":"mouseout",s=function(e){return o.DomEvent._checkMouse(t,e)?a(e):void 0},t.addEventListener(r,s,!1)):"click"===e&&o.Browser.android?(a=s,s=function(t){return o.DomEvent._filterClick(t,a)},t.addEventListener(e,s,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[l]=s,this))},removeListener:function(t,e,i){var n=o.stamp(i),s="_leaflet_"+e+n,a=t[s];return a?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,n):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i>=0;i--)o.DomEvent.on(t,o.Draggable.START[i],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&500>n||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled&&(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),!this._moving))){var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=new o.Point(i.clientX,i.clientY),s=n.subtract(this._startPoint);(s.x||s.y)&&(o.Browser.touch&&Math.abs(s.x)+Math.abs(s.y)<3||(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(s),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(s),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,s=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),s)e.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+n-this._times[0])/1e3,h=i.easeLinearity,l=a.multiplyBy(h/r),u=l.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,u),d=l.multiplyBy(c/u),p=c/(i.inertiaDeceleration*h),_=d.multiplyBy(-p/2).round();_.x&&_.y?(_=e._limitOffset(_,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(_,{duration:p,easeLinearity:h,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,n){function s(t){var e;if(o.Browser.pointer?(_.push(t.pointerId),e=_.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(r||i);h=t.touches?t.touches[0]:t,l=n>0&&u>=n,r=i}}function a(t){if(o.Browser.pointer){var e=_.indexOf(t.pointerId);if(-1===e)return;_.splice(e,1)}if(l){if(o.Browser.pointer){var n,s={};for(var a in h)n=h[a],"function"==typeof n?s[a]=n.bind(h):s[a]=n;h=s}h.type="dblclick",i(h),r=null}}var r,h,l=!1,u=250,c="_leaflet_",d=this._touchstart,p=this._touchend,_=[];t[c+d+n]=s,t[c+p+n]=a;var m=o.Browser.pointer?e.documentElement:t;return t.addEventListener(d,s,!1),m.addEventListener(p,a,!1),o.Browser.pointer&&m.addEventListener(o.DomEvent.POINTER_CANCEL,a,!1),this},removeDoubleTapListener:function(t,i){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(o.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+i],!1),o.Browser.pointer&&e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,i,n){
switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,i,n,s){var a="_leaflet_",r=this._pointers,h=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&o.DomEvent.preventDefault(t);for(var e=!1,i=0;i<r.length;i++)if(r[i].pointerId===t.pointerId){e=!0;break}e||r.push(t),t.touches=r.slice(),t.changedTouches=[t],n(t)};if(t[a+"touchstart"+s]=h,t.addEventListener(this.POINTER_DOWN,h,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,l,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var s="_leaflet_",a=this._pointers;return t[s+"touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,i,n){var o="_leaflet_",s=this._pointers,a=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=a,t.addEventListener(this.POINTER_UP,a,!1),t.addEventListener(this.POINTER_CANCEL,a,!1),this},removePointerListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=n.add(s)._divideBy(2),this._startDist=n.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),s=t.getZoom(),a=t.getScaleZoom(this._scale)-s,r=a>0?Math.ceil(a):Math.floor(a),h=t._limitZoom(s+r),l=t.getZoomScale(h)/this._scale;t._animateZoom(n,h,i,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),s=n.subtract(e),a=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,a),this._moved=!0,i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var a=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",a,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,s,a){var r=o.DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e;var h=o.DomEvent.stopPropagation;return o.DomEvent.on(r,"click",h).on(r,"mousedown",h).on(r,"dblclick",h).on(r,"click",o.DomEvent.preventDefault).on(r,"click",s,a).on(r,"click",this._refocusOnMap,a),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,a=0;o.x>0&&(a=n*(s.maxWidth/o.x)),this._updateScales(s,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),o.DomEvent.on(i,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var a=e.createElement("span");a.innerHTML=" "+t.name,n.appendChild(i),n.appendChild(a);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;o>t;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,s=this._el,a=t.getComputedStyle(s);if(o.Browser.any3d){if(n=a[o.DomUtil.TRANSFORM].match(this._transformRe),!n)return;e=parseFloat(n[1]),i=parseFloat(n[2])}else e=parseFloat(a.left),i=parseFloat(a.top);return new o.Point(e,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(i)?(this.panBy(i,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),s=this._getCenterLayerPoint()._add(o);return i.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,s,n,null,!0),!0):!1},_animateZoom:function(t,e,i,n,s,a,r){r||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:s,backwards:a}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),o.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)},this))}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[i],s=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?s+" "+n:n+" "+s},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i>.5&&.5>n?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;i>e;e++)n=s[e],n.complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=180*t.coords.accuracy/40075017,a=s/Math.cos(o.LatLng.DEG_TO_RAD*e),r=o.latLngBounds([e-s,i-a],[e+s,i+a]),h=this._locateOptions;if(h.setView){var l=Math.min(this.getBoundsZoom(r),h.maxZoom);this.setView(n,l)}var u={latlng:n,bounds:r,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document);
},{}],5:[function(require,module,exports){
(function (global){
(function(){function n(n,t){return n.set(t[0],t[1]),n}function t(n,t){return n.add(t),n}function r(n,t,r){var e=r.length;switch(e){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function e(n,t,r,e){for(var u=-1,i=n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function u(n,t){for(var r=-1,e=n.length,u=-1,i=t.length,o=Array(e+i);++r<e;)o[r]=n[r];for(;++u<i;)o[r++]=t[u];return o}function i(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function o(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function f(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function a(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function c(n,t){return!!n.length&&m(n,t,0)>-1}function l(n,t,r){for(var e=-1,u=n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function s(n,t){for(var r=-1,e=n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function h(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function p(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function v(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function _(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function g(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===Y?o===o:r(o,f)))var f=o,a=i}return a}function y(n,t,r,e){var u;return r(n,function(n,r,i){return t(n,r,i)?(u=e?r:n,!1):void 0}),u}function d(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function m(n,t,r){if(t!==t)return M(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function b(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function w(n,t){var r=n?n.length:0;return r?A(n,t)/r:On}function x(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function j(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function A(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==Y&&(r=r===Y?i:r+i)}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function k(n,t){return s(t,function(t){return[t,n[t]]})}function I(n){return function(t){return n(t)}}function R(n,t){return s(t,function(t){return n[t]})}function W(n,t){for(var r=-1,e=n.length;++r<e&&m(t,n[r],0)>-1;);return r}function E(n,t){for(var r=n.length;r--&&m(t,n[r],0)>-1;);return r}function S(n){return n&&n.Object===Object?n:null}function C(n,t){if(n!==t){var r=null===n,e=n===Y,u=n===n,i=null===t,o=t===Y,f=t===t;if(n>t&&!i||!u||r&&!o&&f||e&&f)return 1;if(t>n&&!r||!f||i&&!e&&u||o&&u)return-1}return 0}function B(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var a=C(u[e],i[e]);if(a){if(e>=f)return a;var c=r[e];return a*("desc"==c?-1:1)}}return n.index-t.index}function L(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&e++;return e}function z(n){return function(t,r){var e;return t===Y&&r===Y?0:(t!==Y&&(e=t),r!==Y&&(e=e===Y?r:n(e,r)),e)}}function $(n){return jr[n]}function U(n){return Ar[n]}function F(n){return"\\"+Ir[n]}function M(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function D(n){var t=!1;if(null!=n&&"function"!=typeof n.toString)try{t=!!(n+"")}catch(r){}return t}function P(n,t){return n="number"==typeof n||Et.test(n)?+n:-1,t=null==t?jn:t,n>-1&&n%1==0&&t>n}function N(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function q(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function T(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];(o===t||o===tn)&&(n[r]=tn,i[u++]=r)}return i}function Z(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function K(n){if(!n||!yr.test(n))return n.length;for(var t=_r.lastIndex=0;_r.test(n);)t++;return t}function V(n){return n.match(_r)}function G(n){return Or[n]}function J(S){function Et(n){if(uf(n)&&!Vl(n)&&!(n instanceof $t)){if(n instanceof zt)return n;if(sc.call(n,"__wrapped__"))return Ju(n)}return new zt(n)}function Lt(){}function zt(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Y}function $t(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=kn,this.__views__=[]}function Ut(){var n=new $t(this.__wrapped__);return n.__actions__=Ke(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ke(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ke(this.__views__),n}function Ft(){if(this.__filtered__){var n=new $t(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Mt(){var n=this.__wrapped__.value(),t=this.__dir__,r=Vl(n),e=0>t,u=r?n.length:0,i=Ru(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=$c(a,this.__takeCount__);if(!r||Q>u||u==a&&p==a)return We(n,this.__actions__);var v=[];n:for(;a--&&p>h;){c+=t;for(var _=-1,g=n[c];++_<s;){var y=l[_],d=y.iteratee,m=y.type,b=d(g);if(m==bn)g=b;else if(!b){if(m==mn)continue n;break n}}v[h++]=g}return v}function Dt(){}function Pt(n,t){return qt(n,t)&&delete n[t]}function Nt(n,t){if(Zc){var r=n[t];return r===nn?Y:r}return sc.call(n,t)?n[t]:Y}function qt(n,t){return Zc?n[t]!==Y:sc.call(n,t)}function Tt(n,t,r){n[t]=Zc&&r===Y?nn:r}function Zt(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Kt(){this.__data__={hash:new Dt,map:Pc?new Pc:[],string:new Dt}}function Vt(n){var t=this.__data__;return Fu(n)?Pt("string"==typeof n?t.string:t.hash,n):Pc?t.map["delete"](n):or(t.map,n)}function Gt(n){var t=this.__data__;return Fu(n)?Nt("string"==typeof n?t.string:t.hash,n):Pc?t.map.get(n):fr(t.map,n)}function Jt(n){var t=this.__data__;return Fu(n)?qt("string"==typeof n?t.string:t.hash,n):Pc?t.map.has(n):ar(t.map,n)}function Yt(n,t){var r=this.__data__;return Fu(n)?Tt("string"==typeof n?r.string:r.hash,n,t):Pc?r.map.set(n,t):lr(r.map,n,t),this}function Ht(n){var t=-1,r=n?n.length:0;for(this.__data__=new Zt;++t<r;)this.push(n[t])}function Qt(n,t){var r=n.__data__;if(Fu(t)){var e=r.__data__,u="string"==typeof t?e.string:e.hash;return u[t]===nn}return r.has(t)}function Xt(n){var t=this.__data__;if(Fu(n)){var r=t.__data__,e="string"==typeof n?r.string:r.hash;e[n]=nn}else t.set(n,nn)}function nr(n){var t=-1,r=n?n.length:0;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function tr(){this.__data__={array:[],map:null}}function rr(n){var t=this.__data__,r=t.array;return r?or(r,n):t.map["delete"](n)}function er(n){var t=this.__data__,r=t.array;return r?fr(r,n):t.map.get(n)}function ur(n){var t=this.__data__,r=t.array;return r?ar(r,n):t.map.has(n)}function ir(n,t){var r=this.__data__,e=r.array;e&&(e.length<Q-1?lr(e,n,t):(r.array=null,r.map=new Zt(e)));var u=r.map;return u&&u.set(n,t),this}function or(n,t){var r=cr(n,t);if(0>r)return!1;var e=n.length-1;return r==e?n.pop():Rc.call(n,r,1),!0}function fr(n,t){var r=cr(n,t);return 0>r?Y:n[r][1]}function ar(n,t){return cr(n,t)>-1}function cr(n,t){for(var r=n.length;r--;)if(Mo(n[r][0],t))return r;return-1}function lr(n,t,r){var e=cr(n,t);0>e?n.push([t,r]):n[e][1]=r}function sr(n,t,r,e){return n===Y||Mo(n,cc[r])&&!sc.call(e,r)?t:n}function hr(n,t,r){(r!==Y&&!Mo(n[t],r)||"number"==typeof t&&r===Y&&!(t in n))&&(n[t]=r)}function pr(n,t,r){var e=n[t];sc.call(n,t)&&Mo(e,r)&&(r!==Y||t in n)||(n[t]=r)}function _r(n,t,r,e){return el(n,function(n,u,i){t(e,n,r(n),i)}),e}function jr(n,t){return n&&Ve(t,Zf(t),n)}function Ar(n,t){for(var r=-1,e=null==n,u=t.length,i=Array(u);++r<u;)i[r]=e?Y:Nf(n,t[r]);return i}function Or(n,t,r){return n===n&&(r!==Y&&(n=r>=n?n:r),t!==Y&&(n=n>=t?n:t)),n}function kr(n,t,r,e,u,o,f){var a;if(e&&(a=o?e(n,u,o,f):e(n)),a!==Y)return a;if(!ef(n))return n;var c=Vl(n);if(c){if(a=Eu(n),!t)return Ke(n,a)}else{var l=Iu(n),s=l==Ln||l==zn;if(Gl(n))return $e(n,t);if(l==Fn||l==Wn||s&&!o){if(D(n))return o?n:{};if(a=Su(s?{}:n),!t)return Je(n,jr(a,n))}else{if(!xr[l])return o?n:{};a=Cu(n,l,kr,t)}}f||(f=new nr);var h=f.get(n);if(h)return h;if(f.set(n,a),!c)var p=r?du(n):Zf(n);return i(p||n,function(u,i){p&&(i=u,u=n[i]),pr(a,i,kr(u,t,r,e,i,n,f))}),a}function Ir(n){var t=Zf(n),r=t.length;return function(e){if(null==e)return!r;for(var u=r;u--;){var i=t[u],o=n[i],f=e[i];if(f===Y&&!(i in Object(e))||!o(f))return!1}return!0}}function Er(n){return ef(n)?Oc(n):{}}function Sr(n,t,r){if("function"!=typeof n)throw new fc(X);return Ic(function(){n.apply(Y,r)},t)}function Br(n,t,r,e){var u=-1,i=c,o=!0,f=n.length,a=[],h=t.length;if(!f)return a;r&&(t=s(t,I(r))),e?(i=l,o=!1):t.length>=Q&&(i=Qt,o=!1,t=new Ht(t));n:for(;++u<f;){var p=n[u],v=r?r(p):p;if(o&&v===v){for(var _=h;_--;)if(t[_]===v)continue n;a.push(p)}else i(t,v,e)||a.push(p)}return a}function Lr(n,t){var r=!0;return el(n,function(n,e,u){return r=!!t(n,e,u)}),r}function zr(n,t,r,e){var u=n.length;for(r=If(r),0>r&&(r=-r>u?0:u+r),e=e===Y||e>u?u:If(e),0>e&&(e+=u),e=r>e?0:Rf(e);e>r;)n[r++]=t;return n}function $r(n,t){var r=[];return el(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Mr(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Lu),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?Mr(f,t-1,r,e,u):h(u,f):e||(u[u.length]=f)}return u}function Dr(n,t){return n&&il(n,t,Zf)}function Pr(n,t){return n&&ol(n,t,Zf)}function Nr(n,t){return a(t,function(t){return nf(n[t])})}function qr(n,t){t=Uu(t,n)?[t]:Le(t);for(var r=0,e=t.length;null!=n&&e>r;)n=n[t[r++]];return r&&r==e?n:Y}function Tr(n,t,r){var e=t(n);return Vl(n)?e:h(e,r(n))}function Zr(n,t){return sc.call(n,t)||"object"==typeof n&&t in n&&null===Ou(n)}function Kr(n,t){return t in Object(n)}function Vr(n,t,r){return n>=$c(t,r)&&n<zc(t,r)}function Gr(n,t,r){for(var e=r?l:c,u=n[0].length,i=n.length,o=i,f=Array(i),a=1/0,h=[];o--;){var p=n[o];o&&t&&(p=s(p,I(t))),a=$c(p.length,a),f[o]=!r&&(t||u>=120&&p.length>=120)?new Ht(o&&p):Y}p=n[0];var v=-1,_=f[0];n:for(;++v<u&&h.length<a;){var g=p[v],y=t?t(g):g;if(!(_?Qt(_,y):e(h,y,r))){for(o=i;--o;){var d=f[o];if(!(d?Qt(d,y):e(n[o],y,r)))continue n}_&&_.push(y),h.push(g)}}return h}function Jr(n,t,r,e){return Dr(n,function(n,u,i){t(e,r(n),u,i)}),e}function Yr(n,t,e){Uu(t,n)||(t=Le(t),n=Zu(n,t),t=vi(t));var u=null==n?n:n[t];return null==u?Y:r(u,n,e)}function Hr(n,t,r,e,u){return n===t?!0:null==n||null==t||!ef(n)&&!uf(t)?n!==n&&t!==t:Qr(n,t,Hr,r,e,u)}function Qr(n,t,r,e,u,i){var o=Vl(n),f=Vl(t),a=En,c=En;o||(a=Iu(n),a=a==Wn?Fn:a),f||(c=Iu(t),c=c==Wn?Fn:c);var l=a==Fn&&!D(n),s=c==Fn&&!D(t),h=a==c;if(h&&!l)return i||(i=new nr),o||bf(n)?_u(n,t,r,e,u,i):gu(n,t,a,r,e,u,i);if(!(u&vn)){var p=l&&sc.call(n,"__wrapped__"),v=s&&sc.call(t,"__wrapped__");if(p||v){var _=p?n.value():n,g=v?t.value():t;return i||(i=new nr),r(_,g,e,u,i)}}return h?(i||(i=new nr),yu(n,t,r,e,u,i)):!1}function Xr(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Object(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var a=f[0],c=n[a],l=f[1];if(o&&f[2]){if(c===Y&&!(a in n))return!1}else{var s=new nr;if(e)var h=e(c,l,a,n,t,s);if(!(h===Y?Hr(l,c,e,pn|vn,s):h))return!1}}return!0}function ne(n){return"function"==typeof n?n:null==n?$a:"object"==typeof n?Vl(n)?ie(n[0],n[1]):ue(n):Ta(n)}function te(n){return Lc(Object(n))}function re(n){n=null==n?n:Object(n);var t=[];for(var r in n)t.push(r);return t}function ee(n,t){var r=-1,e=To(n)?Array(n.length):[];return el(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function ue(n){var t=xu(n);return 1==t.length&&t[0][2]?Nu(t[0][0],t[0][1]):function(r){return r===n||Xr(r,n,t)}}function ie(n,t){return Uu(n)&&Pu(t)?Nu(n,t):function(r){var e=Nf(r,n);return e===Y&&e===t?Tf(r,n):Hr(t,e,Y,pn|vn)}}function oe(n,t,r,e,u){if(n!==t){if(!Vl(t)&&!bf(t))var o=Kf(t);i(o||t,function(i,f){if(o&&(f=i,i=t[f]),ef(i))u||(u=new nr),fe(n,t,f,r,oe,e,u);else{var a=e?e(n[f],i,f+"",n,t,u):Y;a===Y&&(a=i),hr(n,f,a)}})}}function fe(n,t,r,e,u,i,o){var f=n[r],a=t[r],c=o.get(a);if(c)return void hr(n,r,c);var l=i?i(f,a,r+"",n,t,o):Y,s=l===Y;s&&(l=a,Vl(a)||bf(a)?Vl(f)?l=f:Zo(f)?l=Ke(f):(s=!1,l=kr(a,!0)):vf(a)||No(a)?No(f)?l=Ef(f):!ef(f)||e&&nf(f)?(s=!1,l=kr(a,!0)):l=f:s=!1),o.set(a,l),s&&u(l,a,e,i,o),o["delete"](a),hr(n,r,l)}function ae(n,t,r){var e=-1;t=s(t.length?t:[$a],wu());var u=ee(n,function(n,r,u){var i=s(t,function(t){return t(n)});return{criteria:i,index:++e,value:n}});return j(u,function(n,t){return B(n,t,r)})}function ce(n,t){return n=Object(n),p(t,function(t,r){return r in n&&(t[r]=n[r]),t},{})}function le(n,t){for(var r=-1,e=mu(n),u=e.length,i={};++r<u;){var o=e[r],f=n[o];t(f,o)&&(i[o]=f)}return i}function se(n){return function(t){return null==t?Y:t[n]}}function he(n){return function(t){return qr(t,n)}}function pe(n,t,r,e){var u=e?b:m,i=-1,o=t.length,f=n;for(r&&(f=s(n,I(r)));++i<o;)for(var a=0,c=t[i],l=r?r(c):c;(a=u(f,l,a,e))>-1;)f!==n&&Rc.call(f,a,1),Rc.call(n,a,1);return n}function ve(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(e==r||u!=i){var i=u;if(P(u))Rc.call(n,u,1);else if(Uu(u,n))delete n[u];else{var o=Le(u),f=Zu(n,o);null!=f&&delete f[vi(o)]}}}return n}function _e(n,t){return n+Ec(Fc()*(t-n+1))}function ge(n,t,r,e){for(var u=-1,i=zc(Wc((t-n)/(r||1)),0),o=Array(i);i--;)o[e?i:++u]=n,n+=r;return o}function ye(n,t){var r="";if(!n||1>t||t>jn)return r;do t%2&&(r+=n),t=Ec(t/2),t&&(n+=n);while(t);return r}function de(n,t,r,e){t=Uu(t,n)?[t]:Le(t);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var a=t[u];if(ef(f)){var c=r;if(u!=o){var l=f[a];c=e?e(l,a,f):Y,c===Y&&(c=null==l?P(t[u+1])?[]:{}:l)}pr(f,a,c)}f=f[a]}return n}function me(n,t,r){var e=-1,u=n.length;0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(u);++e<u;)i[e]=n[e+t];return i}function be(n,t){var r;return el(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function we(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Rn>=u){for(;u>e;){var i=e+u>>>1,o=n[i];(r?t>=o:t>o)&&null!==o?e=i+1:u=i}return u}return xe(n,t,$a,r)}function xe(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,f=null===t,a=t===Y;i>u;){var c=Ec((u+i)/2),l=r(n[c]),s=l!==Y,h=l===l;if(o)var p=h||e;else p=f?h&&s&&(e||null!=l):a?h&&(e||s):null==l?!1:e?t>=l:t>l;p?u=c+1:i=c}return $c(i,In)}function je(n){return Ae(n)}function Ae(n,t){for(var r=0,e=n.length,u=n[0],i=t?t(u):u,o=i,f=1,a=[u];++r<e;)u=n[r],i=t?t(u):u,Mo(i,o)||(o=i,a[f++]=u);return a}function Oe(n,t,r){var e=-1,u=c,i=n.length,o=!0,f=[],a=f;if(r)o=!1,u=l;else if(i>=Q){var s=t?null:al(n);if(s)return Z(s);o=!1,u=Qt,a=new Ht}else a=t?[]:f;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(o&&p===p){for(var v=a.length;v--;)if(a[v]===p)continue n;t&&a.push(p),f.push(h)}else u(a,p,r)||(a!==f&&a.push(p),f.push(h))}return f}function ke(n,t){t=Uu(t,n)?[t]:Le(t),n=Zu(n,t);var r=vi(t);return null!=n&&qf(n,r)?delete n[r]:!0}function Ie(n,t,r,e){return de(n,t,r(qr(n,t)),e)}function Re(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?me(n,e?0:i,e?i+1:u):me(n,e?i+1:0,e?u:i)}function We(n,t){var r=n;return r instanceof $t&&(r=r.value()),p(t,function(n,t){return t.func.apply(t.thisArg,h([n],t.args))},r)}function Ee(n,t,r){for(var e=-1,u=n.length;++e<u;)var i=i?h(Br(i,n[e],t,r),Br(n[e],i,t,r)):n[e];return i&&i.length?Oe(i,t,r):[]}function Se(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){var f=i>e?t[e]:Y;r(o,n[e],f)}return o}function Ce(n){return Zo(n)?n:[]}function Be(n){return"function"==typeof n?n:$a}function Le(n){return Vl(n)?n:pl(n)}function ze(n,t,r){var e=n.length;return r=r===Y?e:r,!t&&r>=e?n:me(n,t,r)}function $e(n,t){if(t)return n.slice();var r=new n.constructor(n.length);return n.copy(r),r}function Ue(n){var t=new n.constructor(n.byteLength);return new bc(t).set(new bc(n)),t}function Fe(n,t){var r=t?Ue(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function Me(t,r,e){var u=r?e(q(t),!0):q(t);return p(u,n,new t.constructor)}function De(n){var t=new n.constructor(n.source,At.exec(n));return t.lastIndex=n.lastIndex,t}function Pe(n,r,e){var u=r?e(Z(n),!0):Z(n);return p(u,t,new n.constructor)}function Ne(n){return tl?Object(tl.call(n)):{}}function qe(n,t){var r=t?Ue(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function Te(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,a=t.length,c=zc(i-o,0),l=Array(a+c),s=!e;++f<a;)l[f]=t[f];for(;++u<o;)(s||i>u)&&(l[r[u]]=n[u]);for(;c--;)l[f++]=n[u++];return l}function Ze(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,a=-1,c=t.length,l=zc(i-f,0),s=Array(l+c),h=!e;++u<l;)s[u]=n[u];for(var p=u;++a<c;)s[p+a]=t[a];for(;++o<f;)(h||i>u)&&(s[p+r[o]]=n[u++]);return s}function Ke(n,t){var r=-1,e=n.length;for(t||(t=Array(e));++r<e;)t[r]=n[r];return t}function Ve(n,t,r){return Ge(n,t,r)}function Ge(n,t,r,e){r||(r={});for(var u=-1,i=t.length;++u<i;){var o=t[u],f=e?e(r[o],n[o],o,r,n):n[o];pr(r,o,f)}return r}function Je(n,t){return Ve(n,ku(n),t)}function Ye(n,t){return function(r,u){var i=Vl(r)?e:_r,o=t?t():{};return i(r,n,wu(u),o)}}function He(n){return Wo(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:Y,o=u>2?r[2]:Y;for(i="function"==typeof i?(u--,i):Y,o&&$u(r[0],r[1],o)&&(i=3>u?Y:i,u=1),t=Object(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Qe(n,t){return function(r,e){if(null==r)return r;if(!To(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Object(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function Xe(n){return function(t,r,e){for(var u=-1,i=Object(t),o=e(t),f=o.length;f--;){var a=o[n?f:++u];if(r(i[a],a,i)===!1)break}return t}}function nu(n,t,r){function e(){var t=this&&this!==Ur&&this instanceof e?i:n;return t.apply(u?r:this,arguments)}var u=t&rn,i=eu(n);return e}function tu(n){return function(t){t=Cf(t);var r=yr.test(t)?V(t):Y,e=r?r[0]:t.charAt(0),u=r?ze(r,1).join(""):t.slice(1);return e[n]()+u}}function ru(n){return function(t){return p(Ca(ha(t)),n,"")}}function eu(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Er(n.prototype),e=n.apply(r,t);return ef(e)?e:r}}function uu(n,t,e){function u(){for(var o=arguments.length,f=Array(o),a=o,c=Au(u);a--;)f[a]=arguments[a];var l=3>o&&f[0]!==c&&f[o-1]!==c?[]:T(f,c);if(o-=l.length,e>o)return hu(n,t,ou,u.placeholder,Y,f,l,Y,Y,e-o);var s=this&&this!==Ur&&this instanceof u?i:n;return r(s,this,f)}var i=eu(n);return u}function iu(n){return Wo(function(t){t=Mr(t,1);var r=t.length,e=r,u=zt.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new fc(X);if(u&&!o&&"wrapper"==bu(i))var o=new zt([],!0)}for(e=o?e:r;++e<r;){i=t[e];var f=bu(i),a="wrapper"==f?cl(i):Y;o=a&&Mu(a[0])&&a[1]==(ln|on|an|sn)&&!a[4].length&&1==a[9]?o[bu(a[0])].apply(o,a[3]):1==i.length&&Mu(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&Vl(e)&&e.length>=Q)return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function ou(n,t,r,e,u,i,o,f,a,c){function l(){for(var y=arguments.length,d=y,m=Array(y);d--;)m[d]=arguments[d];if(v)var b=Au(l),w=L(m,b);if(e&&(m=Te(m,e,u,v)),i&&(m=Ze(m,i,o,v)),y-=w,v&&c>y){var x=T(m,b);return hu(n,t,ou,l.placeholder,r,m,x,f,a,c-y)}var j=h?r:this,A=p?j[n]:n;return y=m.length,f?m=Ku(m,f):_&&y>1&&m.reverse(),s&&y>a&&(m.length=a),this&&this!==Ur&&this instanceof l&&(A=g||eu(A)),A.apply(j,m)}var s=t&ln,h=t&rn,p=t&en,v=t&(on|fn),_=t&hn,g=p?Y:eu(n);return l}function fu(n,t){return function(r,e){return Jr(r,n,t(e),{})}}function au(n){return Wo(function(t){return t=s(Mr(t,1,zu),wu()),Wo(function(e){var u=this;return n(t,function(n){return r(n,u,e)})})})}function cu(n,t){t=t===Y?" ":t+"";var r=t.length;if(2>r)return r?ye(t,n):t;var e=ye(t,Wc(n/K(t)));return yr.test(t)?ze(V(e),0,n).join(""):e.slice(0,n)}function lu(n,t,e,u){function i(){for(var t=-1,a=arguments.length,c=-1,l=u.length,s=Array(l+a),h=this&&this!==Ur&&this instanceof i?f:n;++c<l;)s[c]=u[c];for(;a--;)s[c++]=arguments[++t];return r(h,o?e:this,s)}var o=t&rn,f=eu(n);return i}function su(n){return function(t,r,e){return e&&"number"!=typeof e&&$u(t,r,e)&&(r=e=Y),t=Wf(t),t=t===t?t:0,r===Y?(r=t,t=0):r=Wf(r)||0,e=e===Y?r>t?1:-1:Wf(e)||0,ge(t,r,e,n)}}function hu(n,t,r,e,u,i,o,f,a,c){var l=t&on,s=f?Ke(f):Y,h=l?o:Y,p=l?Y:o,v=l?i:Y,_=l?Y:i;t|=l?an:cn,t&=~(l?cn:an),t&un||(t&=~(rn|en));var g=[n,t,u,v,h,_,p,s,a,c],y=r.apply(Y,g);return Mu(n)&&hl(y,g),y.placeholder=e,y}function pu(n){var t=ic[n];return function(n,r){if(n=Wf(n),r=If(r)){var e=(Cf(n)+"e").split("e"),u=t(e[0]+"e"+(+e[1]+r));return e=(Cf(u)+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return t(n)}}function vu(n,t,r,e,u,i,o,f){var a=t&en;if(!a&&"function"!=typeof n)throw new fc(X);var c=e?e.length:0;if(c||(t&=~(an|cn),e=u=Y),o=o===Y?o:zc(If(o),0),f=f===Y?f:If(f),c-=u?u.length:0,t&cn){var l=e,s=u;e=u=Y}var h=a?Y:cl(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&qu(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=null==p[9]?a?0:n.length:zc(p[9]-c,0),!f&&t&(on|fn)&&(t&=~(on|fn)),t&&t!=rn)v=t==on||t==fn?uu(n,t,f):t!=an&&t!=(rn|an)||u.length?ou.apply(Y,p):lu(n,t,r,e);else var v=nu(n,t,r);var _=h?fl:hl;return _(v,p)}function _u(n,t,r,e,u,i){var o=-1,f=u&vn,a=u&pn,c=n.length,l=t.length;if(c!=l&&!(f&&l>c))return!1;var s=i.get(n);if(s)return s==t;var h=!0;for(i.set(n,t);++o<c;){var p=n[o],v=t[o];if(e)var g=f?e(v,p,o,t,n,i):e(p,v,o,n,t,i);if(g!==Y){if(g)continue;h=!1;break}if(a){if(!_(t,function(n){return p===n||r(p,n,e,u,i)})){h=!1;break}}else if(p!==v&&!r(p,v,e,u,i)){h=!1;break}}return i["delete"](n),h}function gu(n,t,r,e,u,i,o){switch(r){case Vn:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Kn:return n.byteLength==t.byteLength&&e(new bc(n),new bc(t))?!0:!1;case Sn:case Cn:return+n==+t;case Bn:return n.name==t.name&&n.message==t.message;case Un:return n!=+n?t!=+t:n==+t;case Dn:case Nn:return n==t+"";case $n:var f=q;case Pn:var a=i&vn;if(f||(f=Z),n.size!=t.size&&!a)return!1;var c=o.get(n);return c?c==t:(i|=pn,o.set(n,t),_u(f(n),f(t),e,u,i,o));case qn:if(tl)return tl.call(n)==tl.call(t)}return!1}function yu(n,t,r,e,u,i){var o=u&vn,f=Zf(n),a=f.length,c=Zf(t),l=c.length;if(a!=l&&!o)return!1;for(var s=a;s--;){var h=f[s];if(!(o?h in t:Zr(t,h)))return!1}var p=i.get(n);if(p)return p==t;var v=!0;i.set(n,t);for(var _=o;++s<a;){h=f[s];var g=n[h],y=t[h];if(e)var d=o?e(y,g,h,t,n,i):e(g,y,h,n,t,i);if(!(d===Y?g===y||r(g,y,e,u,i):d)){v=!1;break}_||(_="constructor"==h)}if(v&&!_){var m=n.constructor,b=t.constructor;m!=b&&"constructor"in n&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(v=!1)}return i["delete"](n),v}function du(n){return Tr(n,Zf,ku)}function mu(n){return Tr(n,Kf,sl)}function bu(n){for(var t=n.name+"",r=Gc[t],e=sc.call(Gc,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function wu(){var n=Et.iteratee||Ua;return n=n===Ua?ne:n,arguments.length?n(arguments[0],arguments[1]):n}function xu(n){for(var t=na(n),r=t.length;r--;)t[r][2]=Pu(t[r][1]);return t}function ju(n,t){var r=n[t];return lf(r)?r:Y}function Au(n){var t=sc.call(Et,"placeholder")?Et:n;return t.placeholder}function Ou(n){return Sc(Object(n))}function ku(n){return jc(Object(n))}function Iu(n){return vc.call(n)}function Ru(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=$c(t,n+o);break;case"takeRight":n=zc(n,t-o)}}return{start:n,end:t}}function Wu(n,t,r){t=Uu(t,n)?[t]:Le(t);for(var e,u=-1,i=t.length;++u<i;){var o=t[u];if(!(e=null!=n&&r(n,o)))break;n=n[o]}if(e)return e;var i=n?n.length:0;return!!i&&rf(i)&&P(o,i)&&(Vl(n)||df(n)||No(n))}function Eu(n){var t=n.length,r=n.constructor(t);return t&&"string"==typeof n[0]&&sc.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Su(n){return"function"!=typeof n.constructor||Du(n)?{}:Er(Ou(n))}function Cu(n,t,r,e){var u=n.constructor;switch(t){case Kn:return Ue(n);case Sn:case Cn:return new u(+n);case Vn:return Fe(n,e);case Gn:case Jn:case Yn:case Hn:case Qn:case Xn:case nt:case tt:case rt:return qe(n,e);case $n:return Me(n,e,r);case Un:case Nn:return new u(n);case Dn:return De(n);case Pn:return Pe(n,e,r);case qn:return Ne(n)}}function Bu(n){var t=n?n.length:Y;return rf(t)&&(Vl(n)||df(n)||No(n))?O(t,String):null}function Lu(n){return Zo(n)&&(Vl(n)||No(n))}function zu(n){return Vl(n)&&!(2==n.length&&!nf(n[0]))}function $u(n,t,r){if(!ef(r))return!1;var e=typeof t;return("number"==e?To(r)&&P(t,r.length):"string"==e&&t in r)?Mo(r[t],n):!1}function Uu(n,t){var r=typeof n;return"number"==r||"symbol"==r?!0:!Vl(n)&&(mf(n)||vt.test(n)||!pt.test(n)||null!=t&&n in Object(t))}function Fu(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=n||null==n}function Mu(n){var t=bu(n),r=Et[t];if("function"!=typeof r||!(t in $t.prototype))return!1;if(n===r)return!0;var e=cl(r);return!!e&&n===e[0]}function Du(n){var t=n&&n.constructor,r="function"==typeof t&&t.prototype||cc;return n===r}function Pu(n){return n===n&&!ef(n)}function Nu(n,t){return function(r){return null==r?!1:r[n]===t&&(t!==Y||n in Object(r))}}function qu(n,t){var r=n[1],e=t[1],u=r|e,i=(rn|en|ln)>u,o=e==ln&&r==on||e==ln&&r==sn&&n[7].length<=t[8]||e==(ln|sn)&&t[7].length<=t[8]&&r==on;if(!i&&!o)return n;e&rn&&(n[2]=t[2],u|=r&rn?0:un);var f=t[3];if(f){var a=n[3];n[3]=a?Te(a,f,t[4]):Ke(f),n[4]=a?T(n[3],tn):Ke(t[4])}return f=t[5],f&&(a=n[5],n[5]=a?Ze(a,f,t[6]):Ke(f),n[6]=a?T(n[5],tn):Ke(t[6])),f=t[7],f&&(n[7]=Ke(f)),e&ln&&(n[8]=null==n[8]?t[8]:$c(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Tu(n,t,r,e,u,i){return ef(n)&&ef(t)&&oe(n,t,Y,Tu,i.set(t,n)),n}function Zu(n,t){return 1==t.length?n:qr(n,me(t,0,-1))}function Ku(n,t){for(var r=n.length,e=$c(t.length,r),u=Ke(n);e--;){var i=t[e];n[e]=P(i,r)?u[i]:Y}return n}function Vu(n){return"string"==typeof n||mf(n)?n:n+""}function Gu(n){if(null!=n){try{return lc.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function Ju(n){if(n instanceof $t)return n.clone();var t=new zt(n.__wrapped__,n.__chain__);return t.__actions__=Ke(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Yu(n,t,r){t=(r?$u(n,t,r):t===Y)?1:zc(If(t),0);var e=n?n.length:0;if(!e||1>t)return[];for(var u=0,i=0,o=Array(Wc(e/t));e>u;)o[i++]=me(n,u,u+=t);return o}function Hu(n){for(var t=-1,r=n?n.length:0,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function Qu(){var n=arguments.length,t=Lo(arguments[0]);if(2>n)return n?Ke(t):[];for(var r=Array(n-1);n--;)r[n-1]=arguments[n];return u(t,Mr(r,1))}function Xu(n,t,r){var e=n?n.length:0;return e?(t=r||t===Y?1:If(t),me(n,0>t?0:t,e)):[]}function ni(n,t,r){var e=n?n.length:0;return e?(t=r||t===Y?1:If(t),t=e-t,me(n,0,0>t?0:t)):[]}function ti(n,t){return n&&n.length?Re(n,wu(t,3),!0,!0):[]}function ri(n,t){return n&&n.length?Re(n,wu(t,3),!0):[]}function ei(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&$u(n,t,r)&&(r=0,e=u),zr(n,t,r,e)):[]}function ui(n,t){return n&&n.length?d(n,wu(t,3)):-1}function ii(n,t){return n&&n.length?d(n,wu(t,3),!0):-1}function oi(n){var t=n?n.length:0;return t?Mr(n,1):[]}function fi(n){var t=n?n.length:0;return t?Mr(n,xn):[]}function ai(n,t){var r=n?n.length:0;return r?(t=t===Y?1:If(t),Mr(n,t)):[]}function ci(n){for(var t=-1,r=n?n.length:0,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function li(n){return n?n[0]:Y}function si(n,t,r){var e=n?n.length:0;return e?(r=If(r),0>r&&(r=zc(e+r,0)),m(n,t,r)):-1}function hi(n){return ni(n,1)}function pi(n,t){return n?Bc.call(n,t):""}function vi(n){var t=n?n.length:0;return t?n[t-1]:Y}function _i(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(r!==Y&&(u=If(r),u=(0>u?zc(e+u,0):$c(u,e-1))+1),t!==t)return M(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function gi(n,t){return n&&n.length&&t&&t.length?pe(n,t):n}function yi(n,t,r){return n&&n.length&&t&&t.length?pe(n,t,wu(r)):n}function di(n,t,r){return n&&n.length&&t&&t.length?pe(n,t,Y,r):n}function mi(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=wu(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return ve(n,u),r}function bi(n){return n?Mc.call(n):n}function wi(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&$u(n,t,r)?(t=0,r=e):(t=null==t?0:If(t),r=r===Y?e:If(r)),me(n,t,r)):[]}function xi(n,t){return we(n,t)}function ji(n,t,r){return xe(n,t,wu(r))}function Ai(n,t){var r=n?n.length:0;if(r){var e=we(n,t);if(r>e&&Mo(n[e],t))return e}return-1}function Oi(n,t){return we(n,t,!0)}function ki(n,t,r){return xe(n,t,wu(r),!0)}function Ii(n,t){var r=n?n.length:0;if(r){var e=we(n,t,!0)-1;if(Mo(n[e],t))return e}return-1}function Ri(n){return n&&n.length?je(n):[]}function Wi(n,t){return n&&n.length?Ae(n,wu(t)):[]}function Ei(n){return Xu(n,1)}function Si(n,t,r){return n&&n.length?(t=r||t===Y?1:If(t),me(n,0,0>t?0:t)):[]}function Ci(n,t,r){var e=n?n.length:0;return e?(t=r||t===Y?1:If(t),t=e-t,me(n,0>t?0:t,e)):[]}function Bi(n,t){return n&&n.length?Re(n,wu(t,3),!1,!0):[]}function Li(n,t){return n&&n.length?Re(n,wu(t,3)):[]}function zi(n){return n&&n.length?Oe(n):[]}function $i(n,t){return n&&n.length?Oe(n,wu(t)):[]}function Ui(n,t){return n&&n.length?Oe(n,Y,t):[]}function Fi(n){if(!n||!n.length)return[];var t=0;return n=a(n,function(n){return Zo(n)?(t=zc(n.length,t),!0):void 0}),O(t,function(t){return s(n,se(t))})}function Mi(n,t){if(!n||!n.length)return[];var e=Fi(n);return null==t?e:s(e,function(n){return r(t,Y,n)})}function Di(n,t){return Se(n||[],t||[],pr)}function Pi(n,t){return Se(n||[],t||[],de)}function Ni(n){var t=Et(n);return t.__chain__=!0,t}function qi(n,t){return t(n),n}function Ti(n,t){return t(n)}function Zi(){return Ni(this)}function Ki(){return new zt(this.value(),this.__chain__)}function Vi(){this.__values__===Y&&(this.__values__=kf(this.value()));var n=this.__index__>=this.__values__.length,t=n?Y:this.__values__[this.__index__++];return{done:n,value:t}}function Gi(){return this}function Ji(n){for(var t,r=this;r instanceof Lt;){var e=Ju(r);e.__index__=0,e.__values__=Y,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Yi(){var n=this.__wrapped__;if(n instanceof $t){var t=n;return this.__actions__.length&&(t=new $t(this)),t=t.reverse(),t.__actions__.push({func:Ti,args:[bi],thisArg:Y}),new zt(t,this.__chain__)}return this.thru(bi)}function Hi(){return We(this.__wrapped__,this.__actions__)}function Qi(n,t,r){var e=Vl(n)?f:Lr;return r&&$u(n,t,r)&&(t=Y),e(n,wu(t,3))}function Xi(n,t){var r=Vl(n)?a:$r;return r(n,wu(t,3))}function no(n,t){if(t=wu(t,3),Vl(n)){var r=d(n,t);return r>-1?n[r]:Y}return y(n,t,el)}function to(n,t){if(t=wu(t,3),Vl(n)){var r=d(n,t,!0);return r>-1?n[r]:Y}return y(n,t,ul)}function ro(n,t){return Mr(ao(n,t),1)}function eo(n,t){return Mr(ao(n,t),xn)}function uo(n,t,r){return r=r===Y?1:If(r),Mr(ao(n,t),r)}function io(n,t){return"function"==typeof t&&Vl(n)?i(n,t):el(n,wu(t))}function oo(n,t){return"function"==typeof t&&Vl(n)?o(n,t):ul(n,wu(t))}function fo(n,t,r,e){n=To(n)?n:oa(n),r=r&&!e?If(r):0;var u=n.length;return 0>r&&(r=zc(u+r,0)),df(n)?u>=r&&n.indexOf(t,r)>-1:!!u&&m(n,t,r)>-1}function ao(n,t){var r=Vl(n)?s:ee;return r(n,wu(t,3))}function co(n,t,r,e){return null==n?[]:(Vl(t)||(t=null==t?[]:[t]),r=e?Y:r,Vl(r)||(r=null==r?[]:[r]),ae(n,t,r))}function lo(n,t,r){var e=Vl(n)?p:x,u=arguments.length<3;return e(n,wu(t,4),r,u,el)}function so(n,t,r){var e=Vl(n)?v:x,u=arguments.length<3;return e(n,wu(t,4),r,u,ul)}function ho(n,t){var r=Vl(n)?a:$r;return t=wu(t,3),r(n,function(n,r,e){return!t(n,r,e)})}function po(n){var t=To(n)?n:oa(n),r=t.length;return r>0?t[_e(0,r-1)]:Y}function vo(n,t,r){var e=-1,u=kf(n),i=u.length,o=i-1;for(t=(r?$u(n,t,r):t===Y)?1:Or(If(t),0,i);++e<t;){var f=_e(e,o),a=u[f];u[f]=u[e],u[e]=a}return u.length=t,u}function _o(n){return vo(n,kn)}function go(n){if(null==n)return 0;if(To(n)){var t=n.length;return t&&df(n)?K(n):t}if(uf(n)){
var r=Iu(n);if(r==$n||r==Pn)return n.size}return Zf(n).length}function yo(n,t,r){var e=Vl(n)?_:be;return r&&$u(n,t,r)&&(t=Y),e(n,wu(t,3))}function mo(n,t){if("function"!=typeof t)throw new fc(X);return n=If(n),function(){return--n<1?t.apply(this,arguments):void 0}}function bo(n,t,r){return t=r?Y:t,t=n&&null==t?n.length:t,vu(n,ln,Y,Y,Y,Y,t)}function wo(n,t){var r;if("function"!=typeof t)throw new fc(X);return n=If(n),function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=Y),r}}function xo(n,t,r){t=r?Y:t;var e=vu(n,on,Y,Y,Y,Y,Y,t);return e.placeholder=xo.placeholder,e}function jo(n,t,r){t=r?Y:t;var e=vu(n,fn,Y,Y,Y,Y,Y,t);return e.placeholder=jo.placeholder,e}function Ao(n,t,r){function e(t){var r=h,e=p;return h=p=Y,y=t,v=n.apply(e,r)}function u(n){return y=n,_=Ic(f,t),d?e(n):v}function i(n){var r=n-g,e=n-y,u=t-r;return m===!1?u:$c(u,m-e)}function o(n){var r=n-g,e=n-y;return!g||r>=t||0>r||m!==!1&&e>=m}function f(){var n=Fl();return o(n)?a(n):void(_=Ic(f,i(n)))}function a(n){return wc(_),_=Y,b&&h?e(n):(h=p=Y,v)}function c(){_!==Y&&wc(_),g=y=0,h=p=_=Y}function l(){return _===Y?v:a(Fl())}function s(){var n=Fl(),r=o(n);return h=arguments,p=this,g=n,r?_===Y?u(g):(wc(_),_=Ic(f,t),e(g)):(_===Y&&(_=Ic(f,t)),v)}var h,p,v,_,g=0,y=0,d=!1,m=!1,b=!0;if("function"!=typeof n)throw new fc(X);return t=Wf(t)||0,ef(r)&&(d=!!r.leading,m="maxWait"in r&&zc(Wf(r.maxWait)||0,t),b="trailing"in r?!!r.trailing:b),s.cancel=c,s.flush=l,s}function Oo(n){return vu(n,hn)}function ko(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new fc(X);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o),o};return r.cache=new(ko.Cache||Zt),r}function Io(n){if("function"!=typeof n)throw new fc(X);return function(){return!n.apply(this,arguments)}}function Ro(n){return wo(2,n)}function Wo(n,t){if("function"!=typeof n)throw new fc(X);return t=zc(t===Y?n.length-1:If(t),0),function(){for(var e=arguments,u=-1,i=zc(e.length-t,0),o=Array(i);++u<i;)o[u]=e[t+u];switch(t){case 0:return n.call(this,o);case 1:return n.call(this,e[0],o);case 2:return n.call(this,e[0],e[1],o)}var f=Array(t+1);for(u=-1;++u<t;)f[u]=e[u];return f[t]=o,r(n,this,f)}}function Eo(n,t){if("function"!=typeof n)throw new fc(X);return t=t===Y?0:zc(If(t),0),Wo(function(e){var u=e[t],i=ze(e,0,t);return u&&h(i,u),r(n,this,i)})}function So(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new fc(X);return ef(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Ao(n,t,{leading:e,maxWait:t,trailing:u})}function Co(n){return bo(n,1)}function Bo(n,t){return t=null==t?$a:t,Tl(t,n)}function Lo(){if(!arguments.length)return[];var n=arguments[0];return Vl(n)?n:[n]}function zo(n){return kr(n,!1,!0)}function $o(n,t){return kr(n,!1,!0,t)}function Uo(n){return kr(n,!0,!0)}function Fo(n,t){return kr(n,!0,!0,t)}function Mo(n,t){return n===t||n!==n&&t!==t}function Do(n,t){return n>t}function Po(n,t){return n>=t}function No(n){return Zo(n)&&sc.call(n,"callee")&&(!kc.call(n,"callee")||vc.call(n)==Wn)}function qo(n){return uf(n)&&vc.call(n)==Kn}function To(n){return null!=n&&rf(ll(n))&&!nf(n)}function Zo(n){return uf(n)&&To(n)}function Ko(n){return n===!0||n===!1||uf(n)&&vc.call(n)==Sn}function Vo(n){return uf(n)&&vc.call(n)==Cn}function Go(n){return!!n&&1===n.nodeType&&uf(n)&&!vf(n)}function Jo(n){if(To(n)&&(Vl(n)||df(n)||nf(n.splice)||No(n)||Gl(n)))return!n.length;if(uf(n)){var t=Iu(n);if(t==$n||t==Pn)return!n.size}for(var r in n)if(sc.call(n,r))return!1;return!(Vc&&Zf(n).length)}function Yo(n,t){return Hr(n,t)}function Ho(n,t,r){r="function"==typeof r?r:Y;var e=r?r(n,t):Y;return e===Y?Hr(n,t,r):!!e}function Qo(n){return uf(n)?vc.call(n)==Bn||"string"==typeof n.message&&"string"==typeof n.name:!1}function Xo(n){return"number"==typeof n&&Cc(n)}function nf(n){var t=ef(n)?vc.call(n):"";return t==Ln||t==zn}function tf(n){return"number"==typeof n&&n==If(n)}function rf(n){return"number"==typeof n&&n>-1&&n%1==0&&jn>=n}function ef(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function uf(n){return!!n&&"object"==typeof n}function of(n){return uf(n)&&Iu(n)==$n}function ff(n,t){return n===t||Xr(n,t,xu(t))}function af(n,t,r){return r="function"==typeof r?r:Y,Xr(n,t,xu(t),r)}function cf(n){return pf(n)&&n!=+n}function lf(n){if(!ef(n))return!1;var t=nf(n)||D(n)?gc:Rt;return t.test(Gu(n))}function sf(n){return null===n}function hf(n){return null==n}function pf(n){return"number"==typeof n||uf(n)&&vc.call(n)==Un}function vf(n){if(!uf(n)||vc.call(n)!=Fn||D(n))return!1;var t=Ou(n);if(null===t)return!0;var r=sc.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lc.call(r)==pc}function _f(n){return ef(n)&&vc.call(n)==Dn}function gf(n){return tf(n)&&n>=-jn&&jn>=n}function yf(n){return uf(n)&&Iu(n)==Pn}function df(n){return"string"==typeof n||!Vl(n)&&uf(n)&&vc.call(n)==Nn}function mf(n){return"symbol"==typeof n||uf(n)&&vc.call(n)==qn}function bf(n){return uf(n)&&rf(n.length)&&!!wr[vc.call(n)]}function wf(n){return n===Y}function xf(n){return uf(n)&&Iu(n)==Tn}function jf(n){return uf(n)&&vc.call(n)==Zn}function Af(n,t){return t>n}function Of(n,t){return t>=n}function kf(n){if(!n)return[];if(To(n))return df(n)?V(n):Ke(n);if(Ac&&n[Ac])return N(n[Ac]());var t=Iu(n),r=t==$n?q:t==Pn?Z:oa;return r(n)}function If(n){if(!n)return 0===n?n:0;if(n=Wf(n),n===xn||n===-xn){var t=0>n?-1:1;return t*An}var r=n%1;return n===n?r?n-r:n:0}function Rf(n){return n?Or(If(n),0,kn):0}function Wf(n){if("number"==typeof n)return n;if(mf(n))return On;if(ef(n)){var t=nf(n.valueOf)?n.valueOf():n;n=ef(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(dt,"");var r=It.test(n);return r||Wt.test(n)?Wr(n.slice(2),r?2:8):kt.test(n)?On:+n}function Ef(n){return Ve(n,Kf(n))}function Sf(n){return Or(If(n),-jn,jn)}function Cf(n){if("string"==typeof n)return n;if(null==n)return"";if(mf(n))return rl?rl.call(n):"";var t=n+"";return"0"==t&&1/n==-xn?"-0":t}function Bf(n,t){var r=Er(n);return t?jr(r,t):r}function Lf(n,t){return y(n,wu(t,3),Dr,!0)}function zf(n,t){return y(n,wu(t,3),Pr,!0)}function $f(n,t){return null==n?n:il(n,wu(t),Kf)}function Uf(n,t){return null==n?n:ol(n,wu(t),Kf)}function Ff(n,t){return n&&Dr(n,wu(t))}function Mf(n,t){return n&&Pr(n,wu(t))}function Df(n){return null==n?[]:Nr(n,Zf(n))}function Pf(n){return null==n?[]:Nr(n,Kf(n))}function Nf(n,t,r){var e=null==n?Y:qr(n,t);return e===Y?r:e}function qf(n,t){return null!=n&&Wu(n,t,Zr)}function Tf(n,t){return null!=n&&Wu(n,t,Kr)}function Zf(n){var t=Du(n);if(!t&&!To(n))return te(n);var r=Bu(n),e=!!r,u=r||[],i=u.length;for(var o in n)!Zr(n,o)||e&&("length"==o||P(o,i))||t&&"constructor"==o||u.push(o);return u}function Kf(n){for(var t=-1,r=Du(n),e=re(n),u=e.length,i=Bu(n),o=!!i,f=i||[],a=f.length;++t<u;){var c=e[t];o&&("length"==c||P(c,a))||"constructor"==c&&(r||!sc.call(n,c))||f.push(c)}return f}function Vf(n,t){var r={};return t=wu(t,3),Dr(n,function(n,e,u){r[t(n,e,u)]=n}),r}function Gf(n,t){var r={};return t=wu(t,3),Dr(n,function(n,e,u){r[e]=t(n,e,u)}),r}function Jf(n,t){return t=wu(t),le(n,function(n,r){return!t(n,r)})}function Yf(n,t){return null==n?{}:le(n,wu(t))}function Hf(n,t,r){t=Uu(t,n)?[t]:Le(t);var e=-1,u=t.length;for(u||(n=Y,u=1);++e<u;){var i=null==n?Y:n[t[e]];i===Y&&(e=u,i=r),n=nf(i)?i.call(n):i}return n}function Qf(n,t,r){return null==n?n:de(n,t,r)}function Xf(n,t,r,e){return e="function"==typeof e?e:Y,null==n?n:de(n,t,r,e)}function na(n){return k(n,Zf(n))}function ta(n){return k(n,Kf(n))}function ra(n,t,r){var e=Vl(n)||bf(n);if(t=wu(t,4),null==r)if(e||ef(n)){var u=n.constructor;r=e?Vl(n)?new u:[]:nf(u)?Er(Ou(n)):{}}else r={};return(e?i:Dr)(n,function(n,e,u){return t(r,n,e,u)}),r}function ea(n,t){return null==n?!0:ke(n,t)}function ua(n,t,r){return null==n?n:Ie(n,t,Be(r))}function ia(n,t,r,e){return e="function"==typeof e?e:Y,null==n?n:Ie(n,t,Be(r),e)}function oa(n){return n?R(n,Zf(n)):[]}function fa(n){return null==n?[]:R(n,Kf(n))}function aa(n,t,r){return r===Y&&(r=t,t=Y),r!==Y&&(r=Wf(r),r=r===r?r:0),t!==Y&&(t=Wf(t),t=t===t?t:0),Or(Wf(n),t,r)}function ca(n,t,r){return t=Wf(t)||0,r===Y?(r=t,t=0):r=Wf(r)||0,n=Wf(n),Vr(n,t,r)}function la(n,t,r){if(r&&"boolean"!=typeof r&&$u(n,t,r)&&(t=r=Y),r===Y&&("boolean"==typeof t?(r=t,t=Y):"boolean"==typeof n&&(r=n,n=Y)),n===Y&&t===Y?(n=0,t=1):(n=Wf(n)||0,t===Y?(t=n,n=0):t=Wf(t)||0),n>t){var e=n;n=t,t=e}if(r||n%1||t%1){var u=Fc();return $c(n+u*(t-n+Rr("1e-"+((u+"").length-1))),t)}return _e(n,t)}function sa(n){return gs(Cf(n).toLowerCase())}function ha(n){return n=Cf(n),n&&n.replace(St,$).replace(vr,"")}function pa(n,t,r){n=Cf(n),t="string"==typeof t?t:t+"";var e=n.length;return r=r===Y?e:Or(If(r),0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r}function va(n){return n=Cf(n),n&&ct.test(n)?n.replace(ft,U):n}function _a(n){return n=Cf(n),n&&yt.test(n)?n.replace(gt,"\\$&"):n}function ga(n,t,r){n=Cf(n),t=If(t);var e=t?K(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return cu(Ec(u),r)+n+cu(Wc(u),r)}function ya(n,t,r){n=Cf(n),t=If(t);var e=t?K(n):0;return t&&t>e?n+cu(t-e,r):n}function da(n,t,r){n=Cf(n),t=If(t);var e=t?K(n):0;return t&&t>e?cu(t-e,r)+n:n}function ma(n,t,r){return r||null==t?t=0:t&&(t=+t),n=Cf(n).replace(dt,""),Uc(n,t||(Ot.test(n)?16:10))}function ba(n,t,r){return t=(r?$u(n,t,r):t===Y)?1:If(t),ye(Cf(n),t)}function wa(){var n=arguments,t=Cf(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function xa(n,t,r){return r&&"number"!=typeof r&&$u(n,t,r)&&(t=r=Y),(r=r===Y?kn:r>>>0)?(n=Cf(n),n&&("string"==typeof t||null!=t&&!_f(t))&&(t+="",""==t&&yr.test(n))?ze(V(n),0,r):n.split(t,r)):[]}function ja(n,t,r){return n=Cf(n),r=Or(If(r),0,n.length),n.lastIndexOf(t,r)==r}function Aa(n,t,r){var e=Et.templateSettings;r&&$u(n,t,r)&&(t=Y),n=Cf(n),t=Hl({},t,e,sr);var u,i,o=Hl({},t.imports,e.imports,sr),f=Zf(o),a=R(o,f),c=0,l=t.interpolate||Ct,s="__p += '",h=oc((t.escape||Ct).source+"|"+l.source+"|"+(l===ht?jt:Ct).source+"|"+(t.evaluate||Ct).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++br+"]")+"\n";n.replace(h,function(t,r,e,o,f,a){return e||(e=o),s+=n.slice(c,a).replace(Bt,F),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=a+t.length,t}),s+="';\n";var v=t.variable;v||(s="with (obj) {\n"+s+"\n}\n"),s=(i?s.replace(et,""):s).replace(ut,"$1").replace(it,"$1;"),s="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var _=ys(function(){return Function(f,p+"return "+s).apply(Y,a)});if(_.source=s,Qo(_))throw _;return _}function Oa(n){return Cf(n).toLowerCase()}function ka(n){return Cf(n).toUpperCase()}function Ia(n,t,r){if(n=Cf(n),!n)return n;if(r||t===Y)return n.replace(dt,"");if(!(t+=""))return n;var e=V(n),u=V(t),i=W(e,u),o=E(e,u)+1;return ze(e,i,o).join("")}function Ra(n,t,r){if(n=Cf(n),!n)return n;if(r||t===Y)return n.replace(bt,"");if(!(t+=""))return n;var e=V(n),u=E(e,V(t))+1;return ze(e,0,u).join("")}function Wa(n,t,r){if(n=Cf(n),!n)return n;if(r||t===Y)return n.replace(mt,"");if(!(t+=""))return n;var e=V(n),u=W(e,V(t));return ze(e,u).join("")}function Ea(n,t){var r=_n,e=gn;if(ef(t)){var u="separator"in t?t.separator:u;r="length"in t?If(t.length):r,e="omission"in t?Cf(t.omission):e}n=Cf(n);var i=n.length;if(yr.test(n)){var o=V(n);i=o.length}if(r>=i)return n;var f=r-K(e);if(1>f)return e;var a=o?ze(o,0,f).join(""):n.slice(0,f);if(u===Y)return a+e;if(o&&(f+=a.length-f),_f(u)){if(n.slice(f).search(u)){var c,l=a;for(u.global||(u=oc(u.source,Cf(At.exec(u))+"g")),u.lastIndex=0;c=u.exec(l);)var s=c.index;a=a.slice(0,s===Y?f:s)}}else if(n.indexOf(u,f)!=f){var h=a.lastIndexOf(u);h>-1&&(a=a.slice(0,h))}return a+e}function Sa(n){return n=Cf(n),n&&at.test(n)?n.replace(ot,G):n}function Ca(n,t,r){return n=Cf(n),t=r?Y:t,t===Y&&(t=dr.test(n)?gr:wt),n.match(t)||[]}function Ba(n){var t=n?n.length:0,e=wu();return n=t?s(n,function(n){if("function"!=typeof n[1])throw new fc(X);return[e(n[0]),n[1]]}):[],Wo(function(e){for(var u=-1;++u<t;){var i=n[u];if(r(i[0],this,e))return r(i[1],this,e)}})}function La(n){return Ir(kr(n,!0))}function za(n){return function(){return n}}function $a(n){return n}function Ua(n){return ne("function"==typeof n?n:kr(n,!0))}function Fa(n){return ue(kr(n,!0))}function Ma(n,t){return ie(n,kr(t,!0))}function Da(n,t,r){var e=Zf(t),u=Nr(t,e);null!=r||ef(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=Nr(t,Zf(t)));var o=ef(r)&&"chain"in r?r.chain:!0,f=nf(n);return i(u,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__),u=r.__actions__=Ke(this.__actions__);return u.push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,h([this.value()],arguments))})}),n}function Pa(){return Ur._===this&&(Ur._=_c),this}function Na(){}function qa(n){return n=If(n),function(){return arguments[n]}}function Ta(n){return Uu(n)?se(n):he(n)}function Za(n){return function(t){return null==n?Y:qr(n,t)}}function Ka(n,t){if(n=If(n),1>n||n>jn)return[];var r=kn,e=$c(n,kn);t=wu(t),n-=kn;for(var u=O(e,t);++r<n;)t(r);return u}function Va(n){return Vl(n)?s(n,Vu):mf(n)?[n]:Ke(pl(n))}function Ga(n){var t=++hc;return Cf(n)+t}function Ja(n){return n&&n.length?g(n,$a,Do):Y}function Ya(n,t){return n&&n.length?g(n,wu(t),Do):Y}function Ha(n){return w(n,$a)}function Qa(n,t){return w(n,wu(t))}function Xa(n){return n&&n.length?g(n,$a,Af):Y}function nc(n,t){return n&&n.length?g(n,wu(t),Af):Y}function tc(n){return n&&n.length?A(n,$a):0}function rc(n,t){return n&&n.length?A(n,wu(t)):0}S=S?Fr.defaults({},S,Fr.pick(Ur,mr)):Ur;var ec=S.Date,uc=S.Error,ic=S.Math,oc=S.RegExp,fc=S.TypeError,ac=S.Array.prototype,cc=S.Object.prototype,lc=S.Function.prototype.toString,sc=cc.hasOwnProperty,hc=0,pc=lc.call(Object),vc=cc.toString,_c=Ur._,gc=oc("^"+lc.call(sc).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yc=Cr?S.Buffer:Y,dc=S.Reflect,mc=S.Symbol,bc=S.Uint8Array,wc=S.clearTimeout,xc=dc?dc.enumerate:Y,jc=Object.getOwnPropertySymbols,Ac="symbol"==typeof(Ac=mc&&mc.iterator)?Ac:Y,Oc=Object.create,kc=cc.propertyIsEnumerable,Ic=S.setTimeout,Rc=ac.splice,Wc=ic.ceil,Ec=ic.floor,Sc=Object.getPrototypeOf,Cc=S.isFinite,Bc=ac.join,Lc=Object.keys,zc=ic.max,$c=ic.min,Uc=S.parseInt,Fc=ic.random,Mc=ac.reverse,Dc=ju(S,"DataView"),Pc=ju(S,"Map"),Nc=ju(S,"Promise"),qc=ju(S,"Set"),Tc=ju(S,"WeakMap"),Zc=ju(Object,"create"),Kc=Tc&&new Tc,Vc=!kc.call({valueOf:1},"valueOf"),Gc={},Jc=Gu(Dc),Yc=Gu(Pc),Hc=Gu(Nc),Qc=Gu(qc),Xc=Gu(Tc),nl=mc?mc.prototype:Y,tl=nl?nl.valueOf:Y,rl=nl?nl.toString:Y;Et.templateSettings={escape:lt,evaluate:st,interpolate:ht,variable:"",imports:{_:Et}},Et.prototype=Lt.prototype,Et.prototype.constructor=Et,zt.prototype=Er(Lt.prototype),zt.prototype.constructor=zt,$t.prototype=Er(Lt.prototype),$t.prototype.constructor=$t,Dt.prototype=Zc?Zc(null):cc,Zt.prototype.clear=Kt,Zt.prototype["delete"]=Vt,Zt.prototype.get=Gt,Zt.prototype.has=Jt,Zt.prototype.set=Yt,Ht.prototype.push=Xt,nr.prototype.clear=tr,nr.prototype["delete"]=rr,nr.prototype.get=er,nr.prototype.has=ur,nr.prototype.set=ir;var el=Qe(Dr),ul=Qe(Pr,!0),il=Xe(),ol=Xe(!0);xc&&!kc.call({valueOf:1},"valueOf")&&(re=function(n){return N(xc(n))});var fl=Kc?function(n,t){return Kc.set(n,t),n}:$a,al=qc&&2===new qc([1,2]).size?function(n){return new qc(n)}:Na,cl=Kc?function(n){return Kc.get(n)}:Na,ll=se("length");jc||(ku=function(){return[]});var sl=jc?function(n){for(var t=[];n;)h(t,ku(n)),n=Ou(n);return t}:ku;(Dc&&Iu(new Dc(new ArrayBuffer(1)))!=Vn||Pc&&Iu(new Pc)!=$n||Nc&&Iu(Nc.resolve())!=Mn||qc&&Iu(new qc)!=Pn||Tc&&Iu(new Tc)!=Tn)&&(Iu=function(n){var t=vc.call(n),r=t==Fn?n.constructor:Y,e=r?Gu(r):Y;if(e)switch(e){case Jc:return Vn;case Yc:return $n;case Hc:return Mn;case Qc:return Pn;case Xc:return Tn}return t});var hl=function(){var n=0,t=0;return function(r,e){var u=Fl(),i=dn-(u-t);if(t=u,i>0){if(++n>=yn)return r}else n=0;return fl(r,e)}}(),pl=ko(function(n){var t=[];return Cf(n).replace(_t,function(n,r,e,u){t.push(e?u.replace(xt,"$1"):r||n)}),t}),vl=Wo(function(n,t){return Zo(n)?Br(n,Mr(t,1,Zo,!0)):[]}),_l=Wo(function(n,t){var r=vi(t);return Zo(r)&&(r=Y),Zo(n)?Br(n,Mr(t,1,Zo,!0),wu(r)):[]}),gl=Wo(function(n,t){var r=vi(t);return Zo(r)&&(r=Y),Zo(n)?Br(n,Mr(t,1,Zo,!0),Y,r):[]}),yl=Wo(function(n){var t=s(n,Ce);return t.length&&t[0]===n[0]?Gr(t):[]}),dl=Wo(function(n){var t=vi(n),r=s(n,Ce);return t===vi(r)?t=Y:r.pop(),r.length&&r[0]===n[0]?Gr(r,wu(t)):[]}),ml=Wo(function(n){var t=vi(n),r=s(n,Ce);return t===vi(r)?t=Y:r.pop(),r.length&&r[0]===n[0]?Gr(r,Y,t):[]}),bl=Wo(gi),wl=Wo(function(n,t){t=s(Mr(t,1),String);var r=Ar(n,t);return ve(n,t.sort(C)),r}),xl=Wo(function(n){return Oe(Mr(n,1,Zo,!0))}),jl=Wo(function(n){var t=vi(n);return Zo(t)&&(t=Y),Oe(Mr(n,1,Zo,!0),wu(t))}),Al=Wo(function(n){var t=vi(n);return Zo(t)&&(t=Y),Oe(Mr(n,1,Zo,!0),Y,t)}),Ol=Wo(function(n,t){return Zo(n)?Br(n,t):[]}),kl=Wo(function(n){return Ee(a(n,Zo))}),Il=Wo(function(n){var t=vi(n);return Zo(t)&&(t=Y),Ee(a(n,Zo),wu(t))}),Rl=Wo(function(n){var t=vi(n);return Zo(t)&&(t=Y),Ee(a(n,Zo),Y,t)}),Wl=Wo(Fi),El=Wo(function(n){var t=n.length,r=t>1?n[t-1]:Y;return r="function"==typeof r?(n.pop(),r):Y,Mi(n,r)}),Sl=Wo(function(n){n=Mr(n,1);var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Ar(t,n)};return!(t>1||this.__actions__.length)&&e instanceof $t&&P(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:Ti,args:[u],thisArg:Y}),new zt(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(Y),n})):this.thru(u)}),Cl=Ye(function(n,t,r){sc.call(n,r)?++n[r]:n[r]=1}),Bl=Ye(function(n,t,r){sc.call(n,r)?n[r].push(t):n[r]=[t]}),Ll=Wo(function(n,t,e){var u=-1,i="function"==typeof t,o=Uu(t),f=To(n)?Array(n.length):[];return el(n,function(n){var a=i?t:o&&null!=n?n[t]:Y;f[++u]=a?r(a,n,e):Yr(n,t,e)}),f}),zl=Ye(function(n,t,r){n[r]=t}),$l=Ye(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Ul=Wo(function(n,t){if(null==n)return[];var r=t.length;return r>1&&$u(n,t[0],t[1])?t=[]:r>2&&$u(t[0],t[1],t[2])&&(t=[t[0]]),ae(n,Mr(t,1),[])}),Fl=ec.now,Ml=Wo(function(n,t,r){var e=rn;if(r.length){var u=T(r,Au(Ml));e|=an}return vu(n,e,t,r,u)}),Dl=Wo(function(n,t,r){var e=rn|en;if(r.length){var u=T(r,Au(Dl));e|=an}return vu(t,e,n,r,u)}),Pl=Wo(function(n,t){return Sr(n,1,t)}),Nl=Wo(function(n,t,r){return Sr(n,Wf(t)||0,r)});ko.Cache=Zt;var ql=Wo(function(n,t){t=s(Mr(t,1,zu),wu());var e=t.length;return Wo(function(u){for(var i=-1,o=$c(u.length,e);++i<o;)u[i]=t[i].call(this,u[i]);return r(n,this,u)})}),Tl=Wo(function(n,t){var r=T(t,Au(Tl));return vu(n,an,Y,t,r)}),Zl=Wo(function(n,t){var r=T(t,Au(Zl));return vu(n,cn,Y,t,r)}),Kl=Wo(function(n,t){return vu(n,sn,Y,Y,Y,Mr(t,1))}),Vl=Array.isArray,Gl=yc?function(n){return n instanceof yc}:za(!1),Jl=He(function(n,t){if(Vc||Du(t)||To(t))return void Ve(t,Zf(t),n);for(var r in t)sc.call(t,r)&&pr(n,r,t[r])}),Yl=He(function(n,t){if(Vc||Du(t)||To(t))return void Ve(t,Kf(t),n);for(var r in t)pr(n,r,t[r])}),Hl=He(function(n,t,r,e){Ge(t,Kf(t),n,e)}),Ql=He(function(n,t,r,e){Ge(t,Zf(t),n,e)}),Xl=Wo(function(n,t){return Ar(n,Mr(t,1))}),ns=Wo(function(n){return n.push(Y,sr),r(Hl,Y,n)}),ts=Wo(function(n){return n.push(Y,Tu),r(os,Y,n)}),rs=fu(function(n,t,r){n[t]=r},za($a)),es=fu(function(n,t,r){sc.call(n,t)?n[t].push(r):n[t]=[r]},wu),us=Wo(Yr),is=He(function(n,t,r){oe(n,t,r)}),os=He(function(n,t,r,e){oe(n,t,r,e)}),fs=Wo(function(n,t){return null==n?{}:(t=s(Mr(t,1),Vu),ce(n,Br(mu(n),t)))}),as=Wo(function(n,t){return null==n?{}:ce(n,Mr(t,1))}),cs=ru(function(n,t,r){return t=t.toLowerCase(),n+(r?sa(t):t)}),ls=ru(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),ss=ru(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),hs=tu("toLowerCase"),ps=ru(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),vs=ru(function(n,t,r){return n+(r?" ":"")+gs(t)}),_s=ru(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),gs=tu("toUpperCase"),ys=Wo(function(n,t){try{return r(n,Y,t)}catch(e){return Qo(e)?e:new uc(e)}}),ds=Wo(function(n,t){return i(Mr(t,1),function(t){n[t]=Ml(n[t],n)}),n}),ms=iu(),bs=iu(!0),ws=Wo(function(n,t){return function(r){return Yr(r,n,t)}}),xs=Wo(function(n,t){return function(r){return Yr(n,r,t)}}),js=au(s),As=au(f),Os=au(_),ks=su(),Is=su(!0),Rs=z(function(n,t){return n+t}),Ws=pu("ceil"),Es=z(function(n,t){return n/t}),Ss=pu("floor"),Cs=z(function(n,t){return n*t}),Bs=pu("round"),Ls=z(function(n,t){return n-t});return Et.after=mo,Et.ary=bo,Et.assign=Jl,Et.assignIn=Yl,Et.assignInWith=Hl,Et.assignWith=Ql,Et.at=Xl,Et.before=wo,Et.bind=Ml,Et.bindAll=ds,Et.bindKey=Dl,Et.castArray=Lo,Et.chain=Ni,Et.chunk=Yu,Et.compact=Hu,Et.concat=Qu,Et.cond=Ba,Et.conforms=La,Et.constant=za,Et.countBy=Cl,Et.create=Bf,Et.curry=xo,Et.curryRight=jo,Et.debounce=Ao,Et.defaults=ns,Et.defaultsDeep=ts,Et.defer=Pl,Et.delay=Nl,Et.difference=vl,Et.differenceBy=_l,Et.differenceWith=gl,Et.drop=Xu,Et.dropRight=ni,Et.dropRightWhile=ti,Et.dropWhile=ri,Et.fill=ei,Et.filter=Xi,Et.flatMap=ro,Et.flatMapDeep=eo,Et.flatMapDepth=uo,Et.flatten=oi,Et.flattenDeep=fi,Et.flattenDepth=ai,Et.flip=Oo,Et.flow=ms,Et.flowRight=bs,Et.fromPairs=ci,Et.functions=Df,Et.functionsIn=Pf,Et.groupBy=Bl,Et.initial=hi,Et.intersection=yl,Et.intersectionBy=dl,Et.intersectionWith=ml,Et.invert=rs,Et.invertBy=es,Et.invokeMap=Ll,Et.iteratee=Ua,Et.keyBy=zl,Et.keys=Zf,Et.keysIn=Kf,Et.map=ao,Et.mapKeys=Vf,Et.mapValues=Gf,Et.matches=Fa,Et.matchesProperty=Ma,Et.memoize=ko,Et.merge=is,Et.mergeWith=os,Et.method=ws,Et.methodOf=xs,Et.mixin=Da,Et.negate=Io,Et.nthArg=qa,Et.omit=fs,Et.omitBy=Jf,Et.once=Ro,Et.orderBy=co,Et.over=js,Et.overArgs=ql,Et.overEvery=As,Et.overSome=Os,Et.partial=Tl,Et.partialRight=Zl,Et.partition=$l,Et.pick=as,Et.pickBy=Yf,Et.property=Ta,Et.propertyOf=Za,Et.pull=bl,Et.pullAll=gi,Et.pullAllBy=yi,Et.pullAllWith=di,Et.pullAt=wl,Et.range=ks,Et.rangeRight=Is,Et.rearg=Kl,Et.reject=ho,Et.remove=mi,Et.rest=Wo,Et.reverse=bi,Et.sampleSize=vo,Et.set=Qf,Et.setWith=Xf,Et.shuffle=_o,Et.slice=wi,Et.sortBy=Ul,Et.sortedUniq=Ri,Et.sortedUniqBy=Wi,Et.split=xa,Et.spread=Eo,Et.tail=Ei,Et.take=Si,Et.takeRight=Ci,Et.takeRightWhile=Bi,Et.takeWhile=Li,Et.tap=qi,Et.throttle=So,Et.thru=Ti,Et.toArray=kf,Et.toPairs=na,Et.toPairsIn=ta,Et.toPath=Va,Et.toPlainObject=Ef,Et.transform=ra,Et.unary=Co,Et.union=xl,Et.unionBy=jl,Et.unionWith=Al,Et.uniq=zi,Et.uniqBy=$i,Et.uniqWith=Ui,Et.unset=ea,Et.unzip=Fi,Et.unzipWith=Mi,Et.update=ua,Et.updateWith=ia,Et.values=oa,Et.valuesIn=fa,Et.without=Ol,Et.words=Ca,Et.wrap=Bo,Et.xor=kl,Et.xorBy=Il,Et.xorWith=Rl,Et.zip=Wl,Et.zipObject=Di,Et.zipObjectDeep=Pi,Et.zipWith=El,Et.entries=na,Et.entriesIn=ta,Et.extend=Yl,Et.extendWith=Hl,Da(Et,Et),Et.add=Rs,Et.attempt=ys,Et.camelCase=cs,Et.capitalize=sa,Et.ceil=Ws,Et.clamp=aa,Et.clone=zo,Et.cloneDeep=Uo,Et.cloneDeepWith=Fo,Et.cloneWith=$o,Et.deburr=ha,Et.divide=Es,Et.endsWith=pa,Et.eq=Mo,Et.escape=va,Et.escapeRegExp=_a,Et.every=Qi,Et.find=no,Et.findIndex=ui,Et.findKey=Lf,Et.findLast=to,Et.findLastIndex=ii,Et.findLastKey=zf,Et.floor=Ss,Et.forEach=io,Et.forEachRight=oo,Et.forIn=$f,Et.forInRight=Uf,Et.forOwn=Ff,Et.forOwnRight=Mf,Et.get=Nf,Et.gt=Do,Et.gte=Po,Et.has=qf,Et.hasIn=Tf,Et.head=li,Et.identity=$a,Et.includes=fo,Et.indexOf=si,Et.inRange=ca,Et.invoke=us,Et.isArguments=No,Et.isArray=Vl,Et.isArrayBuffer=qo,Et.isArrayLike=To,Et.isArrayLikeObject=Zo,Et.isBoolean=Ko,Et.isBuffer=Gl,Et.isDate=Vo,Et.isElement=Go,Et.isEmpty=Jo,Et.isEqual=Yo,Et.isEqualWith=Ho,Et.isError=Qo,Et.isFinite=Xo,Et.isFunction=nf,Et.isInteger=tf,Et.isLength=rf,Et.isMap=of,Et.isMatch=ff,Et.isMatchWith=af,Et.isNaN=cf,Et.isNative=lf,Et.isNil=hf,Et.isNull=sf,Et.isNumber=pf,Et.isObject=ef,Et.isObjectLike=uf,Et.isPlainObject=vf,Et.isRegExp=_f,Et.isSafeInteger=gf,Et.isSet=yf,Et.isString=df,Et.isSymbol=mf,Et.isTypedArray=bf,Et.isUndefined=wf,Et.isWeakMap=xf,Et.isWeakSet=jf,Et.join=pi,Et.kebabCase=ls,Et.last=vi,Et.lastIndexOf=_i,Et.lowerCase=ss,Et.lowerFirst=hs,Et.lt=Af,Et.lte=Of,Et.max=Ja,Et.maxBy=Ya,Et.mean=Ha,Et.meanBy=Qa,Et.min=Xa,Et.minBy=nc,Et.multiply=Cs,Et.noConflict=Pa,Et.noop=Na,Et.now=Fl,Et.pad=ga,Et.padEnd=ya,Et.padStart=da,Et.parseInt=ma,Et.random=la,Et.reduce=lo,Et.reduceRight=so,Et.repeat=ba,Et.replace=wa,Et.result=Hf,Et.round=Bs,Et.runInContext=J,Et.sample=po,Et.size=go,Et.snakeCase=ps,Et.some=yo,Et.sortedIndex=xi,Et.sortedIndexBy=ji,Et.sortedIndexOf=Ai,Et.sortedLastIndex=Oi,Et.sortedLastIndexBy=ki,Et.sortedLastIndexOf=Ii,Et.startCase=vs,Et.startsWith=ja,Et.subtract=Ls,Et.sum=tc,Et.sumBy=rc,Et.template=Aa,Et.times=Ka,Et.toInteger=If,Et.toLength=Rf,Et.toLower=Oa,Et.toNumber=Wf,Et.toSafeInteger=Sf,Et.toString=Cf,Et.toUpper=ka,Et.trim=Ia,Et.trimEnd=Ra,Et.trimStart=Wa,Et.truncate=Ea,Et.unescape=Sa,Et.uniqueId=Ga,Et.upperCase=_s,Et.upperFirst=gs,Et.each=io,Et.eachRight=oo,Et.first=li,Da(Et,function(){var n={};return Dr(Et,function(t,r){sc.call(Et.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),Et.VERSION=H,i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Et[n].placeholder=Et}),i(["drop","take"],function(n,t){$t.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new $t(this);r=r===Y?1:zc(If(r),0);var u=this.clone();return e?u.__takeCount__=$c(r,u.__takeCount__):u.__views__.push({size:$c(r,kn),type:n+(u.__dir__<0?"Right":"")}),u},$t.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),i(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==mn||r==wn;$t.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:wu(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),i(["head","last"],function(n,t){var r="take"+(t?"Right":"");$t.prototype[n]=function(){return this[r](1).value()[0]}}),i(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");$t.prototype[n]=function(){return this.__filtered__?new $t(this):this[r](1)}}),$t.prototype.compact=function(){return this.filter($a)},$t.prototype.find=function(n){return this.filter(n).head()},$t.prototype.findLast=function(n){return this.reverse().find(n)},$t.prototype.invokeMap=Wo(function(n,t){return"function"==typeof n?new $t(this):this.map(function(r){return Yr(r,n,t)})}),$t.prototype.reject=function(n){return n=wu(n,3),this.filter(function(t){return!n(t)})},$t.prototype.slice=function(n,t){n=If(n);var r=this;return r.__filtered__&&(n>0||0>t)?new $t(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==Y&&(t=If(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},$t.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},$t.prototype.toArray=function(){return this.take(kn)},Dr($t.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=Et[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(Et.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof $t,a=o[0],c=f||Vl(t),l=function(n){var t=u.apply(Et,h([n],o));return e&&s?t[0]:t};c&&r&&"function"==typeof a&&1!=a.length&&(f=c=!1);var s=this.__chain__,p=!!this.__actions__.length,v=i&&!s,_=f&&!p;if(!i&&c){t=_?t:new $t(this);var g=n.apply(t,o);return g.__actions__.push({func:Ti,args:[l],thisArg:Y}),new zt(g,s)}return v&&_?n.apply(this,o):(g=this.thru(l),v?e?g.value()[0]:g.value():g)})}),i(["pop","push","shift","sort","splice","unshift"],function(n){var t=ac[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);Et.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(Vl(u)?u:[],n)}return this[r](function(r){return t.apply(Vl(r)?r:[],n)})}}),Dr($t.prototype,function(n,t){var r=Et[t];if(r){var e=r.name+"",u=Gc[e]||(Gc[e]=[]);u.push({name:t,func:r})}}),Gc[ou(Y,en).name]=[{name:"wrapper",func:Y}],$t.prototype.clone=Ut,$t.prototype.reverse=Ft,$t.prototype.value=Mt,Et.prototype.at=Sl,Et.prototype.chain=Zi,Et.prototype.commit=Ki,Et.prototype.next=Vi,Et.prototype.plant=Ji,Et.prototype.reverse=Yi,Et.prototype.toJSON=Et.prototype.valueOf=Et.prototype.value=Hi,Ac&&(Et.prototype[Ac]=Gi),Et}var Y,H="4.10.0",Q=200,X="Expected a function",nn="__lodash_hash_undefined__",tn="__lodash_placeholder__",rn=1,en=2,un=4,on=8,fn=16,an=32,cn=64,ln=128,sn=256,hn=512,pn=1,vn=2,_n=30,gn="...",yn=150,dn=16,mn=1,bn=2,wn=3,xn=1/0,jn=9007199254740991,An=1.7976931348623157e308,On=NaN,kn=4294967295,In=kn-1,Rn=kn>>>1,Wn="[object Arguments]",En="[object Array]",Sn="[object Boolean]",Cn="[object Date]",Bn="[object Error]",Ln="[object Function]",zn="[object GeneratorFunction]",$n="[object Map]",Un="[object Number]",Fn="[object Object]",Mn="[object Promise]",Dn="[object RegExp]",Pn="[object Set]",Nn="[object String]",qn="[object Symbol]",Tn="[object WeakMap]",Zn="[object WeakSet]",Kn="[object ArrayBuffer]",Vn="[object DataView]",Gn="[object Float32Array]",Jn="[object Float64Array]",Yn="[object Int8Array]",Hn="[object Int16Array]",Qn="[object Int32Array]",Xn="[object Uint8Array]",nt="[object Uint8ClampedArray]",tt="[object Uint16Array]",rt="[object Uint32Array]",et=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,it=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ot=/&(?:amp|lt|gt|quot|#39|#96);/g,ft=/[&<>"'`]/g,at=RegExp(ot.source),ct=RegExp(ft.source),lt=/<%-([\s\S]+?)%>/g,st=/<%([\s\S]+?)%>/g,ht=/<%=([\s\S]+?)%>/g,pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,gt=/[\\^$.*+?()[\]{}|]/g,yt=RegExp(gt.source),dt=/^\s+|\s+$/g,mt=/^\s+/,bt=/\s+$/,wt=/[a-zA-Z0-9]+/g,xt=/\\(\\)?/g,jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Ot=/^0x/i,kt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,Rt=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,Et=/^(?:0|[1-9]\d*)$/,St=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ct=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Lt="\\ud800-\\udfff",zt="\\u0300-\\u036f\\ufe20-\\ufe23",$t="\\u20d0-\\u20f0",Ut="\\u2700-\\u27bf",Ft="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="\\xac\\xb1\\xd7\\xf7",Dt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pt="\\u2018\\u2019\\u201c\\u201d",Nt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qt="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",Zt=Mt+Dt+Pt+Nt,Kt="["+Lt+"]",Vt="["+Zt+"]",Gt="["+zt+$t+"]",Jt="\\d+",Yt="["+Ut+"]",Ht="["+Ft+"]",Qt="[^"+Lt+Zt+Jt+Ut+Ft+qt+"]",Xt="\\ud83c[\\udffb-\\udfff]",nr="(?:"+Gt+"|"+Xt+")",tr="[^"+Lt+"]",rr="(?:\\ud83c[\\udde6-\\uddff]){2}",er="[\\ud800-\\udbff][\\udc00-\\udfff]",ur="["+qt+"]",ir="\\u200d",or="(?:"+Ht+"|"+Qt+")",fr="(?:"+ur+"|"+Qt+")",ar=nr+"?",cr="["+Tt+"]?",lr="(?:"+ir+"(?:"+[tr,rr,er].join("|")+")"+cr+ar+")*",sr=cr+ar+lr,hr="(?:"+[Yt,rr,er].join("|")+")"+sr,pr="(?:"+[tr+Gt+"?",Gt,rr,er,Kt].join("|")+")",vr=RegExp(Gt,"g"),_r=RegExp(Xt+"(?="+Xt+")|"+pr+sr,"g"),gr=RegExp([ur+"?"+Ht+"+(?="+[Vt,ur,"$"].join("|")+")",fr+"+(?="+[Vt,ur+or,"$"].join("|")+")",ur+"?"+or+"+",ur+"+",Jt,hr].join("|"),"g"),yr=RegExp("["+ir+Lt+zt+$t+Tt+"]"),dr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],br=-1,wr={};wr[Gn]=wr[Jn]=wr[Yn]=wr[Hn]=wr[Qn]=wr[Xn]=wr[nt]=wr[tt]=wr[rt]=!0,wr[Wn]=wr[En]=wr[Kn]=wr[Sn]=wr[Vn]=wr[Cn]=wr[Bn]=wr[Ln]=wr[$n]=wr[Un]=wr[Fn]=wr[Dn]=wr[Pn]=wr[Nn]=wr[Tn]=!1;var xr={};xr[Wn]=xr[En]=xr[Kn]=xr[Vn]=xr[Sn]=xr[Cn]=xr[Gn]=xr[Jn]=xr[Yn]=xr[Hn]=xr[Qn]=xr[$n]=xr[Un]=xr[Fn]=xr[Dn]=xr[Pn]=xr[Nn]=xr[qn]=xr[Xn]=xr[nt]=xr[tt]=xr[rt]=!0,xr[Bn]=xr[Ln]=xr[Tn]=!1;var jr={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o",
"":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ar={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Or={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},kr={"function":!0,object:!0},Ir={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rr=parseFloat,Wr=parseInt,Er=kr[typeof exports]&&exports&&!exports.nodeType?exports:Y,Sr=kr[typeof module]&&module&&!module.nodeType?module:Y,Cr=Sr&&Sr.exports===Er?Er:Y,Br=S(Er&&Sr&&"object"==typeof global&&global),Lr=S(kr[typeof self]&&self),zr=S(kr[typeof window]&&window),$r=S(kr[typeof this]&&this),Ur=Br||zr!==($r&&$r.window)&&zr||Lr||$r||Function("return this")(),Fr=J();(zr||Lr||{})._=Fr,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Fr}):Er&&Sr?(Cr&&((Sr.exports=Fr)._=Fr),Er._=Fr):Ur._=Fr}).call(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],6:[function(require,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,o="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var s=[];if(o){var r=document.createElement("div"),t=new MutationObserver(function(){var e=s.slice();s.length=0,e.forEach(function(e){e()})});return t.observe(r,{attributes:!0}),function(e){s.length||r.setAttribute("yes","no"),s.push(e)}}return n?(window.addEventListener("message",function(e){var o=e.source;if((o===window||null===o)&&"process-tick"===e.data&&(e.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(e){s.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")};
},{}],7:[function(require,module,exports){
"use strict";function querystring(e){for(var r,n=/([^=?&]+)=([^&]*)/g,t={};r=n.exec(e);t[decodeURIComponent(r[1])]=decodeURIComponent(r[2]));return t}function querystringify(e,r){r=r||"";var n=[];"string"!=typeof r&&(r="?");for(var t in e)has.call(e,t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.length?r+n.join("&"):""}var has=Object.prototype.hasOwnProperty;exports.stringify=querystringify,exports.parse=querystring;
},{}],8:[function(require,module,exports){
!function(){"use strict";function t(i,n){return this instanceof t?(this._maxEntries=Math.max(4,i||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),void this.clear()):new t(i,n)}function i(t,i){t.bbox=n(t,0,t.children.length,i)}function n(t,i,n,r){for(var o,a=e(),s=i;n>s;s++)o=t.children[s],h(a,t.leaf?r(o):o.bbox);return a}function e(){return[1/0,1/0,-(1/0),-(1/0)]}function h(t,i){return t[0]=Math.min(t[0],i[0]),t[1]=Math.min(t[1],i[1]),t[2]=Math.max(t[2],i[2]),t[3]=Math.max(t[3],i[3]),t}function r(t,i){return t.bbox[0]-i.bbox[0]}function o(t,i){return t.bbox[1]-i.bbox[1]}function a(t){return(t[2]-t[0])*(t[3]-t[1])}function s(t){return t[2]-t[0]+(t[3]-t[1])}function l(t,i){return(Math.max(i[2],t[2])-Math.min(i[0],t[0]))*(Math.max(i[3],t[3])-Math.min(i[1],t[1]))}function u(t,i){var n=Math.max(t[0],i[0]),e=Math.max(t[1],i[1]),h=Math.min(t[2],i[2]),r=Math.min(t[3],i[3]);return Math.max(0,h-n)*Math.max(0,r-e)}function f(t,i){return t[0]<=i[0]&&t[1]<=i[1]&&i[2]<=t[2]&&i[3]<=t[3]}function c(t,i){return i[0]<=t[2]&&i[1]<=t[3]&&i[2]>=t[0]&&i[3]>=t[1]}function d(t,i,n,e,h){for(var r,o=[i,n];o.length;)n=o.pop(),i=o.pop(),e>=n-i||(r=i+Math.ceil((n-i)/e/2)*e,x(t,i,n,r,h),o.push(i,r,r,n))}function x(t,i,n,e,h){for(var r,o,a,s,l,u,f,c,d;n>i;){for(n-i>600&&(r=n-i+1,o=e-i+1,a=Math.log(r),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(r-s)/r)*(0>o-r/2?-1:1),u=Math.max(i,Math.floor(e-o*s/r+l)),f=Math.min(n,Math.floor(e+(r-o)*s/r+l)),x(t,u,f,e,h)),c=t[e],o=i,d=n,p(t,i,e),h(t[n],c)>0&&p(t,i,n);d>o;){for(p(t,o,d),o++,d--;h(t[o],c)<0;)o++;for(;h(t[d],c)>0;)d--}0===h(t[i],c)?p(t,i,d):(d++,p(t,d,n)),e>=d&&(i=d+1),d>=e&&(n=d-1)}}function p(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}t.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],e=this.toBBox;if(!c(t,i.bbox))return n;for(var h,r,o,a,s=[];i;){for(h=0,r=i.children.length;r>h;h++)o=i.children[h],a=i.leaf?e(o):o.bbox,c(t,a)&&(i.leaf?n.push(o):f(t,a)?this._all(o,n):s.push(o));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!c(t,i.bbox))return!1;for(var e,h,r,o,a=[];i;){for(e=0,h=i.children.length;h>e;e++)if(r=i.children[e],o=i.leaf?n(r):r.bbox,c(t,o)){if(i.leaf||f(t,o))return!0;a.push(r)}i=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;n>i;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var h=this.data;this.data=e,e=h}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:e(),leaf:!0},this},remove:function(t){if(!t)return this;for(var i,n,e,h,r=this.data,o=this.toBBox(t),a=[],s=[];r||a.length;){if(r||(r=a.pop(),n=a[a.length-1],i=s.pop(),h=!0),r.leaf&&(e=r.children.indexOf(t),-1!==e))return r.children.splice(e,1),a.push(r),this._condense(a),this;h||r.leaf||!f(r.bbox,o)?n?(i++,r=n.children[i],h=!1):r=null:(a.push(r),s.push(i),i=0,n=r,r=r.children[0])}return this},toBBox:function(t){return t},compareMinX:function(t,i){return t[0]-i[0]},compareMinY:function(t,i){return t[1]-i[1]},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,n,e,h){var r,o=e-n+1,a=this._maxEntries;if(a>=o)return r={children:t.slice(n,e+1),height:1,bbox:null,leaf:!0},i(r,this.toBBox),r;h||(h=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,h-1))),r={children:[],height:h,bbox:null,leaf:!1};var s,l,u,f,c=Math.ceil(o/a),x=c*Math.ceil(Math.sqrt(a));for(d(t,n,e,x,this.compareMinX),s=n;e>=s;s+=x)for(u=Math.min(s+x-1,e),d(t,s,u,c,this.compareMinY),l=s;u>=l;l+=c)f=Math.min(l+c-1,u),r.children.push(this._build(t,l,f,h-1));return i(r,this.toBBox),r},_chooseSubtree:function(t,i,n,e){for(var h,r,o,s,u,f,c,d;;){if(e.push(i),i.leaf||e.length-1===n)break;for(c=d=1/0,h=0,r=i.children.length;r>h;h++)o=i.children[h],u=a(o.bbox),f=l(t,o.bbox)-u,d>f?(d=f,c=c>u?u:c,s=o):f===d&&c>u&&(c=u,s=o);i=s}return i},_insert:function(t,i,n){var e=this.toBBox,r=n?t.bbox:e(t),o=[],a=this._chooseSubtree(r,this.data,i,o);for(a.children.push(t),h(a.bbox,r);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(r,o,i)},_split:function(t,n){var e=t[n],h=e.children.length,r=this._minEntries;this._chooseSplitAxis(e,r,h);var o=this._chooseSplitIndex(e,r,h),a={children:e.children.splice(o,e.children.length-o),height:e.height,bbox:null,leaf:!1};e.leaf&&(a.leaf=!0),i(e,this.toBBox),i(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(e,a)},_splitRoot:function(t,n){this.data={children:[t,n],height:t.height+1,bbox:null,leaf:!1},i(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,e){var h,r,o,s,l,f,c,d;for(f=c=1/0,h=i;e-i>=h;h++)r=n(t,0,h,this.toBBox),o=n(t,h,e,this.toBBox),s=u(r,o),l=a(r)+a(o),f>s?(f=s,d=h,c=c>l?l:c):s===f&&c>l&&(c=l,d=h);return d},_chooseSplitAxis:function(t,i,n){var e=t.leaf?this.compareMinX:r,h=t.leaf?this.compareMinY:o,a=this._allDistMargin(t,i,n,e),s=this._allDistMargin(t,i,n,h);s>a&&t.children.sort(e)},_allDistMargin:function(t,i,e,r){t.children.sort(r);var o,a,l=this.toBBox,u=n(t,0,i,l),f=n(t,e-i,e,l),c=s(u)+s(f);for(o=i;e-i>o;o++)a=t.children[o],h(u,t.leaf?l(a):a.bbox),c+=s(u);for(o=e-i-1;o>=i;o--)a=t.children[o],h(f,t.leaf?l(a):a.bbox),c+=s(f);return c},_adjustParentBBoxes:function(t,i,n){for(var e=n;e>=0;e--)h(i[e].bbox,t)},_condense:function(t){for(var n,e=t.length-1;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():i(t[e],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return [a"+t.join(", a")+"];")}},"function"==typeof define&&define.amd?define("rbush",function(){return t}):"undefined"!=typeof module?module.exports=t:"undefined"!=typeof self?self.rbush=t:window.rbush=t}();
},{}],9:[function(require,module,exports){
"use strict";module.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e};
},{}],10:[function(require,module,exports){
"use strict";function extractProtocol(t){var o=protocolre.exec(t);return{protocol:o[1]?o[1].toLowerCase():"",slashes:!!o[2],rest:o[3]?o[3]:""}}function URL(t,o,e){if(!(this instanceof URL))return new URL(t,o,e);var r,s,n,a,i=relativere.test(t),l=typeof o,p=this,h=0;"object"!==l&&"string"!==l&&(e=o,o=null),e&&"function"!=typeof e&&(e=qs.parse),o=lolcation(o);var c=extractProtocol(t);for(p.protocol=c.protocol||o.protocol||"",p.slashes=c.slashes||o.slashes,t=c.rest;h<instructions.length;h++)s=instructions[h],r=s[0],a=s[1],r!==r?p[a]=t:"string"==typeof r?~(n=t.indexOf(r))&&("number"==typeof s[2]?(p[a]=t.slice(0,n),t=t.slice(n+s[2])):(p[a]=t.slice(n),t=t.slice(0,n))):(n=r.exec(t))&&(p[a]=n[1],t=t.slice(0,t.length-n[0].length)),p[a]=p[a]||(s[3]||"port"===a&&i?o[a]||"":""),s[4]&&(p[a]=p[a].toLowerCase());e&&(p.query=e(p.query)),required(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(s=p.auth.split(":"),p.username=s[0]||"",p.password=s[1]||""),p.href=p.toString()}var required=require("requires-port"),lolcation=require("./lolcation"),qs=require("querystringify"),relativere=/^\/(?!\/)/,protocolre=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i,instructions=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];URL.prototype.set=function(t,o,e){var r=this;return"query"===t?("string"==typeof o&&o.length&&(o=(e||qs.parse)(o)),r[t]=o):"port"===t?(r[t]=o,required(o,r.protocol)?o&&(r.host=r.hostname+":"+o):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=o,r.port&&(o+=":"+r.port),r.host=o):"host"===t?(r[t]=o,/\:\d+/.test(o)&&(o=o.split(":"),r.hostname=o[0],r.port=o[1])):"protocol"===t?(r.protocol=o,r.slashes=!e):r[t]=o,r.href=r.toString(),r},URL.prototype.toString=function(t){t&&"function"==typeof t||(t=qs.stringify);var o,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(e.slashes?"//":"");return e.username&&(s+=e.username,e.password&&(s+=":"+e.password),s+="@"),s+=e.hostname,e.port&&(s+=":"+e.port),s+=e.pathname,o="object"==typeof e.query?t(e.query):e.query,o&&(s+="?"!==o.charAt(0)?"?"+o:o),e.hash&&(s+=e.hash),s},URL.qs=qs,URL.location=lolcation,module.exports=URL;
},{"./lolcation":11,"querystringify":7,"requires-port":9}],11:[function(require,module,exports){
(function (global){
"use strict";var slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ignore={hash:1,query:1},URL;module.exports=function(e){e=e||global.location||{},URL=URL||require("./");var s,o={},r=typeof e;if("blob:"===e.protocol)o=new URL(unescape(e.pathname),{});else if("string"===r){o=new URL(e,{});for(s in ignore)delete o[s]}else if("object"===r){for(s in e)s in ignore||(o[s]=e[s]);void 0===o.slashes&&(o.slashes=slashes.test(e.href))}return o};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./":10}],12:[function(require,module,exports){
module.exports={"author":"Mapwize","name":"mapwize.js","description":"Mapwize Javascript SDK","version":"1.5.0","homepage":"https://www.mapwize.io/","repository":{"type":"git","url":"git://github.com/contexeo/mapwize.js.git"},"main":"src/index.js","dependencies":{"async":"^1.5.2","jquery":"^2.1.4","leaflet":"git://github.com/contexeo/Leaflet.git#mapwize","leaflet-polylinedecorator":"^1.0.1","lodash":"^4.6.1","rbush":"~1.4.2","url-parse":"^1.0.5"},"scripts":{"test":"eslint --no-eslintrc -c .eslintrc src && mocha-phantomjs test/index.html"},"devDependencies":{"browserify":"^6.3.2","clean-css":"~2.0.7","eslint":"^0.23.0","expect.js":"0.3.1","grunt":"^0.4.5","grunt-browserify":"*","grunt-bump":"^0.7.2","grunt-contrib-copy":"^0.8.2","grunt-contrib-watch":"^0.6.1","grunt-shell":"^1.1.2","grunt-sync":"^0.4.1","happen":"0.1.3","leaflet-fullscreen":"0.0.4","leaflet-hash":"0.2.1","load-grunt-tasks":"~1.0.0","marked":"~0.3.0","minifyify":"^6.1.0","minimist":"0.0.5","mocha":"1.17.1","mocha-phantomjs":"3.1.6","sinon":"1.10.2"},"optionalDependencies":{},"engines":{"node":"*"}}
},{}],13:[function(require,module,exports){
var Api=require("../api"),map,initialize=function(i,e){map=i},access=function(i,e){var a=function(i){e&&e(i)};Api.sendAccess(i,function(i,e){i?a(!1):(a(!0),map.refresh())})};exports.initialize=initialize,exports.accessKey=access;
},{"../api":15}],14:[function(require,module,exports){
var config=require("./config"),query=require("./utils/query"),_=require("lodash");!function(e,i,n,a,t,o,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,o=i.createElement(n),s=i.getElementsByTagName(n)[0],o.async=1,o.src=a,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","mwga");var cible={objectId:"dimension1",objectName:"dimension2",venueId:"dimension3",venueName:"dimension4",organizationId:"dimension5",organizationName:"dimension6",sdkName:"dimension7",sdkVersion:"dimension8",applicationId:"dimension9",applicationName:"dimension10",clientAppName:"dimension11"},initialize=function(e,i){mwga("create",config.analyticsId,"auto"),mwga("set",cible.sdkName,config.SDK_NAME),mwga("set",cible.sdkVersion,config.SDK_VERSION),mwga("set",cible.clientAppName,config.CLIENT_APP_NAME),mwga("send","pageview","/map"),query.get("/applications/key/"+e,{},function(e){mwga("set",cible.applicationId,e._id),mwga("set",cible.applicationName,e.name),i&&i()},i)};exports.initialize=initialize,exports.sendEvent=function(e,i,n){var a={};_.forEach(n,function(e,i){a[cible[i]]=e}),mwga("send","event",e,i,a)},exports.event=function(e,i,n){mwga("send","event",e,i,n)};
},{"./config":17,"./utils/query":36,"lodash":5}],15:[function(require,module,exports){
"use strict";function addVenue(e,a){dataStore.venues[e._id]=e,dataStore.venues[e._id].places={lastLoad:null},dataStore.venues[e._id].layers={lastLoad:null},dataStore.venues[e._id].connectorPlaces={lastLoad:null},a!==!1&&(reindexPlacesInVenues(),reindexLayersInVenues(),reindexConnectorPlacesInVenues())}function addVenues(e){_.forEach(e,function(e){addVenue(e,!1)}),reindexPlacesInVenues(),reindexLayersInVenues(),reindexConnectorPlacesInVenues()}function emptyPlacesIndexInVenues(){_.forEach(dataStore.venues,function(e){var a=e.places.lastLoad;e.places={lastLoad:a}})}function reindexPlacesInVenues(){emptyPlacesIndexInVenues(),_.forEach(dataStore.places,function(e){dataStore.venues[e.venueId]&&(dataStore.venues[e.venueId].places[e._id]=e)})}function addPlace(e,a){dataStore.places[e._id]=e,a!==!1&&reindexPlacesInVenues()}function addPlaces(e){_.forEach(e,function(e){addPlace(e,!1)}),reindexPlacesInVenues()}function emptyLayersIndexInVenues(){_.forEach(dataStore.venues,function(e){var a=e.layers.lastLoad;e.layers={lastLoad:a}})}function reindexLayersInVenues(){emptyLayersIndexInVenues(),_.forEach(dataStore.layers,function(e){dataStore.venues[e.venueId]&&(dataStore.venues[e.venueId].layers[e._id]=e)})}function addLayer(e,a){dataStore.layers[e._id]=e,a!==!1&&reindexLayersInVenues()}function addLayers(e){_.forEach(e,function(e){addLayer(e,!1)}),reindexLayersInVenues()}function emptyConnectorPlacesIndexInVenues(){_.forEach(dataStore.venues,function(e){var a=e.connectorPlaces.lastLoad;e.connectorPlaces={lastLoad:a}})}function reindexConnectorPlacesInVenues(){emptyConnectorPlacesIndexInVenues(),_.forEach(dataStore.connectorPlaces,function(e){dataStore.venues[e.venueId]&&(dataStore.venues[e.venueId].connectorPlaces[e._id]=e)})}function addConnectorPlace(e,a){dataStore.connectorPlaces[e._id]=e,a!==!1&&reindexConnectorPlacesInVenues()}function addConnectorPlaces(e){_.forEach(e,function(e){addConnectorPlace(e,!1)}),reindexConnectorPlacesInVenues()}function deStackVenues(){if(venuesStack.length){var e=_.clone(venuesStack);venuesStack=[],_.forEach(e,function(e){getVenues(e.params,e.cb)})}}function deStackLayers(){if(layersStack.length){var e=_.clone(layersStack);layersStack=[],_.forEach(e,function(e){getLayers(e.params,e.cb)})}}function deStackPlaces(){if(placeStack.length){var e=_.clone(placeStack);placeStack=[],_.forEach(e,function(e){getPlaces(e.params,e.cb)})}}function deStackPlaceTypes(){if(placeTypesStack.length){var e=_.clone(placeTypesStack);placeTypesStack=[],_.forEach(e,function(e){getPlaceType(e.params,e.cb)})}}function deStackConnectorPlaces(){if(connectorPlaceStack.length){var e=_.clone(connectorPlaceStack);connectorPlaceStack=[],_.forEach(e,function(e){getConnectorPlaces(e.params,e.cb)})}}function loadVenues(e,a){e.pick=e.pick||venuePick,query.get("/venues",e,function(e){a(null,e)},function(e){a(e)})}function getVenueById(e,a){dataStore.venues[e]?a(null,_.omit(dataStore.venues[e],["layers","places"])):query.get("/venues/"+e,{},function(e){a(null,_.pick(e,venuePick))},function(e){a(e)})}function getVenueByAlias(e,a){var n=_.find(dataStore.venues,{alias:e});if(n)a(null,_.clone(n));else{var t={alias:e,pick:venuePick};query.getOne("/venues",t,function(e){a(null,e)},function(e){a(e)})}}function getVenueByName(e,a){var n=_.find(dataStore.venues,{name:e});if(n)a(null,_.clone(n));else{var t={name:e,pick:venuePick};query.getOne("/venues",t,function(e){a(null,e)},function(e){a(e)})}}function loadConnectorPlaces(e,a){e.pick=e.pick||connectorPlacePick,query.get("/connectorPlaces",e,function(e){a(null,e)},function(e){a(e)})}function loadLayers(e,a){e.pick=e.pick||layerPick,query.get("/layers",e,function(e){a(null,e)},function(e){a(e)})}function loadPlaceTypes(e,a){e.pick=e.pick||placeTypePick,query.get("/placetypes",e,function(e){a(null,e)},function(e){a(e)})}function getPlaceType(e,a){if(placeTypesIsLoading){var n={params:e,cb:a};return void placeTypesStack.push(n)}async.series([function(e){var a=new Date;_.isEmpty(dataStore.placeTypes)||!dataStore.placeTypes.lastLoad||a.getTime()>dataStore.placeTypes.lastLoad.getTime()+timeToReloadData?(placeTypesIsLoading=!0,loadPlaceTypes({},function(a,n){dataStore.placeTypes=_.keyBy(n,"_id"),dataStore.placeTypes.lastLoad=new Date,e(a)})):e()}],function(n){placeTypesIsLoading=!1,deStackPlaceTypes(),a(n,dataStore.placeTypes[e])})}function loadPlaceLists(e,a){e.pick=e.pick||placeListPick,query.get("/placeLists",e,function(e){a(null,e)},function(e){a(e)})}function getPlaceLists(e,a){if("string"==typeof e||e.id||e.venueId){var n=e.id||e.venueId||e;loadPlaceLists({venueId:n},a)}else a(new Error("Invalid params. You must provide venue id as String or object (key : id or venueId)"))}function getPlaceList(e,a){if("string"==typeof e||e.id||e.listId){var n=e.id||e.listId||e;getPlaceListById(n,a)}else if(e.venueId)if(e.alias||e.listAlias){var t=e.alias||e.listAlias;getPlaceListByAlias(e.venueId,t,a)}else if(e.name||e.listName){var i=e.name||e.listName;getPlaceListByName(e.venueId,i,a)}else a(new Error("Invalid params. You must provide id or alias or name"));else{var c=e.venue||{};e.venueName&&(c.name=e.venueName),e.venueAlias&&(c.alias=e.venueAlias),getVenue(c,function(n,t){t?(e.venueId=t._id,getPlaceList(e,a)):a(new Error("Venue not found"))})}}function getPlaceListById(e,a){query.get("/placeLists/"+e,{},function(e){a(null,_.pick(e,placeListPick))},function(e){a(e)})}function getPlaceListByAlias(e,a,n){var t={venueId:e,alias:a,pick:placeListPick};query.getOne("/placeLists",t,function(e){n(null,e)},function(e){n(e)})}function getPlaceListByName(e,a,n){var t={venueId:e,name:a,pick:placeListPick};query.getOne("/placeLists",t,function(e){n(null,e)},function(e){n(e)})}function loadPlaces(e,a){e.pick=e.pick||placePick,query.get("/places",e,function(e){a(null,e)},function(e){a(e)})}function getPlaces(e,a){if(placesIsLoading){var n={params:e,cb:a};return void placeStack.push(n)}if(e.placeListId)getPlacesByPlaceListId(e.placeListId,a);else{var t=_.pick(e,["latitudeMin","latitudeMax","longitudeMin","longitudeMax"]);getVenues(t,function(n,t){async.each(t,function(e,a){var n=new Date;if(!e.places||!e.places.lastLoad||n.getTime()>e.places.lastLoad.getTime()+timeToReloadData){placesIsLoading=!0;var t=_.clone(cacheParams);t.venueId=t.venueId||e._id,loadPlaces(t,function(n,t){dataStore.places=_.keyBy(_.reject(dataStore.places,{venueId:e._id}),"_id"),addPlaces(t),dataStore.venues[e._id].places.lastLoad=new Date,a(n)})}else a()},function(){var n=[];_.forEach(t,function(a){var t=null,i=null,c=_.map(_.values(_.omit(_.clone(a.places),["lastLoad"])),function(e){return e.venue=_.omit(a,["layers","places"]),_.assign(e,_.omit(cachePlacesParams[e._id],"_id"))});_.isFinite(e.floor)&&(c=_.filter(c,function(a){return a.floor==e.floor||_.isNull(a.floor)})),e.latitudeMin&&e.latitudeMax&&(t=_.intersection(_.filter(c,function(a){return a.latitudeMax>e.latitudeMin}),_.filter(c,function(a){return a.latitudeMin<e.latitudeMax}))),e.longitudeMin&&e.longitudeMax&&(i=_.intersection(_.filter(c,function(a){return a.longitudeMax>e.longitudeMin}),_.filter(c,function(a){return a.longitudeMin<e.longitudeMax}))),t&&i?c=_.intersection(t,i):t?c=t:i&&(c=i),n=_.concat(n,c)}),n=_.orderBy(n,"order"),placesIsLoading=!1,deStackPlaces(),a(null,n)})})}}function getPlacesByPlaceListId(e,a){query.get("/placeLists/"+e+"/places",{},function(e){a(null,_.map(e,function(e){return _.pick(e,placePick)}))},function(e){a(e)})}function getPlace(e,a){if("string"==typeof e||e.id||e.placeId){var n=e.id||e.placeId||e;getPlaceById(n,a)}else if(e.venueId)if(e.alias||e.placeAlias){var t=e.alias||e.placeAlias;getPlaceByAlias(e.venueId,t,a)}else if(e.name||e.placeName){var i=e.name||e.placeName;getPlaceByName(e.venueId,i,a)}else a(new Error("Invalid params. You must provide id or alias or name"));else{var c=e.venue||{};e.venueName&&(c.name=e.venueName),e.venueAlias&&(c.alias=e.venueAlias),getVenue(c,function(n,t){t?(e.venueId=t._id,getPlace(e,a)):a(new Error("Venue not found"))})}}function getPlaceById(e,a){dataStore.places[e]?api.getVenue(dataStore.places[e].venueId,function(n,t){a(null,_.assign(_.clone(dataStore.places[e]),{venue:_.omit(t,["places","layers"])}))}):query.get("/places/"+e,{},function(e){a(null,_.pick(e,placePick))},function(e){a(e)})}function getPlaceByAlias(e,a,n){var t=_.find(dataStore.places,{venueId:e,alias:a});if(t)n(null,_.clone(t));else{var i={venueId:e,alias:a,pick:placePick};query.getOne("/places",i,function(e){n(null,e)},function(e){n(e)})}}function getPlaceByName(e,a,n){var t=_.find(dataStore.places,{venueId:e,name:a});if(t)n(null,_.clone(t));else{var i={venueId:e,name:a,pick:placePick};query.getOne("/places",i,function(e){n(null,e)},function(e){n(e)})}}function invalidateCache(){lastVenueLoad=null}function setPlacesOptions(e){cachePlacesParams=e}function initialize(e,a,n){var t=new Date;if(!launchInitialization||!lastVenueLoad||lastVenueLoad&&t.getTime()>lastVenueLoad.getTime()+timeToReloadData){launchInitialization=!0,isInitialized=!1,(n||_.isEmpty(cacheParams))&&(cacheParams=e),lastVenueLoad=new Date;var i=_.clone(cacheParams);getVenues(i,function(e,n){e||(_.forEach(dataStore.venues,function(e){_.find(n,{_id:e._id})||delete dataStore.venues[e._id]}),addVenues(n)),isInitialized=!0,a&&a(e,n)})}else a&&a()}var query=require("./utils/query"),_=require("lodash"),async=require("async"),api={},launchInitialization=!1,isInitialized=!1,cacheParams={},cachePlacesParams={},venuePick=["_id","longitudeMax","latitudeMax","longitudeMin","latitudeMin","owner","name","alias","icon","geometry","translations"],placePick=["_id","latitudeMax","latitudeMin","longitudeMax","longitudeMin","name","alias","floor","placeTypeId","venueId","geometry","translations","style","marker","order"],placeListPick=["_id","name","alias","placeIds","venueId"],placeTypePick=["_id","style"],layerPick=["_id","tilesUrlTemplate","venueId","floor"],connectorPlacePick=["_id","latitude","longitude","floor","venueId","owner","type"],timeToReloadData=3e5,lastVenueLoad=null,placesIsLoading=!1,placeStack=[],placeTypesIsLoading=!1,placeTypesStack=[],connectorPlacesIsLoading=!1,connectorPlaceStack=[],layersIsLoading=!1,layersStack=[],venuesIsLoading=!1,venuesStack=[],dataStore={venues:{},places:{},placeTypes:{},layers:{},connectorPlaces:{}},getVenues=function(e,a){if(venuesIsLoading){var n={params:e,cb:a};return void venuesStack.push(n)}initialize(cacheParams,function(){if(isInitialized){var n=null,t=null,i=[];e.latitudeMin&&e.latitudeMax&&(n=_.intersection(_.filter(dataStore.venues,function(a){return a.latitudeMax>e.latitudeMin}),_.filter(dataStore.venues,function(a){return a.latitudeMin<e.latitudeMax}))),e.longitudeMin&&e.longitudeMax&&(t=_.intersection(_.filter(dataStore.venues,function(a){return a.longitudeMax>e.longitudeMin}),_.filter(dataStore.venues,function(a){return a.longitudeMin<e.longitudeMax}))),n&&t?i=_.intersection(n,t):n?i=n:t&&(i=t),a(null,i)}else venuesIsLoading=!0,loadVenues(e,function(e,n){a&&a(e,n),venuesIsLoading=!1,deStackVenues()})})};api.getVenues=getVenues;var getVenue=function(e,a){if("string"==typeof e||e.id||e.venueId){var n=e.id||e.venueId||e;getVenueById(n,a)}else if(e.alias||e.venueAlias){var t=e.alias||e.venueAlias;getVenueByAlias(t,a)}else if(e.name||e.venueName){var i=e.name||e.venueName;getVenueByName(i,a)}else a(new Error("Invalid params. You must provide id or alias or name"))};api.getVenue=getVenue;var getConnectorPlaces=function(e,a){if(connectorPlacesIsLoading){var n={params:e,cb:a};return void connectorPlaceStack.push(n)}var t=_.pick(e,["latitudeMin","latitudeMax","longitudeMin","longitudeMax"]);getVenues(t,function(n,t){async.each(t,function(e,a){var n=new Date;if(!e.connectorPlaces||!e.connectorPlaces.lastLoad||n.getTime()>e.connectorPlaces.lastLoad.getTime()+timeToReloadData){connectorPlacesIsLoading=!0;var t=_.clone(cacheParams);t.venueId=t.venueId||e._id,loadConnectorPlaces(t,function(n,t){dataStore.connectorPlaces=_.keyBy(_.reject(dataStore.connectorPlaces,{venueId:e._id}),"_id"),addConnectorPlaces(t),dataStore.venues[e._id].connectorPlaces.lastLoad=new Date,a(n)})}else a()},function(){var n=[];_.forEach(t,function(a){var t=null,i=null,c=_.values(_.omit(_.clone(a.connectorPlaces),["lastLoad"]));_.isFinite(e.floor)&&(c=_.filter(c,function(a){return a.floor==e.floor||_.isNull(a.floor)})),e.latitudeMin&&e.latitudeMax&&(t=_.intersection(_.filter(c,function(a){return a.latitude>e.latitudeMin}),_.filter(c,function(a){return a.latitude<e.latitudeMax}))),e.longitudeMin&&e.longitudeMax&&(i=_.intersection(_.filter(c,function(a){return a.longitude>e.longitudeMin}),_.filter(c,function(a){return a.longitude<e.longitudeMax}))),t&&i?c=_.intersection(t,i):t?c=t:i&&(c=i),n=_.concat(n,c)}),connectorPlacesIsLoading=!1,deStackConnectorPlaces(),a(null,n)})})};api.getConnectorPlaces=getConnectorPlaces;var getLayers=function(e,a){if(layersIsLoading){var n={params:e,cb:a};return void layersStack.push(n)}var t=_.pick(e,["latitudeMin","latitudeMax","longitudeMin","longitudeMax"]);getVenues(t,function(n,t){async.each(t,function(e,a){var n=new Date;if(!e.layers||!e.layers.lastLoad||n.getTime()>e.layers.lastLoad.getTime()+timeToReloadData){layersIsLoading=!0;var t=_.clone(cacheParams);t.venueId=t.venueId||e._id,loadLayers(t,function(n,t){dataStore.layers=_.keyBy(_.reject(dataStore.layers,{venueId:e._id}),"_id"),addLayers(t),dataStore.venues[e._id].layers.lastLoad=new Date,a(n)})}else a()},function(){var n=[];_.forEach(t,function(a){var t=_.map(_.values(_.omit(_.clone(a.layers),["lastLoad"])),function(e){return e.venue=_.omit(a,["layers","places"]),e});_.isFinite(e.floor)&&(t=_.filter(t,function(a){return a.floor==e.floor||_.isNull(a.floor)})),n=_.concat(n,t)}),layersIsLoading=!1,deStackLayers(),a(null,n)})})};api.getLayers=getLayers,api.getPlaceType=getPlaceType,api.getPlaceLists=getPlaceLists,api.getPlaceList=getPlaceList,api.getPlaces=getPlaces,api.getPlace=getPlace;var getBeacon=function(e,a){if("string"==typeof e||e.id||e.beaconId){var n=e.id||e.beaconId||e;query.get("/beacons/"+n,{},function(e){a(null,e)},function(e){a(e)})}else if(e.payload){var t={payload:e.payload};query.getOne("/beacons",t,function(e){a(null,e)},function(e){a(e)})}else{var i={};if((e.name||e.beaconName)&&(i.name=e.name||e.beaconName),(e.alias||e.beaconAlias)&&(i.alias=e.alias||e.beaconAlias),e.venueId)i.venueId=e.venueId,query.getOne("/beacons",i,function(e){a(null,e)},function(e){a(e)});else{var c=e.venue||{};e.venueName&&(c.name=e.venueName),e.venueAlias&&(c.alias=e.venueAlias),getVenue(c,function(n,t){t?(e.venueId=t._id,getBeacon(e,a)):a(new Error("Venue not found"))})}}};api.getBeacon=getBeacon;var sendAccess=function(e,a){query.get("/access/"+e,{},function(e){a(null,e)},function(e){a(e)})};api.sendAccess=sendAccess;var getDirections=function(e,a,n){var t={from:e,to:a};query.post("/directions",t,function(e){n(null,e)},function(e){n(e)})};api.getDirections=getDirections,api.invalidateCache=invalidateCache,api.setPlacesOptions=setPlacesOptions,api.initialize=initialize,_.assign(api,{venues:{get:getVenue,list:getVenues},places:{get:getPlace,list:getPlaces},layers:{list:loadLayers},connectorPlaces:{list:getConnectorPlaces},beacons:{get:getBeacon},placeTypes:{get:getPlaceType},placeLists:{get:getPlaceList,list:getPlaceLists,places:function(e,a){return getPlaces({placeListId:e},a)}}}),module.exports=api;
},{"./utils/query":36,"async":1,"lodash":5}],16:[function(require,module,exports){
"use strict";function extensions(e){return{_originalLayers:[],_visibleLayers:[],_staticLayers:[],_rbush:[],_cachedRelativeBoxes:[],_calculedRelativeBoxes:[],_margin:0,initialize:function(t){e.prototype.initialize.call(this,t),this._margin=t.margin||0,this._rbush=rbush(),this._originalLayers=[],this._visibleLayers=[],this._staticLayers=[],this._cachedRelativeBoxes=[],this._calculedRelativeBoxes=[]},addLayer:function(t){return"marker"in t||"options"in t&&"icon"in t.options?("marker"in t&&(t.getShape()&&(this._staticLayers.push(t.getShape()),e.prototype.addLayer.call(this,t.getShape())),t=t.getMarker()),this._originalLayers.push(t),void(this._map&&this._maybeAddLayerToRBush(t))):(this._staticLayers.push(t),void e.prototype.addLayer.call(this,t))},removeLayer:function(t){var i=this,o=null;t.getShape&&t.getMarker&&(o=t.getShape(),t=t.getMarker()),i._rbush.remove(i._calculedRelativeBoxes[t._leaflet_id]),delete this._cachedRelativeBoxes[t._leaflet_id],delete this._calculedRelativeBoxes[t._leaflet_id],o&&e.prototype.removeLayer.call(this,o),e.prototype.removeLayer.call(this,t);var s;s=this._originalLayers.indexOf(t),-1!==s&&this._originalLayers.splice(s,1),s=this._visibleLayers.indexOf(t),-1!==s&&this._visibleLayers.splice(s,1),s=this._staticLayers.indexOf(o),-1!==s&&this._staticLayers.splice(s,1)},clearLayers:function(){this._rbush=rbush(),this._originalLayers=[],this._visibleLayers=[],this._staticLayers=[],this._cachedRelativeBoxes=[],this._calculedRelativeBoxes=[],e.prototype.clearLayers.call(this)},onAdd:function(e){this._map=e,_.forEach(this._staticLayers,function(t){e.addLayer(t)}),this._onZoomEnd(),e.on("zoomend",this._onZoomEnd,this)},onRemove:function(t){_.forEach(this._staticLayers,function(e){t.removeLayer(e)}),t.off("zoomend",this._onZoomEnd,this),e.prototype.onRemove.call(this,t)},_getIndex:function(e,t){var i=[];return _.forEach(e,function(e){i.push(e[t])}),i},_maybeAddLayerToRBush:function(t){var i=this._rbush,o=this._cachedRelativeBoxes[t._leaflet_id],s=!1;if(!o){e.prototype.addLayer.call(this,t),s=!0;var r=this._getIconBox(t._icon),a=this._getRelativeBoxes(t._icon.children,r);a.push(r),o=[],o[0]=_.min(this._getIndex(a,0)),o[1]=_.min(this._getIndex(a,1)),o[2]=_.max(this._getIndex(a,2)),o[3]=_.max(this._getIndex(a,3)),this._cachedRelativeBoxes[t._leaflet_id]=o}o=this._positionBox(this._map.latLngToLayerPoint(t.getLatLng()),o),this._calculedRelativeBoxes[t._leaflet_id]=o,!i.search(o).length>0?(s||e.prototype.addLayer.call(this,t),this._visibleLayers.push(t),i.insert(o)):e.prototype.removeLayer.call(this,t)},_getIconBox:function(e){var t=window.getComputedStyle(e);return[parseInt(t.marginLeft),parseInt(t.marginTop),parseInt(t.marginLeft)+parseInt(t.width),parseInt(t.marginTop)+parseInt(t.height)]},_getRelativeBoxes:function(e,t){var i=this,o=[];return _.forEach(e,function(e){var s=[e.offsetLeft,e.offsetTop,e.offsetLeft+e.offsetWidth,e.offsetTop+e.offsetHeight];if(s=i._offsetBoxes(s,t),o.push(s),e.children.length){var r=t,a=window.getComputedStyle(e).position;("absolute"===a||"relative"===a)&&(r=s),o=o.concat(i._getRelativeBoxes(e.children,r))}}),o},_offsetBoxes:function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[0],e[3]+t[1]]},_positionBoxes:function(e,t){for(var i=[],o=0;o<t.length;o++)i.push(this._positionBox(e,t[o]));return i},_positionBox:function(e,t){return[t[0]+e.x-this._margin,t[1]+e.y-this._margin,t[2]+e.x+this._margin,t[3]+e.y+this._margin]},_onZoomEnd:function(){var t=this;_.forEach(this._visibleLayers,function(i){e.prototype.removeLayer.call(t,i)}),this._rbush=rbush(),_.forEach(this._originalLayers,function(e){t._maybeAddLayerToRBush(e)})}}}var rbush=require("rbush"),_=require("lodash");L.LayerGroup.Collision=L.LayerGroup.extend(extensions(L.LayerGroup)),L.FeatureGroup.Collision=L.FeatureGroup.extend(extensions(L.FeatureGroup)),L.GeoJSON.Collision=L.GeoJSON.extend(extensions(L.GeoJSON));var isMSIE8="ActiveXObject"in window&&document.documentMode<9;isMSIE8&&(L.LayerGroup.Collision=L.LayerGroup,L.FeatureGroup.Collision=L.FeatureGroup,L.GeoJSON.Collision=L.GeoJSON),L.LayerGroup.collision=function(e){return new L.LayerGroup.Collision(e)},L.FeatureGroup.collision=function(e){return new L.FeatureGroup.Collision(e)},L.GeoJSON.collision=function(e){return new L.GeoJSON.Collision(e)};
},{"lodash":5,"rbush":8}],17:[function(require,module,exports){
"use strict";module.exports={SERVER:"https://www.mapwize.io",MAPBOX_MAPID:"mapwize.o4f92a31",MAPBOX_ACCESSTOKEN:"pk.eyJ1IjoibWFwd2l6ZSIsImEiOiJjaWd0NDJmNWQwMGFhdXlseGRpd29lMm50In0.z3m6qYCqQdlEBXcUhCLzeA",IMAGES_PATH:"./images",baseUrlQrCodes:"http://mwz.io",SDK_NAME:"mapwize.js",SDK_VERSION:"1.5.0",CLIENT_APP_NAME:window.location?window.location.host||"":"",analyticsId:"UA-70504113-8"};
},{}],18:[function(require,module,exports){
"use strict";function getDirectionsOnFloor(o){return _.filter(directionsComponent.route,function(e){return e.floor==o})}function floorChanged(o){if(directionsComponent){directionsLayer.clearLayers(),endMarker&&outdoorDirectionsLayer.removeLayer(endMarker);var e=getDirectionsOnFloor(o.floor);_.forEach(e,function(e){if(drawPath(e,directionsLayer),_.isFinite(e.fromFloor)){var r=_selectConnectorIcon(e.connectorTypeFrom);if(r){var i=_.first(e.path),n=L.marker(i,{zIndexOffset:1e3,icon:L.divIcon({iconSize:[24,20],iconAnchor:[12,10],className:"mwzDirectionChangeFloorIcon",html:'<div><img src="https://www.mapwize.io/sdk/mapwize.js/images/'+r+'.png" style="height:20px; width=20px;display: inline-block;vertical-align: middle;"/></div>'})}).addTo(directionsLayer);n.on("click",function(){map.setFloor(e.fromFloor)})}}if(_.isFinite(e.toFloor)){var r=_selectConnectorIcon(e.connectorTypeTo),i=_.last(e.path),n=L.marker(i,{zIndexOffset:1e3,icon:L.divIcon({iconSize:[60,20],iconAnchor:[30,10],className:"mwzDirectionChangeFloorIcon",html:"<div>"+(r?'<img src="https://www.mapwize.io/sdk/mapwize.js/images/'+r+'.png" style="height:20px; width=20px;display: inline-block;vertical-align: middle;"/>':"")+(e.toFloor>o.floor?'<div class="part up">&#10142;</div>':'<div class="part down">&#10142;</div>')+'&nbsp;<div class="part toFloor">'+e.toFloor+"</div></div>"})}).addTo(directionsLayer);n.on("click",function(){map.setFloor(e.toFloor)})}});var r=_.find(directionsComponent.route,function(o){return _.isNull(o.floor)&&o.isEnd});r&&drawMarker()}}function drawPath(o,e){var r=L.polyline(o.path,{stroke:!0,color:"#C51586",opacity:1}).addTo(e);L.polylineDecorator(r,{patterns:[{repeat:200,offset:100,endOffset:20,symbol:L.Symbol.arrowHead({polygon:!0,pixelSize:12,pathOptions:{fill:!0,fillColor:"#FFFFFF",fillOpacity:1,stroke:!0,color:"#C51586",opacity:1,weight:3,lineCap:"square",lineJoin:"miter"}})}]}).addTo(e),o.isEnd&&drawMarker()}function drawOutdoor(){var o=_.filter(directionsComponent.route,function(o){return _.isNull(o.floor)});_.forEach(o,function(o){drawPath(o,outdoorDirectionsLayer),o.isEnd&&drawMarker()})}function drawMarker(){if(!endMarker&&directionsComponent){var o=_.find(directionsComponent.route,{isEnd:!0}),e=_.last(o.path);endMarker=L.marker(e,{zIndexOffset:1e3,icon:new L.divIcon({className:"mapwize-marker-icon",iconSize:[30,40],iconAnchor:[15,40]})})}endMarker&&!outdoorDirectionsLayer.hasLayer(endMarker)&&outdoorDirectionsLayer.addLayer(endMarker)}var _=require("lodash"),async=require("async"),config=require("../config"),Api=require("../api"),analytics=require("../analytics"),polylinedecorator=require("leaflet-polylinedecorator"),map=null,directionsLayer=null,outdoorDirectionsLayer=null,directionsComponent=null,zoomHideDirection=!0,endMarker=null,_selectConnectorIcon=function(o){return"ELEVATOR"===o?"elevator_blank":"STAIRS"===o?"stairs_blank":"RAMP"===o?"ramp_blank":"ESCALATOR"===o?"escalator_blank":void 0},initialize=function(o){map=o,directionsLayer=L.featureGroup(),outdoorDirectionsLayer=L.featureGroup(),map.addLayer(outdoorDirectionsLayer),map.on("zoomend",function(){map.getZoom()>15?(zoomHideDirection&&floorChanged({floor:map.getFloor()}),zoomHideDirection=!1,map.hasLayer(directionsLayer)||map.addLayer(directionsLayer)):(zoomHideDirection=!0,map.hasLayer(directionsLayer)&&map.removeLayer(directionsLayer),drawMarker())})},startDirections=function(o){directionsComponent=o,zoomHideDirection=!0,map.floorControl._updateDirection(_.map(directionsComponent.route,"floor")),map.fitBounds(_.chunk(directionsComponent.bounds,2)),map.setFloor(_.first(directionsComponent.route).floor),map.hasLayer(directionsLayer)||map.addLayer(directionsLayer),directionsLayer.bringToFront(),floorChanged({floor:map.getFloor()}),drawOutdoor(),map.fire("directionsStart",{directions:o}),map.on("floorChanged",floorChanged),analytics.event("direction","start"),directionsComponent.from.placeId&&Api.getPlace(directionsComponent.from.placeId,function(o,e){e&&analytics.sendEvent("place","directionFrom",{objectId:e._id,objectName:e.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.owner})}),directionsComponent.to.placeId&&Api.getPlace(directionsComponent.to.placeId,function(o,e){e&&analytics.sendEvent("place","directionTo",{objectId:e._id,objectName:e.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.owner})})},stopDirections=function(){map.off("floorChanged",floorChanged),directionsComponent=null,map.floorControl._updateDirection([]),directionsLayer.clearLayers(),outdoorDirectionsLayer.clearLayers(),endMarker=null,map.fire("directionsStop",{}),analytics.event("direction","stop")},showDirections=function(o,e,r,i){Api.getDirections(o,e,function(o,e){o?i(o):(startDirections(e),i(null,e))})};exports.initialize=initialize,exports.startDirections=startDirections,exports.stopDirections=stopDirections,exports.showDirections=showDirections;
},{"../analytics":14,"../api":15,"../config":17,"async":1,"leaflet-polylinedecorator":3,"lodash":5}],19:[function(require,module,exports){
"use strict";var leaflet=require("./leaflet");require("./mapwize"),module.exports=leaflet;
},{"./leaflet":22,"./mapwize":24}],20:[function(require,module,exports){
"use strict";var _=require("lodash"),buttonClass="floor-button",FloorControl=L.Control.extend({buttons:[],directionOnFloors:[],options:{position:"bottomright"},onAdd:function(o){var t="leaflet-control-floor",n=L.DomUtil.create("div","mapwize-control "+t+" leaflet-bar");n.id="floorControllerContainer",n.style.overflow="auto",L.DomEvent.on(n,"wheel",L.DomEvent.stopPropagation),this.container=n,this.map=o,this.resize(),o.on("floorsChanged",this._updateFloors,this),o.on("floorChanged",this._updateFloors,this);var r=this;return o.on("resize",function(){r.resize()}),n},resize:function(){var o=this.map.getSize().y-this.map.margins.bottom-this.map.margins.top-80;this.container.style.maxHeight=o+"px",this.container.scrollHeight>o?this.touchstartlistener||(this.touchstartlistener=function(o){L.DomEvent.stopPropagation(o)},L.DomEvent.on(this.container,"touchstart",this.touchstartlistener)):this.touchstartlistener&&(L.DomEvent.off(this.container,"touchstart",this.touchstartlistener),this.touchstartlistener=null)},onRemove:function(o){o.off("floorsChanged",this._updateFloors,this)},_createButton:function(o,t,n,r){var e=L.DomUtil.create("a",n,r);return e.innerHTML=o,e.href="#",e.title=t,e},_addEventOnButton:function(o,t){L.DomEvent.on(o,"mousedown dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",function(){this._selectFloor(t)},this)},_selectFloor:function(o){_.forEach(this.buttons,function(t){t.title===o.toString()?t.style.backgroundColor="#ddd":t.style.backgroundColor="#fff"}),this._map.setFloor(o)},_updateDirection:function(o){var t=this;t.directionOnFloors=o,_.forEach(t.buttons,function(o){-1!==_.indexOf(t.directionOnFloors,parseInt(o.title))?o.className=buttonClass+" hasDirection":o.className=buttonClass})},_updateFloors:function(o){var t=this,n=this.container,r=null;n.innerHTML="",this.buttons=[];var e=o.floors,s=o.floor;e.length?n.style.display="block":n.style.display="none",_.forEach(e,function(o){var e=t._createButton(""+o,""+o,buttonClass+(-1!==_.indexOf(t.directionOnFloors,o)?" hasDirection":""),n,t._showFloors);e.id="floor-button-"+o,o===s?(e.style.backgroundColor="#ddd",r=e):e.style.backgroundColor="#fff",t._addEventOnButton(e,o),t.buttons.push(e)}),this.resize(),r&&(n.scrollTop=r.offsetTop-60)}});L.Map.mergeOptions({floorControl:!0}),L.Map.addInitHook(function(){}),module.exports.FloorControl=FloorControl,module.exports.floorControl=function(o){return new FloorControl(o)};
},{"lodash":5}],21:[function(require,module,exports){
"use strict";var config=require("../config"),analytics=require("../analytics"),Layer=L.TileLayer.extend({options:{},initialize:function(t,i){this.options.minZoom=16,this.options.maxZoom=23,this.options.maxNativeZoom=21,this.options.bounds=L.latLngBounds(L.latLng(t.latitudeMin,t.longitudeMin),L.latLng(t.latitudeMax,t.longitudeMax)),this.options.opacity=1,this.options.tms=!1,this.options.attribution="Contexeo",L.Util.setOptions(this,i),L.TileLayer.prototype.initialize.call(this,t.tilesUrlTemplate,this.options),this.floor=t.floor,this.ctxLayer=t},updateDisplay:function(t,i){this.floor===t?i.hasLayer(this)||(i.addLayer(this),analytics.sendEvent("layer","view",{objectId:this.ctxLayer._id,objectName:this.ctxLayer.name,venueId:this.ctxLayer.venue._id,venueName:this.ctxLayer.venue.name,organizationId:this.ctxLayer.owner})):i.hasLayer(this)&&i.removeLayer(this)}});module.exports.Layer=Layer,module.exports.layer=function(t,i){return new Layer(t,i)};
},{"../analytics":14,"../config":17}],22:[function(require,module,exports){
module.exports=window.L=require("leaflet/dist/leaflet-src");
},{"leaflet/dist/leaflet-src":4}],23:[function(require,module,exports){
"use strict";function isId(e){return idRegex.test(e)}var floorControl=require("./layers/floor_control").floorControl,venueFeatureGroup=require("./venues/venue_feature_group").venueFeatureGroup,placeFeatureGroup=require("./places/place_feature_group").placeFeatureGroup,placeFeature=require("./places/place_feature"),markerFeatureGroup=require("./markers/marker_feature_group").markerFeatureGroup,markerFeature=require("./markers/marker_feature"),LAYER=require("./layers/layer").layer,config=require("./config"),userPosition=require("./position/user_position"),userPositionControl=require("./position/user_position_control"),access=require("./access/access"),qrcode=require("./qrcode/qrcode"),directions=require("./direction/direction"),roundBounds=require("./utils/bounds"),Api=require("./api"),async=require("async"),_=require("lodash"),urlParse=require("url-parse"),analytics=require("./analytics"),$=require("jquery"),idRegex=/^[0-9A-F]{24}$/i,LMap=L.Map.extend({options:{attributionControl:!1,apiKey:null,displayOutdoorMap:!0,displayLayers:!0,displayLayersOptions:{},displayVenues:!0,displayVenuesOptions:{},displayPlaces:!0,displayPlacesOptions:{},displayFloorControl:!0,floorControlOptions:{},accessControlOptions:{},cacheParams:{},center:L.latLng(0,0),zoom:2,maxZoom:23,floor:0,showUserPosition:!0,showUserPositionControl:!0,useBrowserLocation:!0,marginTop:0,marginBottom:0},initialize:function(e,o,t){var n=this;o&&o.center&&o.center.latitude&&o.center.longitude&&(o.center=L.latLng(o.center.latitude,o.center.longitude)),L.Util.setOptions(this,o),L.Map.prototype.initialize.call(this,e,this.options),o.apiKey&&(config.apiKey=o.apiKey),analytics.initialize(config.apiKey),L.Path.CLIP_PADDING=1,L.Icon.Default.imagePath=L.Icon.Default.imagePath||"images/leaflet",n._ctxLayers={},n._floors=[],n._floor=null,n._lastFloor=n.options.floor,n.options.displayOutdoorMap&&n._displayOutdoorMap(),n.options.showUserPosition&&(userPosition.initialize(n,{useBrowserLocation:n.options.useBrowserLocation}),n.options.showUserPositionControl&&userPositionControl.userPositionControl().addTo(n)),n.margins={},n.setTopMargin(n.options.marginTop),n.setBottomMargin(n.options.marginBottom),Api.invalidateCache(),Api.initialize(n.options.cacheParams,function(){n.options.displayLayers&&(n._updateLayers(),n.on("moveend",function(){n._updateLayers()})),n._venueFeatureGroup=null,n.options.displayVenues&&(n._venueFeatureGroup=venueFeatureGroup(n,n.options.displayVenuesOptions),n._venueFeatureGroup.addTo(n),n._venueFeatureGroup.on("venueClick",function(e){n.fire("venueClick",e)},n)),n._markerFeatureGroup=markerFeatureGroup(n),n._markerFeatureGroup.on("markerClick",function(e){n.fire("markerClick",e)},n),n._placeFeatureGroup=null,n.options.displayPlaces&&(n._placeFeatureGroup=placeFeatureGroup(n,n.options.displayPlacesOptions),n._placeFeatureGroup.addTo(n),n._placeFeatureGroup.on("placeClick",function(e){n.fire("placeClick",e)},n)),n.options.displayFloorControl&&(n.floorControl=floorControl(n.options.floorControlOptions),n.addControl(n.floorControl)),qrcode.initialize(n),access.initialize(n),directions.initialize(n),t&&_.isFunction(t)&&t()},!0)},_displayOutdoorMap:function(){var e=L.tileLayer("https://{s}.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:23,maxNativeZoom:21,subdomains:"abcd",id:config.MAPBOX_MAPID,accessToken:config.MAPBOX_ACCESSTOKEN});e.addTo(this)},_updateLayers:function(e){var o=this,t=this.getBounds(),n=this.getZoom();if(16>n)return o._mergeLayers([]),o._updateFloors([]),void o._displayLayer();var i=_.clone(this.options.displayLayersOptions.filter)||{};i.zoom=n;var a=roundBounds(t,n);i.latitudeMin=a.getSouth(),i.latitudeMax=a.getNorth(),i.longitudeMin=a.getWest(),i.longitudeMax=a.getEast(),Api.getLayers(i,function(e,t){e||n!=o.getZoom()||(o._mergeLayers(t),o._updateFloors(t),o._displayLayer())})},_mergeLayers:function(e){var o=_.keyBy(e,"_id");this._removeLayers(o),this._addLayers(o)},_removeLayers:function(e){var o=this;_.forEach(o._ctxLayers,function(t,n){e[n]||(o.hasLayer(t)&&o.removeLayer(t),delete o._ctxLayers[n])})},_addLayers:function(e){var o=this,t={apiKey:o.options.apiKey},n=[];if(_.forEach(e,function(e,i){!o._ctxLayers[i]&&_.isString(e.tilesUrlTemplate)&&(o._ctxLayers[i]=LAYER(e,t),n.push(e))}),n.length){var i=_.uniqBy(n,"venueId");_.forEach(i,function(e){analytics.sendEvent("venue","view",{objectId:e.venue._id,objectName:e.venue.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.venue.owner})})}},_updateFloors:function(e){var o=[];_.forEach(e,function(e){_.isString(e.tilesUrlTemplate)&&o.push(parseInt(e.floor))}),o=_.uniq(o),o.sort(function(e,o){return o-e}),this._floors=_(o).value();var t=this._getDefaultFloor(o);this.setFloor(t),this.fireEvent("floorsChanged",{floors:this._floors,floor:this._floor}),this.fireEvent("floorsChange",{floors:this._floors,floor:this._floor})},_getDefaultFloor:function(e){var o=this,t=o._floor;return e.length?(t||0===t||(t=o._lastFloor),_.includes(e,t)||(t=null,_.forEach(e,function(e){(!t&&0!==t||0===e||Math.abs(e)<=Math.abs(t)&&e>0)&&(t=e)}))):t=null,t},_displayLayer:function(){var e=this;_.forEach(e._ctxLayers,function(o){o.updateDisplay(e._floor,e)})},centerOnCoordinates:function(e,o,t,n){this.setFollowUserMode(!1),this.setView([e,o],n),t&&this.setFloor(t)},centerOnBeacon:function(e){e&&(this.centerOnCoordinates(e.location.lat,e.location.lon,e.floor,19),analytics.sendEvent("beacon","centerOn",{objectId:e._id,objectName:e.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.owner}))},centerOnVenue:function(e){var o=this;if("string"==typeof e)Api.getVenue(e,function(e,t){if(t){var n=L.latLng(t.latitudeMin,t.longitudeMin),i=L.latLng(t.latitudeMax,t.longitudeMax);o.setFollowUserMode(!1),o.fitBounds([n,i]),analytics.sendEvent("venue","centerOn",{objectId:t._id,objectName:t.name,venueId:t._id,venueName:t.name,organizationId:t.owner})}else console.error("Venue not found : ",e)});else if(e&&e.latitudeMin&&e.longitudeMin&&e.latitudeMax&&e.longitudeMax){var t=L.latLng(e.latitudeMin,e.longitudeMin),n=L.latLng(e.latitudeMax,e.longitudeMax);this.setFollowUserMode(!1),this.fitBounds([t,n]),analytics.sendEvent("venue","centerOn",{objectId:e._id,objectName:e.name,venueId:e._id,venueName:e.name,organizationId:e.owner})}else console.error("Bad usage")},centerOnPlace:function(e){var o=this;if(this._placeFeatureGroup)if("string"==typeof e){var t=e;if(o._placeFeatureGroup._placesFeatures[t]){var n=o._placeFeatureGroup._placesFeatures[t];o._centerOnPlaceFeature(n),analytics.sendEvent("place","centerOn",{objectId:n._id,objectName:n.name,venueId:n.venue._id,venueName:n.venue.name,organizationId:n.venue.owner})}else Api.getPlace(t,function(e,t){t?(o._centerOnPlaceFeature(placeFeature.placeFeature(t)),analytics.sendEvent("place","centerOn",{objectId:t._id,objectName:t.name,venueId:t.venue._id,venueName:t.venue.name,organizationId:t.venue.owner})):console.error("Place not found : ",e)})}else this._centerOnPlaceFeature(placeFeature.placeFeature(e)),analytics.sendEvent("place","centerOn",{objectId:e._id,objectName:e.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.venue.owner})},_centerOnPlaceFeature:function(e){this.setFollowUserMode(!1),this.fitBounds(e.getBounds()),this.setFloor(e.getFloor())},hidePlaces:function(e){var o=this;this._parsePlaceList(e,function(e){o._placeFeatureGroup._ignorePlaces(e)})},setPlaceStyle:function(e,o){this._placeFeatureGroup&&this._placeFeatureGroup.setPlaceStyle(e,o)},_parsePlaceList:function(e,o){if(this._placeFeatureGroup){var t=_.filter(e,function(e){return!isId(e)}),n=_.filter(e,function(e){return isId(e)});t.length?this._getPlacesByNames(t,function(e,t){t&&(t=_.map(t,function(e){return e._id})),o(_.union(n,t))}):o(n)}},_getPlacesByNames:function(e,o){var t={};t.names=e,Api.getPlaces(t,o)},addMarker:function(e){this._markerFeatureGroup.addMarker(e)},removeMarkers:function(){this._markerFeatureGroup.removeMarkers()},setFloor:function(e){if(_.isFinite(e)&&e!==this._floor){this._lastFloor=this._floor,this._floor=e;var o=this.getUserPosition();o&&e!=o.floor&&this.setFollowUserMode(!1),this.fireEvent("floorChanged",{floors:this._floors,floor:this._floor}),this.fireEvent("floorChange",{floors:this._floors,floor:this._floor}),this._displayLayer()}},getFloor:function(){return this._floor},getFloors:function(){return this._floors},loadUrl:function(e,o){o||(o=_.noop);var t=function(e,t){e&&console.error("loadUrl",e),o(e,t)},n=urlParse(e,!0);if(n){var i=n.query,a=n.pathname,r=this;i.k?this.access(i.k,function(){r._computeUrlPath(a,i.z,t)}):r._computeUrlPath(a,i.z,t),analytics.event("map","loadUrl",a)}else t(new Error("Invalid url format"))},fitBounds:function(e,o){if(o||(o={}),o.maxZoom=o.maxZoom||21,!o.paddingTopLeft){var t=_.max([0,this.margins.top]),n=_.max([0,this.margins.left]);o.paddingTopLeft=[n,t]}if(!o.paddingBottomRight){var i=_.max([0,this.margins.bottom]),a=_.max([60,this.margins.right]);o.paddingBottomRight=[a,i]}L.Map.prototype.fitBounds.call(this,e,o)},_computeUrlPath:function(e,o,t){var n=this,i=!1,a=/^\/(\w+)$/,r=/^\/b\/(\w+)\/(\w+)$/,s=/^\/v\/(\w+)$/,l=/^\/v\/(\w+)\/([0-9]+)$/,c=/^\/p\/(\w+)\/(\w+)$/,u=/^\/c\/([0-9]+\.?[0-9]*)\/([0-9]+\.?[0-9]*)$/,p=/^\/c\/([0-9]+\.?[0-9]*)\/([0-9]+\.?[0-9]*)\/([0-9]+)$/,d=/^\/f\/(\w+)\/t\/p\/(\w+)\/(\w+)$/,f=/^\/f\/b\/(\w+)\/(\w+)\/t\/p\/(\w+)\/(\w+)$/,_=/^\/f\/p\/(\w+)\/(\w+)\/t\/p\/(\w+)\/(\w+)$/,h=/^\/f\/c\/([0-9]+\.?[0-9]*)\/([0-9]+\.?[0-9]*)\/([0-9]+)\/t\/p\/(\w+)\/(\w+)$/,m=e.match(a);if(m){i=!0;var v=m,g={};g.payload=config.baseUrlQrCodes+"/"+v[1],Api.getBeacon(g,function(e,i){e?t(e):i.properties.accessKey&&i.properties.accessKey.key?n.access(i.properties.accessKey.key,function(){n.centerUserOnBeacon(i),o&&n.setZoom(o),t()}):(n.centerUserOnBeacon(i),o&&n.setZoom(o),t())})}if(m=e.match(r)){i=!0;var y=m;Api.getBeacon({venueAlias:y[1],beaconAlias:y[2]},function(e,i){e?t(e):(n.centerUserOnBeacon(i),o&&n.setZoom(o),t())})}if(m=e.match(s)){i=!0;var F=m;Api.getVenue({venueAlias:F[1]},function(e,i){e?t(e):(n.centerOnVenue(i),o&&n.setZoom(o),t())})}if(m=e.match(l)){i=!0;var P=m;Api.getVenue({venueAlias:P[1]},function(e,i){e?t(e):(n.centerOnVenue(i),n.setFloor(parseInt(P[2])),o&&n.setZoom(o),t())})}if(m=e.match(c)){i=!0;var L=m;Api.getPlace({venueAlias:L[1],placeAlias:L[2]},function(e,i){e?t(e):(n.centerOnPlace(i),o&&n.setZoom(o),t())})}if(m=e.match(u)){i=!0;var w=m;n.setView([w[1],w[2]],o||18),t()}if(m=e.match(p)){i=!0;var M=m;n.setView([M[1],M[2]],o||18),n.setFloor(parseInt(M[3])),o&&n.setZoom(o),t()}if(m=e.match(d)){i=!0;var U=m;async.parallel({beacon:function(e){Api.getBeacon({payload:config.baseUrlQrCodes+"/"+U[1]},function(o,t){e(o,t)})},place:function(e){Api.getPlace({venueAlias:U[2],placeAlias:U[3]},function(o,t){e(o,t)})}},function(e,o){if(e)t(e);else{var i={lat:o.beacon.location.lat,lon:o.beacon.location.lon,floor:o.beacon.floor};n.showDirections(i,{placeId:o.place._id},{},function(e){t(e)})}})}if(m=e.match(f)){i=!0;var A=m,b=A[1],O=A[2],I=A[3],C=A[4];async.parallel({beacon:function(e){Api.getBeacon({beaconAlias:O,venueAlias:b},function(o,t){e(o,t)})},place:function(e){Api.getPlace({venueAlias:I,placeAlias:C},function(o,t){e(o,t)})}},function(e,o){if(e)t(e);else{n.centerUserOnBeacon(o.beacon,!0);var i={lat:o.beacon.location.lat,lon:o.beacon.location.lon,floor:o.beacon.floor};n.showDirections(i,{placeId:o.place._id},{},function(e){t(e)})}})}if(m=e.match(_)){i=!0;var k=m,B={venueAlias:k[1],placeAlias:k[2]},G={venueAlias:k[3],placeAlias:k[4]};async.parallel({placeFrom:function(e){Api.getPlace(B,function(o,t){e(o,t)})},placeTo:function(e){Api.getPlace(G,function(o,t){e(o,t)})}},function(e,o){e?t(e):n.showDirections({placeId:o.placeFrom._id},{placeId:o.placeTo._id},{},function(e){t(e)})})}if(m=e.match(h)){i=!0;var x=m,q={venueAlias:x[4],placeAlias:x[5]},E={lat:parseFloat(x[1]),lon:parseFloat(x[2]),floor:parseInt(x[3])};Api.getPlace(q,function(e,o){e?t(e):n.showDirections(E,{placeId:o._id},{},function(e){t(e)})})}i||t(new Error("Unknown url format"))},centerUserOnBeacon:function(e,o){this.unlockUserPosition(),this.newUserPositionMeasurement({latitude:e.location.lat,longitude:e.location.lon,floor:e.floor,accuracy:1,validity:12e4,source:e.type}),o||this.setFollowUserMode(!0),analytics.sendEvent("beacon","centerUser",{objectId:e._id,objectName:e.name,venueId:e.venue._id,venueName:e.venue.name,organizationId:e.owner})},setTopMargin:function(e){this.margins.top=e,$(".leaflet-top").css("top",e),this.floorControl&&this.floorControl.resize()},setBottomMargin:function(e){this.margins.bottom=e,$(".leaflet-bottom").css("bottom",e),this.floorControl&&this.floorControl.resize()},refresh:function(){Api.invalidateCache(),this.options.displayLayers&&this._updateLayers(),this._placeFeatureGroup&&(this._placeFeatureGroup._clearPlaces(),this._placeFeatureGroup._loadPlaces())},setCachePlacesOptions:function(e){Api.setPlacesOptions(e)},getUserPosition:userPosition.getUserPosition,setUserPosition:userPosition.setUserPosition,setUserHeading:userPosition.setUserHeading,newUserPositionMeasurement:userPosition.newUserPositionMeasurement,lockUserPosition:userPosition.lockUserPosition,unlockUserPosition:userPosition.unlockUserPosition,getFollowUserMode:userPosition.getFollowUserMode,setFollowUserMode:userPosition.setFollowUserMode,centerOnUser:userPosition.centerOnUser,access:access.accessKey,startDirections:directions.startDirections,stopDirections:directions.stopDirections,showDirections:directions.showDirections});module.exports.Map=LMap,module.exports.map=function(e,o,t){return new LMap(e,o,t)};
},{"./access/access":13,"./analytics":14,"./api":15,"./config":17,"./direction/direction":18,"./layers/floor_control":20,"./layers/layer":21,"./markers/marker_feature":25,"./markers/marker_feature_group":26,"./places/place_feature":28,"./places/place_feature_group":29,"./position/user_position":30,"./position/user_position_control":31,"./qrcode/qrcode":32,"./utils/bounds":34,"./venues/venue_feature_group":38,"async":1,"jquery":2,"lodash":5,"url-parse":10}],24:[function(require,module,exports){
"use strict";require("./collision"),require("./position/user_position"),require("./position/user_position_control");var layer=require("./layers/layer"),floorControl=require("./layers/floor_control"),placeFeature=require("./places/place_feature"),placeFeatureGroup=require("./places/place_feature_group"),map=require("./map"),config=require("./config"),api=require("./api"),qrcodeControl=require("./qrcode/qrcode_control"),Mapwize={VERSION:require("../package.json").version,layer:layer.layer,Layer:layer.Layer,floorControl:floorControl.floorControl,FloorControl:floorControl.FloorControl,placeFeature:placeFeature.placeFeature,PlaceFeature:placeFeature.PlaceFeature,placeFeatureGroup:placeFeatureGroup.placeFeatureGroup,PlaceFeatureGroup:placeFeatureGroup.PlaceFeatureGroup,qrcodeControl:qrcodeControl.qrcodeControl,QrcodeControl:qrcodeControl.QrcodeControl,map:map.map,Map:map.Map,config:config,api:api};L.Mapwize=Mapwize,window.Mapwize=Mapwize,module.exports=Mapwize;
},{"../package.json":12,"./api":15,"./collision":16,"./config":17,"./layers/floor_control":20,"./layers/layer":21,"./map":23,"./places/place_feature":28,"./places/place_feature_group":29,"./position/user_position":30,"./position/user_position_control":31,"./qrcode/qrcode_control":33}],25:[function(require,module,exports){
"use strict";var MarkerFeature=L.Marker.extend({options:{zIndexOffset:2e3,icon:new L.divIcon({className:"mapwize-marker-icon",iconSize:[30,40],iconAnchor:[15,40]})},initialize:function(e){L.Marker.prototype.initialize.call(this,[e.lat,e.lon]),L.Util.setOptions(this,e),this._floor=e.floor},getFloor:function(){return this._floor}});module.exports.MarkerFeature=MarkerFeature,module.exports.markerFeature=function(e,r){return new MarkerFeature(e,r)};
},{}],26:[function(require,module,exports){
"use strict";function isMarkerOnFloor(r,e){return r.floor===e||_.isUndefined(r.floor)||_.isNull(r.floor)}function getMarkerFeature(r,e){return _.find(e,function(e){return e.getLatLng().lat===r.lat&&e.getLatLng().lng===r.lon&&e.getFloor()===r.floor})}var markerFeature=require("./marker_feature"),_=require("lodash"),Api=require("../api"),MarkerFeatureGroup=L.FeatureGroup.extend({options:{},initialize:function(r,e){L.FeatureGroup.prototype.initialize.call(this,e),L.Util.setOptions(this,e),this._map=r,this._markerPositions=[],this._markersFeatures=[],this._floor=null;var t=this;r.on("floorChanged",function(){t._loadMarkers()},this)},_loadMarkers:function(){var r=this,e=this._map.getFloor();_.forEach(this._markerPositions,function(t){_.isFinite(t.floor)&&(isMarkerOnFloor(t,e)?r._displayMarker(t):r._hideMarker(t))})},addMarker:function(r){var e=this._map.getFloor(),t=this;if(r.placeId)Api.getPlace({placeId:r.placeId},function(a,i){if(a)console.error(a);else{if(i.marker&&i.marker.latitude&&i.marker.longitude?(r.lat=i.marker.latitude,r.lon=i.marker.longitude):(r.lat=(i.latitudeMax+i.latitudeMin)/2,r.lon=(i.longitudeMax+i.longitudeMin)/2),r.floor=i.floor,isMarkerOnFloor(r,e)){var o=markerFeature.markerFeature(r);o.on("click",function(r){r.floor=t._map.getFloor(),t.fire("markerClick",r)}),t._markersFeatures.push(o),t.addLayer(o)}t._markerPositions.push(r)}});else{if(isMarkerOnFloor(r,e)){var a=markerFeature.markerFeature(r);a.on("click",function(r){r.floor=t._map.getFloor(),t.fire("markerClick",r)}),this._markersFeatures.push(a),this.addLayer(a)}this._markerPositions.push(r)}},removeMarkers:function(){this.clearLayers(),this._markerPositions=[],this._markersFeatures=[]},_removeMarker:function(r){var e=getMarkerFeature(r,this._markersFeatures);this.removeLayer(e),this._markersFeatures=_.without(this._markersFeatures,e),this._markerPositions=_.without(this._markerPositions,r)},_displayMarker:function(r){var e=markerFeature.markerFeature(r);this._markersFeatures.push(e),this.addLayer(e)},_hideMarker:function(r){var e=getMarkerFeature(r,this._markersFeatures);this._markersFeatures=_.without(this._markersFeatures,e),this.removeLayer(e)}});module.exports.MarkerFeatureGroup=MarkerFeatureGroup,module.exports.markerFeatureGroup=function(r,e,t){return new MarkerFeatureGroup(r,e,t)};
},{"../api":15,"./marker_feature":25,"lodash":5}],27:[function(require,module,exports){
"use strict";var stairs_icon=L.icon({iconUrl:"https://www.mapwize.io/sdk/mapwize.js/images/stairs.png",iconRetinaUrl:"https://www.mapwize.io/sdk/mapwize.js/images/stairs@2x.png",iconSize:[20,20],iconAnchor:[10,10]}),ramp_icon=L.icon({iconUrl:"https://www.mapwize.io/sdk/mapwize.js/images/ramp.png",iconRetinaUrl:"https://www.mapwize.io/sdk/mapwize.js/images/ramp@2x.png",iconSize:[20,20],iconAnchor:[10,10]}),escalator_icon=L.icon({iconUrl:"https://www.mapwize.io/sdk/mapwize.js/images/escalator.png",iconRetinaUrl:"https://www.mapwize.io/sdk/mapwize.js/images/escalator@2x.png",iconSize:[20,20],iconAnchor:[10,10]}),elevator_icon=L.icon({iconUrl:"https://www.mapwize.io/sdk/mapwize.js/images/elevator.png",iconRetinaUrl:"https://www.mapwize.io/sdk/mapwize.js/images/elevator@2x.png",iconSize:[20,20],iconAnchor:[10,10]}),ConnectorFeature=L.Marker.extend({options:{icon:new L.divIcon({className:"mapwize-marker-icon",iconSize:[30,40],iconAnchor:[15,40]})},initialize:function(i){i.style&&i.style.markerUrl?i.icon=L.icon({iconUrl:i.style.markerUrl,iconSize:[20,20],iconAnchor:[10,10]}):i.type&&("STAIRS"===i.type&&(i.icon=stairs_icon),"ESCALATOR"===i.type&&(i.icon=escalator_icon),"ELEVATOR"===i.type&&(i.icon=elevator_icon),"RAMP"===i.type&&(i.icon=ramp_icon)),L.Marker.prototype.initialize.call(this,[i.latitude,i.longitude]),L.Util.setOptions(this,i),this._floor=i.floor,this._type=i.type},getFloor:function(){return this._floor},getType:function(){return this._type}});module.exports.ConnectorFeature=ConnectorFeature,module.exports.connectorFeature=function(i,e){return new ConnectorFeature(i,e)};
},{}],28:[function(require,module,exports){
"use strict";var $=require("jquery"),_=require("lodash"),config=require("../config"),analytics=require("../analytics"),hexToRgb=require("../utils/hexToRgb"),PlaceFeature=L.FeatureGroup.extend({options:{},initialize:function(e,t){L.FeatureGroup.prototype.initialize.call(this),L.Util.setOptions(this,t),e.placeType||(e.placeType={style:{strokeColor:"#0033FF",strokeWidth:1,strokeOpacity:.5,fillColor:"#0033FF",fillOpacity:.2,markerUrl:"https://www.mapwize.io/sdk/mapwize.js/images/room.png"}}),e.style=_.defaults(_.omitBy(e.style,function(e){return _.isString(e)&&!e||_.isNull(e)}),e.placeType.style),this.place=e,this.floor=e.floor,this.shape=null,this.marker=null,this.markerPosition=null,"Circle"===e.geometry.type?(this.shape=L.circle([e.geometry.coordinates[1],e.geometry.coordinates[0]],e.geometry.radius),this.shape.setStyle(this._getStyle(e)),this.addLayer(this.shape)):"Point"===e.geometry.type?this.marker=L.GeoJSON.geometryToLayer(e.geometry):(this.shape=L.GeoJSON.geometryToLayer(e.geometry),this.shape.setStyle(this._getStyle(e)),this.addLayer(this.shape));var i=20,l=null;"Point"!==e.geometry.type?(this.place.marker&&this.place.marker.latitude&&this.place.marker.longitude?this.markerPosition=L.latLng(this.place.marker.latitude,this.place.marker.longitude):this.markerPosition=this.shape.getBounds().getCenter(),l=e.style&&e.style.markerUrl?L.divIcon({iconSize:[i,i],iconAnchor:[i/2,i/2],html:this._getHtmlMarker(e,i),className:"mapwize-div-icon"}):new L.Icon.Default,this.marker=L.marker(this.markerPosition,{icon:l})):(this.markerPosition=this.marker.getLatLng(),l=e.style&&e.style.markerUrl?L.divIcon({iconSize:[i,i],iconAnchor:[i/2,i/2],html:this._getHtmlMarker(e,i),className:"mapwize-div-icon"}):new L.Icon.Default,this.marker.setIcon(l)),this.marker&&this.addLayer(this.marker),this.shape&&this.shape.setStyle&&(this.on("mouseover",function(){e.style.fillOpacity>.8?this.shape.setStyle({fillOpacity:e.style.fillOpacity-.2}):this.shape.setStyle({fillOpacity:e.style.fillOpacity+.2})}),this.on("mouseout",function(){this.shape.setStyle({fillOpacity:e.style.fillOpacity})})),this.on("click",function(e){this.fire("placeClick",{e:e,place:this.place,placeFeature:this},!0),analytics.sendEvent("place","click",{objectId:this.place._id,objectName:this.place.name,venueId:this.place.venue._id,venueName:this.place.venue.name,organizationId:this.place.owner})})},_getStyle:function(e){return{color:e.style.strokeColor,weight:e.style.strokeWidth,opacity:e.style.strokeOpacity,fillColor:e.style.fillColor,fillOpacity:e.style.fillOpacity}},_getHtmlMarker:function(e,t){if(e.style.labelBackgroundColor||e.style.labelBackgroundOpacity){var i={r:255,g:255,b:255},l=1;e.style.labelBackgroundColor&&(i=hexToRgb(e.style.labelBackgroundColor)),_.isFinite(e.style.labelBackgroundOpacity)&&(l=e.style.labelBackgroundOpacity);var a="rgba("+i.r+", "+i.g+", "+i.b+", "+l+");";return'<div class="placeIcon stylized" style="background-color: '+a+'"><img class="iconImage" src="'+e.style.markerUrl+'" style="width: '+t+"px;height: "+t+'px;" /> <span class="iconLabel noClickable" style="background-color: '+a+'">'+e.translations[0].title+"</span></div>"}return'<div class="placeIcon"><img class="iconImage" src="'+e.style.markerUrl+'" style="width: '+t+"px;height: "+t+'px;" /> <span class="iconLabel noClickable">'+e.translations[0].title+"</span></div>"},refreshStyle:function(e){if(this.shape&&this.shape.setStyle(this._getStyle(e)),this.marker){var t=20,i=null;i=e.style&&e.style.markerUrl?L.divIcon({iconSize:[t,t],iconAnchor:[t/2,t/2],html:this._getHtmlMarker(e,t),className:"mapwize-div-icon"}):new L.Icon.Default,this.marker.setIcon(i)}},getMarker:function(){return this.marker},getShape:function(){return this.shape},getFloor:function(){return this.floor}});module.exports.PlaceFeature=PlaceFeature,module.exports.placeFeature=function(e,t){return new PlaceFeature(e,t)};
},{"../analytics":14,"../config":17,"../utils/hexToRgb":35,"jquery":2,"lodash":5}],29:[function(require,module,exports){
"use strict";function isPlaceOnFloor(e,c){return e.floor==c||_.isUndefined(e.floor)||_.isNull(e.floor)}function isPlaceNotOnFloor(e,c){return!(e.floor==c)}function isPlaceInPlaces(e,c){return!_.isUndefined(_.find(c,{_id:e._id}))}var placeFeature=require("./place_feature"),connectorFeature=require("./connector_feature"),config=require("../config"),roundBounds=require("../utils/bounds"),Api=require("../api"),async=require("async"),_=require("lodash"),PlaceFeatureGroup=L.FeatureGroup.Collision.extend({options:{displayConnectors:!0,placeTypes:null,ignorePlaces:[],filter:{}},initialize:function(e,c){L.Util.setOptions(this,c),L.FeatureGroup.Collision.prototype.initialize.call(this,c);var t=this;this._map=e,this.places=[],this._placesFeatures={},this.connectorPlaces=[],this._connectorPlacesFeatures={},this._floor=null,this._selectedPlaces=[],this._ignoredPlaces=[],this._placesStyles={},e.on("floorChanged",function(){t._clearPlaces(),t._loadPlaces()},this),e.on("moveend",function(){t._loadPlaces()}),this._loadPlaces()},_ignorePlaces:function(e){var c=this;this._ignoredPlaces=e;var t=_.filter(this.places,function(e){return _.includes(c._ignoredPlaces,e._id)});_.forEach(t,function(e){c._removePlace(e)}),this._loadPlaces()},_loadPlaces:function(){var e=this,c=this._map.getBounds(),t=this._map.getZoom(),o=this._map.getFloor();if(16>t)return void this._clearPlaces();var a=_.filter(this.places,function(e){return isPlaceNotOnFloor(e,o)});_.forEach(a,function(c){e._removePlace(c)});var n=_.clone(this.options.filter)||{};n.zoom=t,n.floor=o;var i=roundBounds(c,t);n.latitudeMin=i.getSouth(),n.latitudeMax=i.getNorth(),n.longitudeMin=i.getWest(),n.longitudeMax=i.getEast(),async.parallel({places:function(e){Api.getPlaces(n,e)},connectorPlaces:function(c){e.options.displayConnectors?Api.getConnectorPlaces(n,c):c(null,[])}},function(c,t){if(c)console.error(c);else{var o=e._map.getFloor();o===n.floor&&(_.forEach(e.places,function(c){_.find(t.places,{_id:c._id})||e._removePlace(c)}),_.forEach(e.connectorPlaces,function(c){_.find(t.connectorPlaces,{_id:c._id})||e._removeConnector(c)}),async.each(t.places,function(c,t){!isPlaceInPlaces(c,e.places)&&isPlaceOnFloor(c,o)?_.includes(e._ignoredPlaces,c._id)?t():e._addPlace(c,t):t()},function(){o=e._map.getFloor(),o===n.floor&&_.forEach(t.connectorPlaces,function(c){!isPlaceInPlaces(c,e.connectorPlaces)&&isPlaceOnFloor(c,o)&&(_.includes(e._ignoredPlaces,c._id)||e._addConnector(c))})}))}})},_clearPlaces:function(){var e=this;_.forEach(this.places,function(c){e._removePlace(c)}),_.forEach(this.connectorPlaces,function(c){e._removeConnector(c)}),e.clearLayers()},_addPlace:function(e,c){var t=this;Api.getPlaceType(e.placeTypeId,function(o,a){e.placeType=a,e.style=e.style||{},t._placesStyles[e._id]&&_.assignIn(e.style,t._placesStyles[e._id]);var n=placeFeature.placeFeature(e);t.places.push(e),t._placesFeatures[e._id]=n,-1!==_.indexOf(t._selectedPlaces,e._id)&&n.setSelected(!0),t.addLayer(n),n.on("placeClick",t._placeClick,t),c&&c()})},_removePlace:function(e){var c=this._placesFeatures[e._id];c&&(c.off("placeClick",this._placeClick,this),this.removeLayer(c),this.places=_.without(this.places,e),delete this._placesFeatures[e._id])},_placeClick:function(e){this.fire("placeClick",e)},_addConnector:function(e){var c=connectorFeature.connectorFeature(e);this.connectorPlaces.push(e),this._connectorPlacesFeatures[e._id]=c,this.addLayer(c)},_removeConnector:function(e){var c=this._connectorPlacesFeatures[e._id];c&&(this.removeLayer(c),this.connectorPlaces=_.without(this.connectorPlaces,e),delete this._connectorPlacesFeatures[e._id])},setPlaceStyle:function(e,c){this._placesStyles[e]=c;var t=_.find(this.places,{_id:e}),o=this._placesFeatures[e];t&&o&&(_.assignIn(t.style,this._placesStyles[t._id]),o.refreshStyle(t))}});module.exports.PlaceFeatureGroup=PlaceFeatureGroup,module.exports.placeFeatureGroup=function(e,c,t){return new PlaceFeatureGroup(e,c,t)};
},{"../api":15,"../config":17,"../utils/bounds":34,"./connector_feature":27,"./place_feature":28,"async":1,"lodash":5}],30:[function(require,module,exports){
"use strict";var _=require("lodash"),map,options={},currentPosition=null,currentPositionHeading=null,positionsBySource={},isPositionLocked=!1,isFollowUserModeActive=!1,positionMarker,positionCircle,positionHeading,locateActive=!1,initialize=function(o,i){map=o,options=i,map.on("dragstart",stopFollowUserMode),map.on("floorChanged",_updateVisualsColor),map.on("zoomend",_updateHeadingMarkerVisual)},getUserPosition=function(){return currentPosition},newUserPositionMeasurement=function(o){var i=new Date;o.time=i.getTime(),o.validity?o.validUntil=i.getTime()+o.validity:o.validUntil=null,positionsBySource[o.source]=o,isPositionLocked||_updatePosition()},lockUserPosition=function(){isPositionLocked=!0},unlockUserPosition=function(){isPositionLocked=!1,_updatePosition()},setUserPosition=function(o){isPositionLocked=!0,_setCurrentPosition(o)},setUserHeading=function(o){currentPositionHeading=o,_updatePositionVisuals()},getFollowUserMode=function(){return isFollowUserModeActive},setFollowUserMode=function(o){if(isFollowUserModeActive!==o){if(isFollowUserModeActive=o,isFollowUserModeActive&&!locateActive){var i=map.getUserPosition();!options.useBrowserLocation||i&&_isMeasurementValidNow(i)||(map.on("locationfound",_locationFound),map.on("locationerror",_locationError),map.locate({watch:!0,enableHighAccuracy:!0}),locateActive=!0)}isFollowUserModeActive&&centerOnUser(19),map.fire("followUserModeChange",{active:isFollowUserModeActive})}},startFollowUserMode=function(){setFollowUserMode(!0)},stopFollowUserMode=function(){setFollowUserMode(!1)},centerOnUser=function(o){if(!_.isNull(currentPosition)){var i=map.getZoom();o>i&&(i=o),map.setView([currentPosition.latitude,currentPosition.longitude],i,{animation:!0}),(currentPosition.floor||0===currentPosition.floor)&&map.setFloor(currentPosition.floor)}},_locationFound=function(o){newUserPositionMeasurement({latitude:o.latlng.lat,longitude:o.latlng.lng,accuracy:o.accuracy,floor:null,validity:null,source:"browser"})},_locationError=function(o){console.error(o)},bringToFrontMarker=function(){positionMarker&&positionCircle&&(positionMarker.bringToFront(),positionCircle.bringToFront())},_updatePosition=function(){if(_.isEmpty(positionsBySource))_setCurrentPosition(null);else{var o=_.orderBy(_.values(positionsBySource),[_isMeasurementValidNow,_measurementHasFloor,"accuracy","time"],["desc","desc","asc","desc"]);_setCurrentPosition(o[0])}},_setCurrentPosition=function(o){currentPosition=o,_updatePositionVisuals(),isFollowUserModeActive&&centerOnUser(19),map.fire("userPositionChange",{userPosition:o})},_isMeasurementValidNow=function(o){if(_.isNull(o.validUntil))return!0;var i=new Date;return o.validUntil>i.getTime()},_measurementHasFloor=function(o){return _.isNumber(o.floor)},_updatePositionVisuals=function(){_updateHeadingMarkerVisual(),_updatePositionMarkerVisual(),positionMarker&&positionMarker.bringToFront(),_updateVisualsColor()},_updatePositionMarkerVisual=function(){if(currentPosition){var o=currentPosition.accuracy;_.isFinite(o)||(o=0),positionMarker||(positionMarker=L.circleMarker([currentPosition.latitude,currentPosition.longitude],{weight:2,color:"#FFF",opacity:1,fillOpacity:1,fillColor:"#C51586",clickable:!1,className:"noClickable"}).setRadius(7).addTo(map),positionCircle=L.circle([currentPosition.latitude,currentPosition.longitude],o,{weight:1,opacity:.4,color:"#C51586",fillOpacity:.02,clickable:!1,className:"noClickable"}).addTo(map)),positionMarker.setLatLng([currentPosition.latitude,currentPosition.longitude]),positionCircle.setLatLng([currentPosition.latitude,currentPosition.longitude]),positionCircle.setRadius(o)}else positionMarker&&(map.removeLayer(positionMarker),positionMarker=null),positionCircle&&(map.removeLayer(positionCircle),positionCircle=null)},_updateHeadingMarkerVisual=function(){if(_.isFinite(currentPositionHeading)&&currentPosition){var o=L.latLng(currentPosition.latitude,currentPosition.longitude),i=70,e=13,t=map.project(o),n=Math.PI/180,r=-(currentPositionHeading-90)*n,s=i/2*n,l=new L.Point(t.x+e*Math.cos(r),t.y-e*Math.sin(r)),a=r+s,c=r-s,u=new L.Point(l.x-e/1.5*Math.cos(a),l.y+e/1.5*Math.sin(a)),p=new L.Point(l.x-e/1.5*Math.cos(c),l.y+e/1.5*Math.sin(c));positionHeading?positionHeading.setLatLngs([map.unproject(u),map.unproject(l),map.unproject(p)]):(positionHeading=L.polygon([map.unproject(u),map.unproject(l),map.unproject(p)],{fill:!0,fillColor:"#C51586",fillOpacity:1,stroke:!0,color:"#C51586",opacity:1,weight:0,lineCap:"square",lineJoin:"miter",subpixelAccuracy:!0}),positionHeading.addTo(map))}else positionHeading&&(map.removeLayer(positionHeading),positionHeading=null)},_updateVisualsColor=function(){currentPosition&&_.isNumber(currentPosition.floor)&&(_.isNull(map.getFloor())||_.isNull(currentPosition.floor)||currentPosition.floor==map.getFloor()?(positionMarker.setStyle({fillColor:"#C51586"}),positionCircle.setStyle({color:"#C51586"}),positionHeading&&positionHeading.setStyle({fillColor:"#C51586"})):(positionMarker.setStyle({fillColor:"#999999"}),positionCircle.setStyle({color:"#999999"}),positionHeading&&positionHeading.setStyle({fillColor:"#999999"})))};exports.initialize=initialize,exports.newUserPositionMeasurement=newUserPositionMeasurement,exports.lockUserPosition=lockUserPosition,exports.unlockUserPosition=unlockUserPosition,exports.getUserPosition=getUserPosition,exports.setUserPosition=setUserPosition,exports.setUserHeading=setUserHeading,exports.getFollowUserMode=getFollowUserMode,exports.setFollowUserMode=setFollowUserMode,exports.centerOnUser=centerOnUser;
},{"lodash":5}],31:[function(require,module,exports){
"use strict";var UserPositionControl=L.Control.extend({options:{position:"bottomright"},onAdd:function(o){var t=L.DomUtil.create("div","mapwize-control mapwize-position-control leaflet-bar leaflet-control");return this._map=o,this._button=L.DomUtil.create("a","mapwize-control-image mapwize-position-control-button",t),this._button.innerHTML="",this._button.href="#",this._button.title="#",L.DomEvent.on(this._button,"click",L.DomEvent.stopPropagation).on(this._button,"mousedown",L.DomEvent.stopPropagation).on(this._button,"dblclick",L.DomEvent.stopPropagation).on(this._button,"click",L.DomEvent.preventDefault).on(this._button,"click",this._click,this),this._updateDisplay(),o.on("followUserModeChange",this._updateDisplay,this),t},_updateDisplay:function(){this._map.getFollowUserMode()?this._button.className="mapwize-control-image mapwize-position-control-button active":this._button.className="mapwize-control-image mapwize-position-control-button"},_click:function(){this._map.setFollowUserMode(!this._map.getFollowUserMode())},onRemove:function(o){o.off("followUserModeChange",this._updateDisplay,this)}});module.exports.UserPositionControl=UserPositionControl,module.exports.userPositionControl=function(o){return new UserPositionControl(o)};
},{}],32:[function(require,module,exports){
"use strict";var config=require("../config"),Api=require("../api"),map,initialize=function(e){map=e},_qrcodeUnknown=function(){alert("QR-code unknown!")},qrcode=function(e){var n={};n.payload=e,Api.getBeacon(n,function(e,n){if(e||1!=n.length)_qrcodeUnknown();else{var o=n[0];centerUserOnBeacon(o)}})},centerUserOnBeacon=function(e){map.unlockUserPosition(),map.newUserPositionMeasurement({latitude:e.location.lat,longitude:e.location.lon,floor:e.floor,accuracy:1,validity:12e4,source:e.type}),map.setFollowUserMode(!0)};exports.initialize=initialize,exports.qrcode=qrcode,exports.centerUserOnBeacon=centerUserOnBeacon;
},{"../api":15,"../config":17}],33:[function(require,module,exports){
"use strict";var QrcodeControl=L.Control.extend({options:{position:"bottomleft",onClick:function(){}},onAdd:function(o){var t=L.DomUtil.create("div","mapwize-control mapwize-qrcode-control leaflet-bar leaflet-control");return this._map=o,this._button=L.DomUtil.create("a","mapwize-control-image mapwize-qrcode-control-button",t),this._button.innerHTML="",this._button.href="#",this._button.title="QR",L.DomEvent.on(this._button,"click",L.DomEvent.stopPropagation).on(this._button,"mousedown",L.DomEvent.stopPropagation).on(this._button,"dblclick",L.DomEvent.stopPropagation).on(this._button,"click",L.DomEvent.preventDefault).on(this._button,"click",this.options.onClick),t}});module.exports.QrcodeControl=QrcodeControl,module.exports.qrcodeControl=function(o){return new QrcodeControl(o)};
},{}],34:[function(require,module,exports){
"use strict";function _getRound(o){var n=360;return zoomRound[o]?n=zoomRound[o]:_.times(o,function(){n/=2}),n}function _roundBound(o,n,u){var t=Math.floor(o/n)*n;return u&&(t+=n),t}var _=require("lodash"),zoomRound={0:360,1:180,2:90,3:45,4:22.5,5:11.25,6:5.625,7:2.813,8:1.406,9:.703,10:.352,11:.176,12:.088,13:.044,14:.022,15:.011,16:.005,17:.0025,18:.00125,19:625e-6,20:3125e-7,21:15625e-8},_normalizeBounds=function(o,n){var u=_getRound(n)||1,t=L.latLng(_roundBound(o.getSouth(),u,!1),_roundBound(o.getWest(),u,!1)),r=L.latLng(_roundBound(o.getNorth(),u,!0),_roundBound(o.getEast(),u,!0));return L.latLngBounds(t,r)};module.exports=_normalizeBounds;
},{"lodash":5}],35:[function(require,module,exports){
"use strict";function hexToRgb(e){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(r,function(e,r,a,n){return r+r+a+a+n+n});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}module.exports=hexToRgb;
},{}],36:[function(require,module,exports){
"use strict";var $=require("jquery"),config=require("../config"),query={};query.ajax=function(e,i,a,n,r,t){return config.apiKey&&("post"===e&&-1===i.indexOf("api_key")?i+=i.indexOf("?")>=0?"&api_key="+config.apiKey:"?api_key="+config.apiKey:a.api_key||(a.api_key=config.apiKey)),"post"===e?$.ajax({url:config.SERVER+"/api/v1"+i,method:e,data:JSON.stringify(a),contentType:"application/json",xhrFields:{withCredentials:!0}}).done(n).fail(r).always(t):$.ajax({url:config.SERVER+"/api/v1"+i,method:e,data:a,xhrFields:{withCredentials:!0}}).done(n).fail(r).always(t)},query.get=function(e,i,a,n,r){return query.ajax("get",e,i,a,n,r)},query.put=function(e,i,a,n,r){return query.ajax("put",e,i,a,n,r)},query.post=function(e,i,a,n,r){return query.ajax("post",e,i,a,n,r)},query.getOne=function(e,i,a,n,r){var t=function(e){_.isEmpty(e)?n(new Error("Object not found")):a(e[0])};query.get(e,i,t,n,r)},module.exports=query;
},{"../config":17,"jquery":2}],37:[function(require,module,exports){
"use strict";var _=require("lodash"),config=require("../config"),analytics=require("../analytics"),VenueFeature=L.FeatureGroup.extend({options:{},initialize:function(e,n){var i=this;L.Util.setOptions(this,n),L.FeatureGroup.prototype.initialize.call(this),this.venue=e,this.shape=null,this.marker=null,L.geoJson(e.geometry,{onEachFeature:function(e,n){i.marker=L.marker(n.getBounds().getCenter())}}),e.icon||(e.icon="https://www.mapwize.io/sdk/mapwize.js/images/building.png"),e.translations&&e.translations[0]||(e.translations=[{title:""}]);var t=20,a=null;a=e.icon?L.divIcon({iconSize:[t,t],iconAnchor:[t/2,t/2],html:'<div class="placeIcon"><img class="iconImage" src="'+e.icon+'" style="width: '+t+"px;height: "+t+'px;" /> <span class="iconLabel noClickable">'+e.translations[0].title+"</span></div>",className:"mapwize-div-icon"}):new L.Icon.Default,this.marker.setIcon(a),this.addLayer(this.marker),this.on("click",function(e){this.fire("venueClick",{e:e,venue:this.venue,venueFeature:this},!0),analytics.sendEvent("venue","click",{objectId:this.venue._id,objectName:this.venue.name,venueId:this.venue._id,venueName:this.venue.name,organizationId:this.venue.owner})})},getMarker:function(){return this.marker},getShape:function(){return this.shape}});module.exports.VenueFeature=VenueFeature,module.exports.venueFeature=function(e,n){return new VenueFeature(e,n)};
},{"../analytics":14,"../config":17,"lodash":5}],38:[function(require,module,exports){
"use strict";function isVenueInVenues(e,n){return!_.isUndefined(_.find(n,function(n){return n._id==e._id}))}var venueFeature=require("./venue_feature"),config=require("../config"),roundBounds=require("../utils/bounds"),Api=require("../api"),_=require("lodash"),VenueFeatureGroup=L.FeatureGroup.Collision.extend({options:{filter:{}},initialize:function(e,n){L.Util.setOptions(this,n),L.FeatureGroup.Collision.prototype.initialize.call(this,n),this._map=e,this.venues=[],this._venuesFeatures={};var u=this;e.on("moveend",function(){u._loadVenues()}),this._loadVenues()},_loadVenues:function(){var e=this,n=this._map.getBounds(),u=this._map.getZoom();if(u>15)return void e._clearVenues();var i=_.clone(this.options.filter)||{},t=roundBounds(n,u);i.latitudeMin=t.getSouth(),i.latitudeMax=t.getNorth(),i.longitudeMin=t.getWest(),i.longitudeMax=t.getEast(),Api.getVenues(i,function(n,u){if(n)console.error(n);else{var i=e._map.getZoom();if(i>17)return void e._clearVenues();var t=_.keyBy(u,"_id");_.forEach(e.venues,function(n){t[n._id]||e._removeVenue(n)}),_.forEach(u,function(n){isVenueInVenues(n,e.venues)||e._addVenue(n)}),e._onZoomEnd()}})},_clearVenues:function(){var e=this;_.forEach(this.venues,function(n){e._removeVenue(n)})},_addVenue:function(e){var n=venueFeature.venueFeature(e);this.venues.push(e),this._venuesFeatures[e._id]=n,this.addLayer(n),n.on("venueClick",this._venueClick,this)},_removeVenue:function(e){var n=this._venuesFeatures[e._id];n.off("venueClick",this._venueClick,this),this.removeLayer(n),this.venues=_.without(this.venues,e),delete this._venuesFeatures[e._id]},_venueClick:function(e){this.fire("venueClick",e)}});module.exports.VenueFeatureGroup=VenueFeatureGroup,module.exports.venueFeatureGroup=function(e,n,u){return new VenueFeatureGroup(e,n,u)};
},{"../api":15,"../config":17,"../utils/bounds":34,"./venue_feature":37,"lodash":5}]},{},[19])


//# sourceMappingURL=mapwize.js.map